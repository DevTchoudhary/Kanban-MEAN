{"version":3,"file":"ej2-kanban.umd.min.js","sources":["../src/kanban/base/constant.js","../src/kanban/base/data.js","../src/kanban/models/swimlane-settings.js","../src/kanban/models/card-settings.js","../src/kanban/models/dialog-settings.js","../src/kanban/models/columns.js","../src/kanban/models/stacked-headers.js","../src/kanban/models/sort-settings.js","../src/kanban/base/css-constant.js","../src/kanban/actions/action.js","../src/kanban/actions/crud.js","../src/kanban/actions/drag.js","../src/kanban/actions/dialog.js","../src/kanban/actions/keyboard.js","../src/kanban/actions/tooltip.js","../src/kanban/actions/touch.js","../src/kanban/base/mobile-layout.js","../src/kanban/base/layout-render.js","../src/kanban/base/virtual-layout-render.js","../src/kanban/base/kanban.js"],"sourcesContent":["/**\n * Kanban Constants\n */\n// Constants for public events\n/** @private */\nexport var actionBegin = 'actionBegin';\n/** @private */\nexport var actionComplete = 'actionComplete';\n/** @private */\nexport var actionFailure = 'actionFailure';\n/** @private */\nexport var cardClick = 'cardClick';\n/** @private */\nexport var cardDoubleClick = 'cardDoubleClick';\n/** @private */\nexport var cardRendered = 'cardRendered';\n/** @private */\nexport var queryCellInfo = 'queryCellInfo';\n/** @private */\nexport var dataBinding = 'dataBinding';\n/** @private */\nexport var dataBound = 'dataBound';\n/** @private */\nexport var dragStart = 'dragStart';\n/** @private */\nexport var drag = 'drag';\n/** @private */\nexport var dragStop = 'dragStop';\n/** @private */\nexport var documentClick = 'document-click';\n/** @private */\nexport var dialogOpen = 'dialogOpen';\n/** @private */\nexport var dialogClose = 'dialogClose';\n// Constants for internal events\n/** @private */\nexport var contentReady = 'content-ready';\n/** @private */\nexport var dataReady = 'data-ready';\n/** @private */\nexport var bottomSpace = 25;\n/** @private */\nexport var cardSpace = 16;\n/** @private */\nexport var toggleWidth = 50;\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { extend, isNullOrUndefined, formatUnit } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport * as events from './constant';\n/**\n * Kanban data module\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module\n     *\n     * @param {Kanban} parent Accepts the instance of the Kanban\n     */\n    function Data(parent) {\n        this.initload = false;\n        this.dataState = { isPending: false, resolver: null, isDataChanged: false };\n        this.parent = parent;\n        this.keyField = this.parent.cardSettings.headerField;\n        this.dataState = { isDataChanged: false };\n        this.isObservable = false;\n        this.initDataManager(parent.dataSource, parent.query);\n        this.refreshDataManager();\n    }\n    /**\n     * The function used to initialize dataManager` and query\n     *\n     * @param {Object[] | DataManager} dataSource Accepts the dataSource as collection of objects or Datamanager instance.\n     * @param {Query} query Accepts the query to process the data from collections.\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.initDataManager = function (dataSource, query) {\n        this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n        this.query = query instanceof Query ? query : new Query();\n        this.kanbanData = new DataManager(this.parent.kanbanData);\n    };\n    /**\n     * @returns {boolean} returns whether its remote data\n     * @hidden\n     */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined &&\n            this.dataManager.dataSource.url !== '';\n    };\n    /**\n     * @returns {boolean} returns the column key fields\n     * @hidden\n     */\n    Data.prototype.columnKeyFields = function () {\n        var columns = [];\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (column.keyField.toString().split(',').length > 1) {\n                for (var _b = 0, _c = column.keyField.toString().split(','); _b < _c.length; _b++) {\n                    var innerColumns = _c[_b];\n                    columns.push(innerColumns.trim());\n                }\n            }\n            else {\n                columns.push(column.keyField.toString());\n            }\n        }\n        return columns;\n    };\n    /**\n     * The function used to generate updated Query from schedule model\n     *\n     * @param {string} parameter Accepts the parameter that needs to be sent to the service end.\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getQuery = function (parameter) {\n        var query = this.query.clone();\n        if (this.isRemote() && this.parent.enableVirtualization) {\n            var cardHeight = this.parent.cardHeight === 'auto' ? 100 :\n                parseInt(formatUnit(this.parent.cardHeight).split('px')[0], 10);\n            var take = this.parent.height === 'auto' ? (Math.ceil(window.innerHeight / cardHeight) * 2) :\n                (Math.ceil(parseInt(formatUnit(this.parent.height).split('px')[0], 10) / cardHeight) * 2);\n            var columns = this.columnKeyFields();\n            for (var i = 0; i < columns.length; i++) {\n                query.where(this.parent.keyField, 'equal', columns[i]);\n            }\n            query.take(take);\n            if (isNullOrUndefined(parameter)) {\n                parameter = 'KanbanVirtualization';\n            }\n            query.addParams('KanbanVirtualization', parameter);\n        }\n        return query;\n    };\n    /**\n     * The function used to get dataSource by executing given Query\n     *\n     * @param  {Query} query - A Query that specifies to generate dataSource\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getData = function (query) {\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise({ requestType: '' }, query);\n            this.isObservable = true;\n            return def.promise;\n        }\n        return this.dataManager.executeQuery(query);\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, index) {\n        var _this = this;\n        var dataArgs = args;\n        var state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'cardChanged' || args.requestType === 'cardRemoved' || args.requestType === 'cardCreated') {\n                var editArgs_1 = args;\n                editArgs_1.promise = deff.promise;\n                editArgs_1.state = state;\n                editArgs_1.index = index;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                dataArgs.cancelEdit = deff.reject;\n                this.parent.trigger(events.dataSourceChanged, editArgs_1);\n                deff.promise.then(function () {\n                    _this.setState({ isPending: true, resolver: def.resolve });\n                    _this.parent.trigger(events.dataStateChange, state);\n                    editArgs_1.addedRecords.forEach(function (data) {\n                        _this.parent.kanbanData.push(data);\n                    });\n                    editArgs_1.changedRecords.forEach(function (changedRecord) {\n                        var cardObj = _this.parent.kanbanData.filter(function (data) {\n                            return data[_this.parent.cardSettings.headerField] ===\n                                changedRecord[_this.parent.cardSettings.headerField];\n                        })[0];\n                        extend(cardObj, changedRecord);\n                    });\n                    editArgs_1.deletedRecords.forEach(function (deletedRecord) {\n                        var index = _this.parent.kanbanData.findIndex(function (data) {\n                            return data[_this.parent.cardSettings.headerField] === deletedRecord[_this.parent.cardSettings.headerField];\n                        });\n                        _this.parent.kanbanData.splice(index, 1);\n                    });\n                }).catch(function () { _this.parent.hideSpinner(); void 0; });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    /**\n     * The function used to get the table name from the given Query\n     *\n     * @returns {string} Returns the table name.\n     * @private\n     */\n    Data.prototype.getTable = function () {\n        if (this.parent.query) {\n            var query = this.getQuery();\n            return query.fromTable;\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * The function is used to send the request and get response from datamanager\n     *\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.refreshDataManager = function () {\n        var _this = this;\n        var dataManager = this.getData(this.getQuery());\n        dataManager.then(function (e) {\n            return _this.dataManagerSuccess(e);\n        }).catch(function (e) { return _this.dataManagerFailure(e); });\n    };\n    /**\n     * The function is used to handle the success response from dataManager\n     *\n     * @param {ReturnType} e Accepts the dataManager success result\n     * @param type\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line\n    Data.prototype.dataManagerSuccess = function (e, type, offlineArgs, index) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (type) {\n            this.updateKanbanData(e);\n            if (this.parent.enableVirtualization && this.isRemote()) {\n                this.parent.virtualLayoutModule.refresh();\n            }\n        }\n        else {\n            this.parent.trigger(events.dataBinding, e, function (args) {\n                _this.updateKanbanData(args);\n                _this.parent.notify(events.dataReady, { processedData: _this.parent.kanbanData });\n                _this.parent.trigger(events.dataBound, null, function () { return _this.parent.hideSpinner(); });\n            });\n        }\n        if (this.initload) {\n            this.parent.layoutModule.refresh();\n            this.parent.renderTemplates();\n        }\n        this.initload = true;\n    };\n    /**\n     * The function is used to handle the update the column data count for remote, and update kanbanData while perform the CRUD action\n     *\n     * @param {ReturnType} args Accepts the dataManager success result\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.updateKanbanData = function (args) {\n        var resultData = extend([], !isNullOrUndefined(args.result.result) ?\n            args.result.result : args.result, null, true);\n        if (this.isRemote() && this.parent.enableVirtualization && resultData.length > 0\n            && !isNullOrUndefined(args.result.count)) {\n            var columnsKeyFields = this.columnKeyFields();\n            for (var i = 0; i < columnsKeyFields.length; i++) {\n                if (args.result.count[i].Key === columnsKeyFields[i]) {\n                    this.parent.columnDataCount[columnsKeyFields[i]] = args.result.count[i].Value;\n                }\n            }\n        }\n        this.parent.kanbanData = resultData;\n    };\n    /**\n     * The function is used to handle the failure response from dataManager\n     *\n     * @param {ReturnType} e Accepts the dataManager failure result\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.dataManagerFailure = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.actionFailure, { error: e }, function () { return _this.parent.hideSpinner(); });\n    };\n    /**\n     * The function is used to perform the insert, update, delete and batch actions in datamanager\n     *\n     * @param {string} updateType Accepts the update type action\n     * @param {SaveChanges} params Accepts the savechanges params\n     * @param {string} type Accepts the requestType as string\n     * @param {Object} data Accepts the data to perform crud action\n     * @param {number} index Accepts the index to refresh the data into UI\n     * @param {boolean} isDropped Accepts the boolean value based on based if it is dragged and dropped\n     * @param {string} dataDropIndexKeyFieldValue Accepts the dropped index key field value card\n     * @param {number} draggedKey Accepts the dragged keyfield of the column\n     * @param {number} droppedKey Accepts the dropped keyfield of the column\n     * @param {number} isMultipleDrag Accepts boolean value based on the multiple drag of the cards\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.updateDataManager = function (updateType, params, type, data, index, isDropped, dataDropIndexKeyFieldValue, draggedKey, droppedKey, isMultipleDrag) {\n        var _this = this;\n        this.parent.showSpinner();\n        var promise;\n        var actionArgs = {\n            requestType: type, cancel: false, addedRecords: params.addedRecords,\n            changedRecords: params.changedRecords, deletedRecords: params.deletedRecords\n        };\n        this.setState({ isDataChanged: true });\n        this.eventPromise(actionArgs, this.query, index);\n        this.parent.trigger(events.actionComplete, actionArgs, function (offlineArgs) {\n            if (!offlineArgs.cancel) {\n                switch (updateType) {\n                    case 'insert':\n                        promise = _this.dataManager.insert(data, _this.getTable(), _this.getQuery());\n                        break;\n                    case 'update':\n                        if (_this.parent.enableVirtualization && !_this.parent.dataModule.isRemote() && isDropped) {\n                            promise = _this.dataManager.remove(_this.keyField, data, _this.getTable(), _this.getQuery());\n                            promise = _this.dataManager.insert(data, _this.getTable(), _this.getQuery(), _this.dataManager.dataSource.json.findIndex(function (data) {\n                                return data[_this.parent.cardSettings.headerField] === dataDropIndexKeyFieldValue;\n                            }));\n                        }\n                        else {\n                            promise = _this.dataManager.update(_this.keyField, data, _this.getTable(), _this.getQuery());\n                        }\n                        break;\n                    case 'delete':\n                        promise = _this.dataManager.remove(_this.keyField, data, _this.getTable(), _this.getQuery());\n                        break;\n                    case 'batch':\n                        if (!_this.parent.dataModule.isRemote() && isDropped && _this.parent.enableVirtualization && data) {\n                            for (var i = 0; i < data.length; i++) {\n                                promise = _this.dataManager.remove(_this.keyField, data[i], _this.getTable(), _this.getQuery());\n                            }\n                            var currentIndex = _this.dataManager.dataSource.json.findIndex(function (data) {\n                                return data[_this.parent.cardSettings.headerField] === dataDropIndexKeyFieldValue;\n                            });\n                            for (var i = 0; i < data.length; i++, currentIndex++) {\n                                promise = _this.dataManager.insert(data[i], _this.getTable(), _this.getQuery(), currentIndex);\n                            }\n                        }\n                        else {\n                            promise = _this.dataManager.saveChanges(params, _this.keyField, _this.getTable(), _this.getQuery());\n                        }\n                        break;\n                }\n                if (_this.dataManager.dataSource.offline) {\n                    if (!_this.isObservable) {\n                        _this.kanbanData = _this.dataManager;\n                        _this.parent.kanbanData = _this.dataManager.dataSource.json;\n                        index = draggedKey === droppedKey && isMultipleDrag ? index - 1 : index;\n                        _this.refreshUI(offlineArgs, index, isDropped);\n                        if (_this.parent.enableVirtualization) {\n                            _this.parent.virtualLayoutModule.refreshColumnData(draggedKey, droppedKey, offlineArgs.requestType, data[_this.parent.keyField]);\n                        }\n                    }\n                }\n                else {\n                    promise.then(function (args) {\n                        if (_this.parent.isDestroyed) {\n                            return;\n                        }\n                        var dataManager = _this.getData(_this.getQuery());\n                        dataManager.then(function (e) { return _this.dataManagerSuccess(e, 'DataSourceChange', offlineArgs, index); }).catch(function (e) { return _this.dataManagerFailure(e); });\n                        if (offlineArgs.requestType === 'cardCreated') {\n                            if (!Array.isArray(args)) {\n                                offlineArgs.addedRecords[0] = extend(offlineArgs.addedRecords[0], args);\n                            }\n                            else {\n                                _this.modifyArrayData(offlineArgs.addedRecords, args);\n                            }\n                        }\n                        else if (offlineArgs.requestType === 'cardChanged') {\n                            if (!Array.isArray(args)) {\n                                offlineArgs.changedRecords[0] = extend(offlineArgs.changedRecords[0], args);\n                            }\n                            else {\n                                _this.modifyArrayData(offlineArgs.changedRecords, args);\n                            }\n                        }\n                        else if (offlineArgs.requestType === 'cardRemoved') {\n                            if (!Array.isArray(args)) {\n                                offlineArgs.deletedRecords[0] = extend(offlineArgs.deletedRecords[0], args);\n                            }\n                            else {\n                                _this.modifyArrayData(offlineArgs.deletedRecords, args);\n                            }\n                        }\n                        index = draggedKey === droppedKey && isMultipleDrag ? index - 1 : index;\n                        _this.refreshUI(offlineArgs, index, isDropped);\n                        if (_this.parent.enableVirtualization) {\n                            _this.parent.virtualLayoutModule.refreshColumnData(draggedKey, droppedKey, offlineArgs.requestType, data[_this.parent.keyField]);\n                        }\n                    }).catch(function (e) {\n                        _this.dataManagerFailure(e);\n                    });\n                }\n            }\n        });\n    };\n    Data.prototype.modifyArrayData = function (onLineData, e) {\n        if (onLineData.length === e.length) {\n            for (var i = 0; i < e.length; i++) {\n                onLineData[i] = extend(onLineData[i], e[i]);\n            }\n        }\n        return onLineData;\n    };\n    /**\n     * The function is used to refresh the UI once the data manager action is completed\n     *\n     * @param {ActionEventArgs} args Accepts the ActionEventArgs to refresh UI.\n     * @param {number} position Accepts the index to refresh UI.\n     * @param {boolean} isDropped Accepts the boolean value based on based if it is dragged and dropped\n     * @returns {void}\n     */\n    Data.prototype.refreshUI = function (args, position, isDropped) {\n        var _this = this;\n        if (this.parent.enableVirtualization) {\n            this.parent.virtualLayoutModule.columnData = this.parent.virtualLayoutModule.getColumnCards();\n            args.addedRecords.forEach(function (data, index) {\n                _this.parent.virtualLayoutModule.renderCardBasedOnIndex(data, position + index, isDropped, args.requestType);\n            });\n            args.changedRecords.forEach(function (data) {\n                _this.parent.virtualLayoutModule.removeCard(data);\n                _this.parent.virtualLayoutModule.renderCardBasedOnIndex(data, position, isDropped, args.requestType);\n                if (_this.parent.virtualLayoutModule.isSelectedCard) {\n                    _this.parent.actionModule.SingleCardSelection(data);\n                }\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index'\n                    && _this.parent.sortSettings.direction === 'Descending' && position > 0) {\n                    --position;\n                }\n                else {\n                    position++;\n                }\n            });\n            args.deletedRecords.forEach(function (data) {\n                _this.parent.virtualLayoutModule.removeCard(data);\n            });\n            this.parent.virtualLayoutModule.refresh();\n        }\n        else {\n            this.parent.layoutModule.columnData = this.parent.layoutModule.getColumnCards();\n            if (this.parent.swimlaneSettings.keyField) {\n                this.parent.layoutModule.kanbanRows = this.parent.layoutModule.getRows();\n                this.parent.layoutModule.swimlaneData = this.parent.layoutModule.getSwimlaneCards();\n            }\n            args.addedRecords.forEach(function (data, index) {\n                if (_this.parent.swimlaneSettings.keyField && !data[_this.parent.swimlaneSettings.keyField]) {\n                    data[_this.parent.swimlaneSettings.keyField] = '';\n                }\n                _this.parent.layoutModule.renderCardBasedOnIndex(data, position + index);\n            });\n            args.changedRecords.forEach(function (data) {\n                if (_this.parent.swimlaneSettings.keyField && !data[_this.parent.swimlaneSettings.keyField]) {\n                    data[_this.parent.swimlaneSettings.keyField] = '';\n                }\n                _this.parent.layoutModule.removeCard(data);\n                _this.parent.layoutModule.renderCardBasedOnIndex(data, position);\n                if (_this.parent.layoutModule.isSelectedCard) {\n                    _this.parent.actionModule.SingleCardSelection(data);\n                }\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index'\n                    && _this.parent.sortSettings.direction === 'Descending' && position > 0) {\n                    --position;\n                }\n                else {\n                    position++;\n                }\n            });\n            args.deletedRecords.forEach(function (data) {\n                _this.parent.layoutModule.removeCard(data);\n            });\n            this.parent.layoutModule.refresh();\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.parent.trigger(events.dataBound, args, function () { return _this.parent.hideSpinner(); });\n    };\n    return Data;\n}());\nexport { Data };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of swimlane settings in kanban board.\n */\nvar SwimlaneSettings = /** @class */ (function (_super) {\n    __extends(SwimlaneSettings, _super);\n    function SwimlaneSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"keyField\", void 0);\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"textField\", void 0);\n    __decorate([\n        Property(false)\n    ], SwimlaneSettings.prototype, \"showEmptyRow\", void 0);\n    __decorate([\n        Property(true)\n    ], SwimlaneSettings.prototype, \"showItemCount\", void 0);\n    __decorate([\n        Property(false)\n    ], SwimlaneSettings.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('Ascending')\n    ], SwimlaneSettings.prototype, \"sortDirection\", void 0);\n    __decorate([\n        Property()\n    ], SwimlaneSettings.prototype, \"sortComparer\", void 0);\n    __decorate([\n        Property(true)\n    ], SwimlaneSettings.prototype, \"showUnassignedRow\", void 0);\n    __decorate([\n        Property(false)\n    ], SwimlaneSettings.prototype, \"enableFrozenRows\", void 0);\n    return SwimlaneSettings;\n}(ChildProperty));\nexport { SwimlaneSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of card settings in kanban board.\n */\nvar CardSettings = /** @class */ (function (_super) {\n    __extends(CardSettings, _super);\n    function CardSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], CardSettings.prototype, \"showHeader\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"headerField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"contentField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"tagsField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"grabberField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"footerCssField\", void 0);\n    __decorate([\n        Property()\n    ], CardSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property('Single')\n    ], CardSettings.prototype, \"selectionType\", void 0);\n    return CardSettings;\n}(ChildProperty));\nexport { CardSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of editor settings.\n */\nvar DialogSettings = /** @class */ (function (_super) {\n    __extends(DialogSettings, _super);\n    function DialogSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], DialogSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property([])\n    ], DialogSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property(null)\n    ], DialogSettings.prototype, \"model\", void 0);\n    return DialogSettings;\n}(ChildProperty));\nexport { DialogSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of columns in kanban board.\n */\nvar Columns = /** @class */ (function (_super) {\n    __extends(Columns, _super);\n    function Columns() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Columns.prototype, \"keyField\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"headerText\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"template\", void 0);\n    __decorate([\n        Property(false)\n    ], Columns.prototype, \"allowToggle\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"isExpanded\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"minCount\", void 0);\n    __decorate([\n        Property()\n    ], Columns.prototype, \"maxCount\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"showItemCount\", void 0);\n    __decorate([\n        Property(false)\n    ], Columns.prototype, \"showAddButton\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"allowDrag\", void 0);\n    __decorate([\n        Property(true)\n    ], Columns.prototype, \"allowDrop\", void 0);\n    __decorate([\n        Property([])\n    ], Columns.prototype, \"transitionColumns\", void 0);\n    return Columns;\n}(ChildProperty));\nexport { Columns };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of stacked header settings in kanban board.\n */\nvar StackedHeaders = /** @class */ (function (_super) {\n    __extends(StackedHeaders, _super);\n    function StackedHeaders() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], StackedHeaders.prototype, \"text\", void 0);\n    __decorate([\n        Property()\n    ], StackedHeaders.prototype, \"keyFields\", void 0);\n    return StackedHeaders;\n}(ChildProperty));\nexport { StackedHeaders };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Holds the configuration of sort settings in kanban board.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Index')\n    ], SortSettings.prototype, \"sortBy\", void 0);\n    __decorate([\n        Property()\n    ], SortSettings.prototype, \"field\", void 0);\n    __decorate([\n        Property('Ascending')\n    ], SortSettings.prototype, \"direction\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n","/**\n * Kanban CSS Constants\n */\n/** @private */\nexport var ROOT_CLASS = 'e-kanban';\n/** @private */\nexport var RTL_CLASS = 'e-rtl';\n/** @private */\nexport var DEVICE_CLASS = 'e-device';\n/** @private */\nexport var ICON_CLASS = 'e-icons';\n/** @private */\nexport var TEMPLATE_CLASS = 'e-template';\n/** @private */\nexport var SWIMLANE_CLASS = 'e-swimlane';\n/** @private */\nexport var TABLE_CLASS = 'e-kanban-table';\n/** @private */\nexport var HEADER_CLASS = 'e-kanban-header';\n/** @private */\nexport var HEADER_TABLE_CLASS = 'e-header-table';\n/** @private */\nexport var HEADER_CELLS_CLASS = 'e-header-cells';\n/** @private */\nexport var HEADER_WRAP_CLASS = 'e-header-wrap';\n/** @private */\nexport var HEADER_TITLE_CLASS = 'e-header-title';\n/** @private */\nexport var HEADER_TEXT_CLASS = 'e-header-text';\n/** @private */\nexport var HEADER_ICON_CLASS = 'e-header-icon';\n/** @private */\nexport var STACKED_HEADER_ROW_CLASS = 'e-stacked-header-row';\n/** @private */\nexport var STACKED_HEADER_CELL_CLASS = 'e-stacked-header-cell';\n/** @private */\nexport var CONTENT_CELLS_CLASS = 'e-content-cells';\n/** @private */\nexport var CONTENT_CLASS = 'e-kanban-content';\n/** @private */\nexport var CONTENT_TABLE_CLASS = 'e-content-table';\n/** @private */\nexport var HEADER_ROW_TOGGLE_CLASS = 'e-toggle-header';\n/** @private */\nexport var HEADER_ROW_CLASS = 'e-header-row';\n/** @private */\nexport var CONTENT_ROW_CLASS = 'e-content-row';\n/** @private */\nexport var SWIMLANE_ROW_CLASS = 'e-swimlane-row';\n/** @private */\nexport var SWIMLANE_ROW_EXPAND_CLASS = 'e-swimlane-row-expand';\n/** @private */\nexport var SWIMLANE_ROW_COLLAPSE_CLASS = 'e-swimlane-row-collapse';\n/** @private */\nexport var SWIMLANE_ROW_TEXT_CLASS = 'e-swimlane-text';\n/** @private */\nexport var CARD_ITEM_COUNT_CLASS = 'e-item-count';\n/** @private */\nexport var CARD_WRAPPER_CLASS = 'e-card-wrapper';\n/** @private */\nexport var CARD_VIRTUAL_WRAPPER_CLASS = 'e-card-virtual-wrapper';\n/** @private */\nexport var CARD_CLASS = 'e-card';\n/** @private */\nexport var DRAGGABLE_CLASS = 'e-draggable';\n/** @private */\nexport var DROPPABLE_CLASS = 'e-droppable';\n/** @private */\nexport var DRAG_CLASS = 'e-drag';\n/** @private */\nexport var DROP_CLASS = 'e-drop';\n/** @private */\nexport var DISABLED_CLASS = 'e-disabled';\n/** @private */\nexport var CARD_HEADER_CLASS = 'e-card-header';\n/** @private */\nexport var CARD_CONTENT_CLASS = 'e-card-content';\n/** @private */\nexport var CARD_HEADER_TEXT_CLASS = 'e-card-header-caption';\n/** @private */\nexport var CARD_HEADER_TITLE_CLASS = 'e-card-header-title';\n/** @private */\nexport var CARD_TAGS_CLASS = 'e-card-tags';\n/** @private */\nexport var CARD_TAG_CLASS = 'e-card-tag';\n/** @private */\nexport var CARD_COLOR_CLASS = 'e-card-color';\n/** @private */\nexport var CARD_LABEL_CLASS = 'e-card-label';\n/** @private */\nexport var CARD_FOOTER_CLASS = 'e-card-footer';\n/** @private */\nexport var EMPTY_CARD_CLASS = 'e-empty-card';\n/** @private */\nexport var CARD_FOOTER_CSS_CLASS = 'e-card-footer-css';\n/** @private */\nexport var COLUMN_EXPAND_CLASS = 'e-column-expand';\n/** @private */\nexport var COLUMN_COLLAPSE_CLASS = 'e-column-collapse';\n/** @private */\nexport var COLLAPSE_HEADER_TEXT_CLASS = 'e-collapse-header-text';\n/** @private */\nexport var COLLAPSED_CLASS = 'e-collapsed';\n/** @private */\nexport var DIALOG_CLASS = 'e-kanban-dialog';\n/** @private */\nexport var DIALOG_CONTENT_CONTAINER_CLASS = 'e-kanban-dialog-content';\n/** @private */\nexport var FORM_CLASS = 'e-kanban-form';\n/** @private */\nexport var FORM_WRAPPER_CLASS = 'e-kanban-form-wrapper';\n/** @private */\nexport var ERROR_VALIDATION_CLASS = 'e-kanban-error';\n/** @private */\nexport var FIELD_CLASS = 'e-field';\n/** @private */\nexport var DRAGGED_CLONE_CLASS = 'e-target-dragged-clone';\n/** @private */\nexport var CLONED_CARD_CLASS = 'e-cloned-card';\n/** @private */\nexport var DRAGGED_CARD_CLASS = 'e-kanban-dragged-card';\n/** @private */\nexport var DROPPED_CLONE_CLASS = 'e-target-dropped-clone';\n/** @private */\nexport var DROPPING_CLASS = 'e-dropping';\n/** @private */\nexport var BORDER_CLASS = 'e-kanban-border';\n/** @private */\nexport var TOGGLE_VISIBLE_CLASS = 'e-toggle-visible';\n/** @private */\nexport var MULTI_CLONE_CONTENT_CELL_CLASS = 'e-multi-content-cell';\n/** @private */\nexport var MULTI_CARD_WRAPPER_CLASS = 'e-multi-card-wrapper';\n/** @private */\nexport var MULTI_ACTIVE_CLASS = 'e-multi-active';\n/** @private */\nexport var TARGET_MULTI_CLONE_CLASS = 'e-target-multi-clone';\n/** @private */\nexport var MULTI_COLUMN_KEY_CLASS = 'e-column-key';\n/** @private */\nexport var CARD_SELECTION_CLASS = 'e-selection';\n/** @private */\nexport var TOOLTIP_CLASS = 'e-kanban-tooltip';\n/** @private */\nexport var TOOLTIP_TEXT_CLASS = 'e-tooltip-text';\n/** @private */\nexport var SCROLL_CONTAINER_CLASS = 'e-cell-scroll-container';\n/** @private */\nexport var SWIMLANE_HEADER_CLASS = 'e-swimlane-header';\n/** @private */\nexport var SWIMLANE_HEADER_TOOLBAR_CLASS = 'e-swimlane-header-toolbar';\n/** @private */\nexport var TOOLBAR_MENU_CLASS = 'e-toolbar-menu';\n/** @private */\nexport var TOOLBAR_MENU_ICON_CLASS = 'e-icon-menu';\n/** @private */\nexport var TOOLBAR_LEVEL_TITLE_CLASS = 'e-toolbar-level-title';\n/** @private */\nexport var TOOLBAR_SWIMLANE_NAME_CLASS = 'e-toolbar-swimlane-name';\n/** @private */\nexport var SWIMLANE_OVERLAY_CLASS = 'e-swimlane-overlay';\n/** @private */\nexport var SWIMLANE_CONTENT_CLASS = 'e-swimlane-content';\n/** @private */\nexport var SWIMLANE_RESOURCE_CLASS = 'e-swimlane-resource';\n/** @private */\nexport var SWIMLANE_TREE_CLASS = 'e-swimlane-tree';\n/** @private */\nexport var LIMITS_CLASS = 'e-limits';\n/** @private */\nexport var MAX_COUNT_CLASS = 'e-max-count';\n/** @private */\nexport var MIN_COUNT_CLASS = 'e-min-count';\n/** @private */\nexport var MAX_COLOR_CLASS = 'e-max-color';\n/** @private */\nexport var MIN_COLOR_CLASS = 'e-min-color';\n/** @private */\nexport var POPUP_EVENT_CLASS = 'e-event-popup';\n/** @private */\nexport var POPUP_HEADER_CLASS = 'e-popup-header';\n/** @private */\nexport var CLOSE_CLASS = 'e-close';\n/** @private */\nexport var POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @private */\nexport var POPUP_WRAPPER_CLASS = 'e-mobile-popup-wrapper';\n/** @private */\nexport var CLOSE_ICON_CLASS = 'e-close-icon';\n/** @private */\nexport var POPUP_OPEN_CLASS = 'e-popup-open';\n/** @private */\nexport var DIALOG_CONTENT_CONTAINER = 'e-kanban-dialog-content';\n/** @private */\nexport var SHOW_ADD_BUTTON = 'e-show-add-button';\n/** @private */\nexport var SHOW_ADD_ICON = 'e-show-add-icon';\n/** @private */\nexport var SHOW_ADD_FOCUS = 'e-show-add-focus';\n/** @private */\nexport var FROZEN_SWIMLANE_ROW_CLASS = 'e-frozen-swimlane-row';\n/** @private */\nexport var FROZEN_ROW_CLASS = 'e-frozen-row';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, classList, createElement, remove, addClass, removeClass, isNullOrUndefined as isNoU, formatUnit, createInstance, detach } from '@syncfusion/ej2-base';\nimport { Columns } from '../models/columns';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Action module is used to perform card actions.\n */\nvar Action = /** @class */ (function () {\n    /**\n     * Constructor for action module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function Action(parent) {\n        this.parent = parent;\n        this.columnToggleArray = [];\n        this.selectionArray = [];\n        this.lastCardSelection = null;\n        this.lastSelectionRow = null;\n        this.lastCard = null;\n        this.selectedCardsElement = [];\n        this.selectedCardsData = [];\n        this.hideColumnKeys = [];\n    }\n    Action.prototype.clickHandler = function (e) {\n        var elementSelector = '.' + cls.CARD_CLASS + ',.' + cls.HEADER_ICON_CLASS + ',.' + cls.CONTENT_ROW_CLASS + '.' +\n            cls.SWIMLANE_ROW_CLASS + ',.' + cls.SHOW_ADD_BUTTON + ',.' + cls.FROZEN_SWIMLANE_ROW_CLASS + ',.' + cls.CONTENT_ROW_CLASS +\n            ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n        var target = closest(e.target, elementSelector);\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.CARD_CLASS)) {\n            if (this.parent.allowKeyboard) {\n                this.parent.keyboardModule.cardTabIndexRemove();\n            }\n            this.cardClick(e);\n        }\n        else if (target.classList.contains(cls.HEADER_ICON_CLASS)) {\n            this.columnExpandCollapse(e);\n        }\n        else if (target.classList.contains(cls.CONTENT_ROW_CLASS) && target.classList.contains(cls.SWIMLANE_ROW_CLASS)) {\n            this.rowExpandCollapse(e);\n        }\n        else if (target.classList.contains(cls.SHOW_ADD_BUTTON)) {\n            this.addButtonClick(target);\n        }\n        else if (target.classList.contains(cls.FROZEN_SWIMLANE_ROW_CLASS)) {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n            var targetIcon = this.parent.layoutModule.frozenSwimlaneRow.querySelector('.' + cls.ICON_CLASS);\n            this.rowExpandCollapse(e, swimlaneRows[this.parent.layoutModule.frozenOrder]);\n            var isCollapsed = targetIcon.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS) ? true : false;\n            if (isCollapsed) {\n                classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n            }\n            else {\n                classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n            }\n        }\n    };\n    Action.prototype.addButtonClick = function (target) {\n        var _this = this;\n        var newData = {};\n        if (this.parent.kanbanData.length === 0) {\n            newData[this.parent.cardSettings.headerField] = 1;\n        }\n        else if (typeof (this.parent.kanbanData[0])[this.parent.cardSettings.headerField] === 'number') {\n            var id = this.parent.kanbanData.map(function (obj) {\n                return parseInt(obj[_this.parent.cardSettings.headerField], 10);\n            });\n            newData[this.parent.cardSettings.headerField] = Math.max.apply(Math, id) + 1;\n        }\n        newData[this.parent.keyField] = closest(target, '.' + cls.CONTENT_CELLS_CLASS).getAttribute('data-key');\n        if (this.parent.sortSettings.sortBy === 'Index') {\n            newData[this.parent.sortSettings.field] = 1;\n            if (closest(target, '.' + cls.CONTENT_CELLS_CLASS).querySelector('.' + cls.CARD_CLASS)) {\n                var card = this.parent.sortSettings.direction === 'Ascending' ?\n                    target.nextElementSibling.classList.contains(cls.BORDER_CLASS) ?\n                        target.nextElementSibling.nextElementSibling.lastElementChild : target.nextElementSibling.lastElementChild\n                    : target.nextElementSibling.classList.contains(cls.BORDER_CLASS) ?\n                        target.nextElementSibling.nextElementSibling.firstElementChild : target.nextElementSibling.firstElementChild;\n                var data = this.parent.getCardDetails(card);\n                newData[this.parent.sortSettings.field] = data[this.parent.sortSettings.field] + 1;\n            }\n        }\n        if (this.parent.kanbanData.length !== 0 && this.parent.swimlaneSettings.keyField &&\n            closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling) {\n            newData[this.parent.swimlaneSettings.keyField] =\n                closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling.getAttribute('data-key');\n        }\n        this.parent.openDialog('Add', newData);\n    };\n    Action.prototype.doubleClickHandler = function (e) {\n        var target = closest(e.target, '.' + cls.CARD_CLASS);\n        if (target) {\n            this.cardDoubleClick(e);\n        }\n    };\n    Action.prototype.cardClick = function (e, selectedCard) {\n        var _this = this;\n        var target = closest((selectedCard) ? selectedCard : e.target, '.' + cls.CARD_CLASS);\n        var cardClickObj = this.parent.getCardDetails(target);\n        if (cardClickObj) {\n            this.parent.activeCardData = { data: cardClickObj, element: target };\n            var args = { data: cardClickObj, element: target, cancel: false, event: e };\n            this.parent.trigger(events.cardClick, args, function (clickArgs) {\n                if (!clickArgs.cancel) {\n                    if (target.classList.contains(cls.CARD_SELECTION_CLASS) && e.type === 'click') {\n                        removeClass([target], cls.CARD_SELECTION_CLASS);\n                        if (_this.parent.enableVirtualization) {\n                            _this.parent.virtualLayoutModule.disableAttributeSelection(target);\n                        }\n                        else {\n                            _this.parent.layoutModule.disableAttributeSelection(target);\n                        }\n                    }\n                    else {\n                        var isCtrlKey = e.ctrlKey;\n                        if (_this.parent.isAdaptive && _this.parent.touchModule) {\n                            isCtrlKey = (_this.parent.touchModule.mobilePopup && _this.parent.touchModule.tabHold) || isCtrlKey;\n                        }\n                        _this.cardSelection(target, isCtrlKey, e.shiftKey);\n                    }\n                    if (_this.parent.isAdaptive && _this.parent.touchModule) {\n                        _this.parent.touchModule.updatePopupContent();\n                    }\n                    var cell = closest(target, '.' + cls.CONTENT_CELLS_CLASS);\n                    if (_this.parent.allowKeyboard) {\n                        var element = [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS));\n                        element.forEach(function (e) { e.setAttribute('tabindex', '0'); });\n                        _this.parent.keyboardModule.addRemoveTabIndex('Remove');\n                    }\n                }\n            });\n        }\n    };\n    Action.prototype.cardDoubleClick = function (e) {\n        var _this = this;\n        var target = closest(e.target, '.' + cls.CARD_CLASS);\n        var cardDoubleClickObj = this.parent.getCardDetails(target);\n        this.parent.activeCardData = { data: cardDoubleClickObj, element: target };\n        this.cardSelection(target, false, false);\n        var args = { data: cardDoubleClickObj, element: target, cancel: false, event: e };\n        this.parent.trigger(events.cardDoubleClick, args, function (doubleClickArgs) {\n            if (!doubleClickArgs.cancel) {\n                _this.parent.dialogModule.openDialog('Edit', args.data);\n            }\n        });\n    };\n    Action.prototype.rowExpandCollapse = function (e, isFrozenElem) {\n        var _this = this;\n        var headerTarget = (e instanceof HTMLElement) ? e : e.target;\n        var currentSwimlaneHeader = !isNoU(isFrozenElem) ? isFrozenElem : headerTarget;\n        var args = { cancel: false, target: headerTarget, requestType: 'rowExpandCollapse' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var target = closest(currentSwimlaneHeader, '.' + cls.SWIMLANE_ROW_CLASS);\n                var key = target.getAttribute('data-key');\n                var tgtRow = _this.parent.element.querySelector('.' + cls.CONTENT_ROW_CLASS + (\":nth-child(\" + (target.rowIndex + 2) + \")\"));\n                var targetIcon = target.querySelector(\".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS);\n                var isCollapsed = target.classList.contains(cls.COLLAPSED_CLASS) ? true : false;\n                var tabIndex_1;\n                if (isCollapsed) {\n                    removeClass([tgtRow, target], cls.COLLAPSED_CLASS);\n                    classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n                    _this.parent.swimlaneToggleArray.splice(_this.parent.swimlaneToggleArray.indexOf(key), 1);\n                    tabIndex_1 = '0';\n                }\n                else {\n                    addClass([tgtRow, target], cls.COLLAPSED_CLASS);\n                    classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n                    _this.parent.swimlaneToggleArray.push(key);\n                    tabIndex_1 = '-1';\n                }\n                targetIcon.setAttribute('aria-label', isCollapsed ? key + ' Expand' : key + ' Collapse');\n                target.setAttribute('aria-expanded', isCollapsed.toString());\n                tgtRow.setAttribute('aria-expanded', isCollapsed.toString());\n                var rows = [].slice.call(tgtRow.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n                rows.forEach(function (cell) { cell.setAttribute('tabindex', tabIndex_1); });\n                _this.parent.notify(events.contentReady, {});\n                _this.parent.trigger(events.actionComplete, { target: headerTarget, requestType: 'rowExpandCollapse' });\n            }\n        });\n    };\n    Action.prototype.columnExpandCollapse = function (e) {\n        var _this = this;\n        var headerTarget = (e instanceof HTMLElement) ? e : e.target;\n        var args = { cancel: false, target: headerTarget, requestType: 'columnExpandCollapse' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var target = closest(headerTarget, '.' + cls.HEADER_CELLS_CLASS);\n                var colIndex = target.cellIndex;\n                _this.columnToggle(target);\n                var collapsed = _this.parent.element.querySelectorAll(\".\" + cls.HEADER_CELLS_CLASS + \".\" + cls.COLLAPSED_CLASS).length;\n                if (collapsed === (_this.parent.columns.length - _this.hideColumnKeys.length)) {\n                    var index = (colIndex + 1 === collapsed) ? 1 : colIndex + 2;\n                    var headerSelector = \".\" + cls.HEADER_CELLS_CLASS + \":not(.\" + cls.STACKED_HEADER_CELL_CLASS + \"):nth-child(\" + index + \")\";\n                    var nextCol = _this.parent.element.querySelector(headerSelector);\n                    addClass([nextCol], cls.COLLAPSED_CLASS);\n                    _this.columnToggle(nextCol);\n                }\n                _this.parent.notify(events.contentReady, {});\n                _this.parent.trigger(events.actionComplete, { target: headerTarget, requestType: 'columnExpandCollapse' });\n            }\n        });\n    };\n    Action.prototype.columnToggle = function (target) {\n        var _this = this;\n        var colIndex = target.cellIndex;\n        var elementSelector = \".\" + cls.CONTENT_ROW_CLASS + \":not(.\" + cls.SWIMLANE_ROW_CLASS + \")\";\n        var targetRow = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        var colSelector = \".\" + cls.TABLE_CLASS + \" col:nth-child(\" + (colIndex + 1) + \")\";\n        var targetIcon = target.querySelector(\".\" + cls.COLUMN_EXPAND_CLASS + \",.\" + cls.COLUMN_COLLAPSE_CLASS);\n        var colGroup = [].slice.call(this.parent.element.querySelectorAll(colSelector));\n        if (target.classList.contains(cls.COLLAPSED_CLASS)) {\n            removeClass(colGroup, cls.COLLAPSED_CLASS);\n            if (this.parent.isAdaptive) {\n                if (this.parent.enableVirtualization) {\n                    colGroup.forEach(function (col) { return col.style.width = formatUnit(_this.parent.virtualLayoutModule.getWidth()); });\n                }\n                else {\n                    colGroup.forEach(function (col) { return col.style.width = formatUnit(_this.parent.layoutModule.getWidth()); });\n                }\n            }\n            classList(targetIcon, [cls.COLUMN_EXPAND_CLASS], [cls.COLUMN_COLLAPSE_CLASS]);\n            var _loop_1 = function (row) {\n                var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \":nth-child(\" + (colIndex + 1) + \")\");\n                removeClass([targetCol, target], cls.COLLAPSED_CLASS);\n                remove(targetCol.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS));\n                target.setAttribute('aria-expanded', 'true');\n                targetCol.setAttribute('aria-expanded', 'true');\n                var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n                collapsedCell.forEach(function (cell) {\n                    var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n                    collapasedText.style.height = 'auto';\n                    if (collapasedText && targetCol.getBoundingClientRect().height < (collapasedText.getBoundingClientRect().height + 10)) {\n                        collapasedText.style.height = (targetCol.getBoundingClientRect().height - 4) + 'px';\n                    }\n                });\n            };\n            for (var _i = 0, targetRow_1 = targetRow; _i < targetRow_1.length; _i++) {\n                var row = targetRow_1[_i];\n                _loop_1(row);\n            }\n            if (this.parent.kanbanData.length === 0 && targetRow.length === 0) {\n                removeClass([target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'true');\n            }\n            this.columnToggleArray.splice(this.columnToggleArray.indexOf(target.getAttribute('data-key')), 1);\n            this.parent.columns[colIndex].setProperties({ isExpanded: true }, true);\n            target.querySelector('.e-header-icon').setAttribute('aria-label', target.getAttribute('data-key') + ' Expand');\n        }\n        else {\n            addClass(colGroup, cls.COLLAPSED_CLASS);\n            if (this.parent.isAdaptive) {\n                colGroup.forEach(function (col) { return col.style.width = formatUnit(events.toggleWidth); });\n            }\n            classList(targetIcon, [cls.COLUMN_COLLAPSE_CLASS], [cls.COLUMN_EXPAND_CLASS]);\n            var key = target.getAttribute('data-key');\n            var _loop_2 = function (row) {\n                var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \"[data-key=\\\"\" + key + \"\\\"]\");\n                var index = targetCol.cellIndex;\n                var text = void 0;\n                if (!this_1.parent.enableVirtualization) {\n                    text = (this_1.parent.columns[index].showItemCount ? '[' +\n                        targetCol.querySelectorAll('.' + cls.CARD_CLASS).length + '] ' : '') + this_1.parent.columns[index].headerText;\n                }\n                else {\n                    var value = this_1.parent.dataModule.isRemote() ?\n                        this_1.parent.columnDataCount[this_1.parent.columns[index].keyField]\n                        : this_1.parent.virtualLayoutModule.columnData[this_1.parent.columns[index].keyField].length;\n                    text = (this_1.parent.columns[index].showItemCount ? '[' +\n                        value + '] ' : '') + this_1.parent.columns[index].headerText;\n                }\n                targetCol.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                addClass([targetCol, target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'false');\n                targetCol.setAttribute('aria-expanded', 'false');\n                var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n                collapsedCell.forEach(function (cell) {\n                    var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n                    if (collapasedText && targetCol.getBoundingClientRect().height < (collapasedText.getBoundingClientRect().height + 10)) {\n                        collapasedText.style.height = (targetCol.getBoundingClientRect().height - 4) + 'px';\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _a = 0, targetRow_2 = targetRow; _a < targetRow_2.length; _a++) {\n                var row = targetRow_2[_a];\n                _loop_2(row);\n            }\n            if (this.parent.kanbanData.length === 0 && targetRow.length === 0) {\n                addClass([target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'false');\n            }\n            this.columnToggleArray.push(target.getAttribute('data-key'));\n            this.parent.columns[colIndex].setProperties({ isExpanded: false }, true);\n            target.querySelector('.e-header-icon').setAttribute('aria-label', key + ' Collapse');\n        }\n    };\n    Action.prototype.cardSelection = function (target, isCtrl, isShift) {\n        var _this = this;\n        if (!target) {\n            return;\n        }\n        var cards = this.parent.getSelectedCards();\n        if (this.parent.cardSettings.selectionType !== 'None') {\n            var contentRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n            var index = !isNoU(this.lastSelectionRow) ? this.lastSelectionRow.rowIndex : contentRow.rowIndex;\n            if (index !== contentRow.rowIndex && (isCtrl || isShift) && this.parent.cardSettings.selectionType === 'Multiple') {\n                return;\n            }\n            if (cards.length !== 0 && (!isCtrl || this.parent.cardSettings.selectionType === 'Single')) {\n                removeClass(cards, cls.CARD_SELECTION_CLASS);\n                if (this.parent.enableVirtualization) {\n                    this.parent.virtualLayoutModule.disableAttributeSelection(cards);\n                }\n                else {\n                    this.parent.layoutModule.disableAttributeSelection(cards);\n                }\n                cards.forEach(function (el) {\n                    _this.selectionArray.splice(_this.selectionArray.indexOf(el.getAttribute('data-id')), 1);\n                    _this.selectedCardsElement.splice(_this.selectedCardsElement.indexOf(el), 1);\n                    _this.selectedCardsData.splice(_this.selectedCardsData.indexOf(_this.parent.getCardDetails(el), 1));\n                });\n            }\n            if (cards.length > 0 && isShift && this.parent.cardSettings.selectionType === 'Multiple') {\n                var curCards_1 = [];\n                var start = void 0;\n                var end = void 0;\n                var i = void 0;\n                var allCards = [].slice.call(contentRow.querySelectorAll('.' + cls.CARD_CLASS));\n                allCards.forEach(function (el) { return curCards_1.push(el.getAttribute('data-id')); });\n                var curId = target.getAttribute('data-id');\n                var lastId = this.lastCard.getAttribute('data-id');\n                var curIndex = end = curCards_1.indexOf(curId);\n                var lastIndex = start = curCards_1.indexOf(lastId);\n                var select = curIndex > lastIndex ? 'next' : 'prev';\n                if (select === 'prev') {\n                    start = curIndex;\n                    end = lastIndex;\n                }\n                for (i = start; i <= end; i++) {\n                    var card = allCards[i];\n                    addClass([card], cls.CARD_SELECTION_CLASS);\n                    card.setAttribute('aria-selected', 'true');\n                    card.setAttribute('tabindex', '0');\n                    this.selectionArray.push(card.getAttribute('data-id'));\n                    this.selectedCardsElement.push(card);\n                    this.selectedCardsData.push(this.parent.getCardDetails(card));\n                    this.lastCardSelection = card;\n                    if (select === 'prev') {\n                        this.lastCardSelection = allCards[start];\n                    }\n                }\n            }\n            else {\n                addClass([target], cls.CARD_SELECTION_CLASS);\n                target.setAttribute('aria-selected', 'true');\n                target.setAttribute('tabindex', '0');\n                this.selectionArray.push(target.getAttribute('data-id'));\n                this.selectedCardsElement.push(target);\n                this.selectedCardsData.push(this.parent.getCardDetails(target));\n                this.lastCard = this.lastCardSelection = target;\n                this.lastSelectionRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n                if (this.lastSelectionRow.previousElementSibling) {\n                    var elementSelector = \".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS;\n                    var parentEle = this.lastSelectionRow.previousElementSibling.querySelector(elementSelector);\n                    if (parentEle && parentEle.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n                        this.rowExpandCollapse(parentEle);\n                    }\n                }\n            }\n        }\n    };\n    Action.prototype.addColumn = function (columnOptions, index) {\n        var addColumn = createInstance(Columns, [this.parent, 'columns', columnOptions, true]);\n        this.parent.columns.splice(index, 0, addColumn);\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n    };\n    Action.prototype.deleteColumn = function (index) {\n        var listKey = this.parent.element.querySelectorAll('.' + cls.HEADER_CELLS_CLASS).item(index);\n        if (listKey && listKey.classList.contains(cls.HEADER_ROW_TOGGLE_CLASS)) {\n            this.columnToggleArray.splice(this.columnToggleArray.indexOf(listKey.getAttribute('data-key'), 0));\n        }\n        this.parent.columns.splice(index, 1);\n        if (this.parent.columns.length === 0) {\n            detach(this.parent.element.querySelector('.' + cls.HEADER_CLASS));\n            detach(this.parent.element.querySelector('.' + cls.CONTENT_CLASS));\n        }\n        else {\n            this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        }\n    };\n    Action.prototype.showColumn = function (key) {\n        var index = this.hideColumnKeys.indexOf(key.toString());\n        if (index !== -1) {\n            this.hideColumnKeys.splice(index, 1);\n            this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        }\n    };\n    Action.prototype.hideColumn = function (key) {\n        this.hideColumnKeys.push(key.toString());\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n    };\n    /**\n     * Maintain the single card selection\n     *\n     * @param {Record<string, any>} data - Specifies the selected card data.\n     * @returns {void}\n     * @private\n     * @hidden\n     */\n    Action.prototype.SingleCardSelection = function (data) {\n        if (this.parent.cardSettings.selectionType !== 'None' && data[this.parent.cardSettings.headerField]) {\n            // eslint-disable-next-line no-useless-escape\n            var card = this.parent.element.querySelector('.e-card[data-id=\\\"' +\n                // eslint-disable-next-line no-useless-escape\n                data[this.parent.cardSettings.headerField].toString() + '\"\\]');\n            if (card) {\n                addClass([card], cls.CARD_SELECTION_CLASS);\n                card.setAttribute('aria-selected', 'true');\n                card.setAttribute('tabindex', '0');\n            }\n        }\n    };\n    return Action;\n}());\nexport { Action };\n","import { isNullOrUndefined as isNoU, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban CRUD module\n */\nvar Crud = /** @class */ (function () {\n    /**\n     * Constructor for CRUD module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function Crud(parent) {\n        this.parent = parent;\n    }\n    Crud.prototype.addCard = function (cardData, index) {\n        var _this = this;\n        var args = {\n            cancel: false, requestType: 'cardCreate', addedRecords: (cardData instanceof Array) ? cardData : [cardData],\n            changedRecords: [], deletedRecords: []\n        };\n        this.parent.trigger(events.actionBegin, args, function (addArgs) {\n            if (!addArgs.cancel) {\n                var modifiedData_1 = [];\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') {\n                    if (cardData instanceof Array) {\n                        modifiedData_1 = cardData;\n                    }\n                    else {\n                        modifiedData_1.push(cardData);\n                    }\n                    modifiedData_1.forEach(function (data, index) {\n                        if (!data[_this.parent.sortSettings.field]) {\n                            var columnData = _this.parent.getColumnData(data[_this.parent.keyField]);\n                            if (_this.parent.sortSettings.direction === 'Ascending' && columnData.length > 0) {\n                                data[_this.parent.sortSettings.field] =\n                                    (columnData[columnData.length - 1][_this.parent.sortSettings.field]) + index + 1;\n                            }\n                            else if (_this.parent.sortSettings.direction === 'Descending' && columnData.length > 0) {\n                                data[_this.parent.sortSettings.field] = columnData[0][_this.parent.sortSettings.field] + index + 1;\n                            }\n                            if (columnData.length === 0) {\n                                data[_this.parent.sortSettings.field] = 1;\n                            }\n                        }\n                    });\n                    if (!(cardData instanceof Array)) {\n                        if (!index && _this.parent.sortSettings.direction === 'Descending') {\n                            // eslint-disable-next-line max-len\n                            _this.parent.getColumnData(modifiedData_1[0][_this.parent.keyField]).filter(function (obj, count) {\n                                if (obj[_this.parent.sortSettings.field] === modifiedData_1[0][_this.parent.sortSettings.field]) {\n                                    index = count + 1;\n                                }\n                            });\n                        }\n                    }\n                    if (index !== 0 && !index && _this.parent.sortSettings.direction === 'Descending') {\n                        index = 0;\n                    }\n                    modifiedData_1 = _this.priorityOrder(modifiedData_1, index);\n                }\n                var addedRecords = (cardData instanceof Array) ? cardData : [cardData];\n                var changedRecords = (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') ? modifiedData_1 : [];\n                var editParms = { addedRecords: addedRecords, changedRecords: changedRecords, deletedRecords: [] };\n                var type = (cardData instanceof Array || modifiedData_1.length > 0) ? 'batch' : 'insert';\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardCreated', cardData, index);\n            }\n        });\n    };\n    Crud.prototype.getIndexFromData = function (data) {\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + data[this.parent.cardSettings.headerField] + \"\\\"]\");\n        var element = closest(cardElement, '.' + cls.CONTENT_CELLS_CLASS);\n        var index = [].slice.call(element.querySelectorAll('.' + cls.CARD_CLASS)).indexOf(cardElement);\n        return index;\n    };\n    Crud.prototype.updateCard = function (cardData, index, isDropped, dataDropIndexKeyFieldValue, draggedKey, droppedKey, isMultipleDrag) {\n        var _this = this;\n        var args = {\n            requestType: 'cardChange', cancel: false, addedRecords: [],\n            changedRecords: (cardData instanceof Array) ? cardData : [cardData], deletedRecords: []\n        };\n        index = isNoU(index) ? this.getIndexFromData(args.changedRecords[0]) : index;\n        this.parent.trigger(events.actionBegin, args, function (updateArgs) {\n            if (!updateArgs.cancel) {\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') {\n                    var modifiedData = [];\n                    if (cardData instanceof Array) {\n                        modifiedData = cardData;\n                    }\n                    else {\n                        modifiedData.push(cardData);\n                    }\n                    cardData = _this.priorityOrder(modifiedData, index);\n                }\n                var editParms = {\n                    addedRecords: [], changedRecords: (cardData instanceof Array) ? cardData : [cardData], deletedRecords: []\n                };\n                var type = (cardData instanceof Array) ? 'batch' : 'update';\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardChanged', cardData, index, isDropped, dataDropIndexKeyFieldValue, draggedKey, droppedKey, isMultipleDrag);\n            }\n        });\n    };\n    Crud.prototype.deleteCard = function (cardData) {\n        var _this = this;\n        var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n        if (typeof cardData === 'string' || typeof cardData === 'number') {\n            editParms.deletedRecords = this.parent.kanbanData.filter(function (data) {\n                return data[_this.parent.cardSettings.headerField] === cardData;\n            });\n        }\n        else {\n            editParms.deletedRecords = (cardData instanceof Array) ? cardData : [cardData];\n        }\n        var args = {\n            requestType: 'cardRemove', cancel: false, addedRecords: [], changedRecords: [], deletedRecords: editParms.deletedRecords\n        };\n        this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n            if (!deleteArgs.cancel) {\n                var type = (editParms.deletedRecords.length > 1) ? 'batch' : 'delete';\n                var cardData_1 = editParms.deletedRecords;\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardRemoved', cardData_1[0]);\n            }\n        });\n    };\n    Crud.prototype.priorityOrder = function (cardData, cardIndex) {\n        var _this = this;\n        var cardsId = cardData.map(function (obj) { return obj[_this.parent.cardSettings.headerField]; });\n        var num = cardData[cardData.length - 1][this.parent.sortSettings.field];\n        var allModifiedKeys = cardData.map(function (obj) { return obj[_this.parent.keyField]; });\n        var modifiedKey = allModifiedKeys.filter(function (key, index) { return allModifiedKeys.indexOf(key) === index; }).sort();\n        var columnAllDatas;\n        var finalData = [];\n        var originalIndex = [];\n        var _loop_1 = function (columnKey) {\n            var keyData = cardData.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnKey;\n            });\n            columnAllDatas = this_1.parent.enableVirtualization ? this_1.parent.virtualLayoutModule.getColumnData(columnKey)\n                : this_1.parent.layoutModule.getColumnData(columnKey);\n            for (var _i = 0, _a = keyData; _i < _a.length; _i++) {\n                var data = _a[_i];\n                if (this_1.parent.swimlaneSettings.keyField) {\n                    var swimlaneDatas = this_1.parent.getSwimlaneData(data[this_1.parent.swimlaneSettings.keyField]);\n                    columnAllDatas = this_1.parent.getColumnData(columnKey, swimlaneDatas);\n                }\n            }\n            keyData.forEach(function (key) { return finalData.push(key); });\n            if (!isNoU(cardIndex)) {\n                var _loop_2 = function (j) {\n                    columnAllDatas.filter(function (data, index) {\n                        if (data[_this.parent.cardSettings.headerField] === cardsId[j] && index <= cardIndex) {\n                            originalIndex.push(index);\n                        }\n                    });\n                };\n                for (var j = 0; j < cardsId.length; j++) {\n                    _loop_2(j);\n                }\n                if (originalIndex.length > 0) {\n                    cardIndex = cardIndex + originalIndex.length;\n                }\n                if (this_1.parent.sortSettings.direction === 'Ascending') {\n                    for (var i = cardIndex; i < columnAllDatas.length; i++) {\n                        if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {\n                            columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;\n                            finalData.push(columnAllDatas[i]);\n                        }\n                    }\n                }\n                else {\n                    for (var i = cardIndex - 1; i >= 0; i--) {\n                        if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {\n                            columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;\n                            finalData.push(columnAllDatas[i]);\n                        }\n                    }\n                }\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, modifiedKey_1 = modifiedKey; _i < modifiedKey_1.length; _i++) {\n            var columnKey = modifiedKey_1[_i];\n            _loop_1(columnKey);\n        }\n        return finalData;\n    };\n    return Crud;\n}());\nexport { Crud };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Draggable, formatUnit, createElement, isNullOrUndefined as isNoU, addClass, closest, detach } from '@syncfusion/ej2-base';\nimport { removeClass, classList, remove, EventHandler, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\n/**\n * Drag and Drop module is used to perform card actions.\n */\nvar DragAndDrop = /** @class */ (function () {\n    /**\n     * Constructor for drag and drop module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function DragAndDrop(parent) {\n        this.insertClone = 'afterend';\n        this.parent = parent;\n        this.dragObj = {\n            element: null, cloneElement: null, instance: null, targetClone: null, draggedClone: null, targetCloneMulti: null,\n            selectedCards: [], pageX: 0, pageY: 0, navigationInterval: null, cardDetails: [], modifiedData: []\n        };\n        this.dragEdges = { left: false, right: false, top: false, bottom: false };\n        this.isDragging = false;\n        this.isExternalDrop = false;\n    }\n    DragAndDrop.prototype.wireDragEvents = function (element) {\n        var dragContainment;\n        if (!this.parent.element != null && this.parent.externalDropId.length === 0) {\n            dragContainment = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        }\n        this.dragObj.instance = new Draggable(element, {\n            clone: true,\n            enableTapHold: this.parent.isAdaptive,\n            enableTailMode: true,\n            cursorAt: { top: -10, left: -10 },\n            dragArea: dragContainment,\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this)\n        });\n    };\n    DragAndDrop.prototype.dragHelper = function (e) {\n        if (this.parent.isAdaptive && this.parent.touchModule.mobilePopup &&\n            this.parent.touchModule.mobilePopup.element.classList.contains(cls.POPUP_OPEN_CLASS)) {\n            this.parent.touchModule.mobilePopup.hide();\n        }\n        this.dragObj.element = closest(e.sender.target, '.' + cls.CARD_CLASS);\n        if (isNoU(this.dragObj.element)) {\n            return null;\n        }\n        this.dragObj.element.style.width = formatUnit(this.dragObj.element.offsetWidth);\n        var cloneWrapper = createElement('div', { innerHTML: this.dragObj.element.outerHTML });\n        this.dragObj.cloneElement = cloneWrapper.children.item(0);\n        addClass([this.dragObj.cloneElement], cls.CLONED_CARD_CLASS);\n        this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement);\n        this.dragObj.targetCloneMulti = createElement('div', { className: cls.TARGET_MULTI_CLONE_CLASS });\n        this.dragObj.targetClone = createElement('div', {\n            className: cls.DROPPED_CLONE_CLASS,\n            styles: 'width:100%;height:' + formatUnit(this.dragObj.element.offsetHeight)\n        });\n        this.dragObj.modifiedData = [];\n        return this.dragObj.cloneElement;\n    };\n    DragAndDrop.prototype.dragStart = function (e) {\n        var _this = this;\n        this.dragObj.selectedCards = this.dragObj.element;\n        this.borderElm = this.parent.element.querySelectorAll('.' + cls.BORDER_CLASS);\n        if (this.dragObj.element.classList.contains(cls.CARD_SELECTION_CLASS)) {\n            var className = '.' + cls.CARD_CLASS + '.' + cls.CARD_SELECTION_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')';\n            var closestEle = closest(this.dragObj.element, '.' + cls.CONTENT_ROW_CLASS);\n            this.dragObj.selectedCards = [].slice.call(closestEle.querySelectorAll(className));\n            this.dragObj.selectedCards.forEach(function (element) {\n                _this.dragObj.cardDetails.push(_this.parent.getCardDetails(element));\n            });\n        }\n        else {\n            this.dragObj.cardDetails = [this.parent.getCardDetails(this.dragObj.element)];\n        }\n        if (!isNoU(this.dragObj.selectedCards) && !isNoU(this.dragObj.selectedCards.length) &&\n            this.dragObj.selectedCards.length >= 1) {\n            this.dragObj.selectedCards[0].closest('.e-content-cells').classList.add('e-dragged-column');\n        }\n        else if (!isNoU(this.dragObj.selectedCards) &&\n            !isNoU(this.dragObj.selectedCards.closest('.e-content-cells'))) {\n            this.dragObj.selectedCards.closest('.e-content-cells').classList.add('e-dragged-column');\n        }\n        var dragArgs = { cancel: false, data: this.dragObj.cardDetails, event: e, element: this.dragObj.selectedCards };\n        this.parent.trigger(events.dragStart, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel) {\n                _this.removeElement(_this.dragObj.cloneElement);\n                _this.dragObj.instance.intDestroy(e);\n                _this.dragObj.element = null;\n                _this.dragObj.targetClone = null;\n                _this.dragObj.draggedClone = null;\n                _this.dragObj.cloneElement = null;\n                _this.dragObj.targetCloneMulti = null;\n                return;\n            }\n            if (_this.dragObj.element.classList.contains(cls.CARD_SELECTION_CLASS)) {\n                _this.dragObj.selectedCards.forEach(function (element) { _this.draggedClone(element); });\n                if (_this.dragObj.selectedCards.length > 1) {\n                    _this.dragObj.cloneElement.innerHTML = '';\n                    var drag = createElement('div', {\n                        className: 'e-multi-card-text',\n                        innerHTML: _this.dragObj.selectedCards.length + ' ' + _this.parent.localeObj.getConstant('cards')\n                    });\n                    _this.dragObj.cloneElement.appendChild(drag);\n                    classList(_this.dragObj.cloneElement, ['e-multi-card-clone'], [cls.CARD_SELECTION_CLASS]);\n                    if (_this.parent.enableVirtualization) {\n                        _this.parent.virtualLayoutModule.disableAttributeSelection(_this.dragObj.cloneElement);\n                    }\n                    else {\n                        _this.parent.layoutModule.disableAttributeSelection(_this.dragObj.cloneElement);\n                    }\n                    _this.dragObj.cloneElement.style.width = '90px';\n                }\n            }\n            else {\n                _this.draggedClone(_this.dragObj.element);\n            }\n            EventHandler.add(document.body, 'keydown', _this.keydownHandler, _this);\n            _this.parent.notify(events.contentReady, {});\n        });\n    };\n    DragAndDrop.prototype.draggedClone = function (element) {\n        this.dragObj.draggedClone = createElement('div', {\n            className: cls.DRAGGED_CLONE_CLASS,\n            styles: 'width:' + formatUnit(element.offsetWidth - 1) + ';height:' + formatUnit(element.offsetHeight)\n        });\n        element.insertAdjacentElement('afterend', this.dragObj.draggedClone);\n        addClass([element], cls.DRAGGED_CARD_CLASS);\n    };\n    DragAndDrop.prototype.drag = function (e) {\n        var _this = this;\n        if (!e.target) {\n            return;\n        }\n        var cardElement = closest(e.target, '.' + cls.ROOT_CLASS + ' .' + cls.CARD_CLASS);\n        if (!isNoU(cardElement) && this.parent.enableVirtualization && !isNoU(e.target.previousElementSibling) &&\n            !isNoU(e.target.previousElementSibling.querySelector('.e-target-dropped-clone'))) {\n            cardElement = e.target.previousElementSibling.querySelector('.e-target-dropped-clone').nextElementSibling;\n        }\n        var targetEle = e.target;\n        if (!isNoU(e.target.parentElement)) {\n            if (e.target.nodeName === 'SPAN' && e.target.classList.contains('e-empty-card')) {\n                targetEle = e.target.parentElement;\n            }\n            else if (e.target.nodeName === 'DIV' && e.target.classList.contains('e-kanban-border')) {\n                if (!(this.parent.element.querySelector('.e-target-dropped-clone') === e.target.nextElementSibling.firstChild)) {\n                    targetEle = e.target.parentElement;\n                }\n            }\n        }\n        var target = cardElement || targetEle;\n        var selector = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DROPPABLE_CLASS;\n        var contentCell = closest(target, selector);\n        var cellDimension;\n        var borderElem;\n        var dropElement;\n        if (target.nextElementSibling && target.nextElementSibling.lastChild) {\n            dropElement = target.nextElementSibling.lastChild.previousElementSibling;\n        }\n        this.externalDrop(target);\n        this.kanbanObj = this.parent.isExternalKanbanDrop ? this.parent.externalDropObj : this.parent;\n        this.calculateArgs(e);\n        if (contentCell && document.body.style.cursor !== 'not-allowed') {\n            var targetKey = this.getColumnKey(contentCell);\n            var keys = targetKey.split(',');\n            this.multiCloneRemove();\n            var isDrag = (targetKey === this.getColumnKey(closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS)))\n                ? true : false;\n            if (keys.length === 1 || isDrag) {\n                if (target.classList.contains(cls.DRAGGED_CLONE_CLASS)) {\n                    this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n                }\n                if (target.classList.contains(cls.CARD_CLASS) || this.insertClone === 'beforebegin') {\n                    var element = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ?\n                        (target.previousElementSibling.classList.contains(cls.DRAGGED_CARD_CLASS) ? null : target.previousElementSibling)\n                        : target.previousElementSibling;\n                    this.insertClone = 'afterend';\n                    if (isNoU(element)) {\n                        var pageY = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? (this.dragObj.pageY / 2) :\n                            this.dragObj.pageY;\n                        var height = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? target.offsetHeight :\n                            (target.offsetHeight / 2);\n                        if ((pageY - (this.kanbanObj.element.getBoundingClientRect().top + target.offsetTop)) < height) {\n                            this.insertClone = 'beforebegin';\n                        }\n                    }\n                    if (target.classList.contains(cls.CARD_CLASS)) {\n                        if (this.parent.enableVirtualization) {\n                            this.insertClone = this.isTargetElementVisible(target) ? this.insertClone : 'beforebegin';\n                        }\n                        target.insertAdjacentElement(this.insertClone, this.dragObj.targetClone);\n                    }\n                }\n                else if (target.classList.contains(cls.CONTENT_CELLS_CLASS) && !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)) {\n                    if (target.querySelectorAll('.' + cls.DRAGGED_CARD_CLASS).length !== 0 &&\n                        target.querySelectorAll('.' + cls.CARD_CLASS + ':not(.e-kanban-dragged-card):not(.e-cloned-card)').length === 0) {\n                        return;\n                    }\n                    else {\n                        target.querySelector('.' + cls.CARD_WRAPPER_CLASS).appendChild(this.dragObj.targetClone);\n                    }\n                }\n                else if ((target.classList.contains(cls.CARD_WRAPPER_CLASS) ||\n                    target.classList.contains(cls.CARD_VIRTUAL_WRAPPER_CLASS)) &&\n                    !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)\n                    && contentCell.querySelectorAll('.' + cls.CARD_CLASS).length === 0) {\n                    target.appendChild(this.dragObj.targetClone);\n                }\n                else if (target.classList.contains(cls.BORDER_CLASS) && !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)\n                    && (target.nextElementSibling && target.nextElementSibling.classList.contains(cls.CARD_WRAPPER_CLASS))\n                    && this.dragObj.targetClone && (!dropElement || !dropElement.classList.contains(cls.DROPPED_CLONE_CLASS))) {\n                    if (!this.parent.enableVirtualization && !this.isTargetElementVisible(target.nextElementSibling)) {\n                        target.nextElementSibling.appendChild(this.dragObj.targetClone);\n                    }\n                }\n            }\n            else if (keys.length > 1 && (contentCell.classList.contains(cls.DROPPING_CLASS) ||\n                contentCell.firstChild && contentCell.firstChild.classList.contains(cls.DROPPING_CLASS))) {\n                this.multiCloneCreate(keys, contentCell);\n            }\n            this.kanbanObj.notify(events.contentReady, {});\n        }\n        if (this.kanbanObj.element.querySelectorAll('.' + cls.DROPPING_CLASS).length === 0) {\n            this.cellDropping();\n        }\n        var isCollapsed = false;\n        if (contentCell) {\n            isCollapsed = contentCell.classList.contains(cls.COLLAPSED_CLASS) && contentCell.classList.contains(cls.DROPPING_CLASS);\n            if (contentCell.getAttribute('aria-expanded') === 'true' || !contentCell.parentElement.hasAttribute('aria-expanded')) {\n                cellDimension = contentCell.getBoundingClientRect();\n                this.updateDimension(cellDimension);\n            }\n            borderElem = contentCell.querySelector('.' + cls.BORDER_CLASS);\n        }\n        if (target && target.tagName === 'TABLE' && !isNoU(target.querySelector('.' + cls.CONTENT_ROW_CLASS))) {\n            cellDimension = target.querySelector('.' + cls.CONTENT_ROW_CLASS).getBoundingClientRect();\n            this.updateDimension(cellDimension, target);\n        }\n        if (isCollapsed) {\n            this.toggleVisible(target);\n            addClass([contentCell], cls.TOGGLE_VISIBLE_CLASS);\n        }\n        var tColumn = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.TOGGLE_VISIBLE_CLASS));\n        if (tColumn.length > 0 && !target.classList.contains(cls.TOGGLE_VISIBLE_CLASS)\n            && !closest(target, '.' + cls.TOGGLE_VISIBLE_CLASS)) {\n            this.toggleVisible(target, tColumn.slice(-1)[0]);\n            removeClass(tColumn, cls.TOGGLE_VISIBLE_CLASS);\n        }\n        this.kanbanObj.notify(events.contentReady, {});\n        var multiKeyTarget = closest(target, '.' + cls.MULTI_COLUMN_KEY_CLASS);\n        if (multiKeyTarget) {\n            var columnKeys = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.MULTI_COLUMN_KEY_CLASS + ':not(.' +\n                cls.DISABLED_CLASS + ')')).filter(function (element) { return _this.getColumnKey(element) === _this.getColumnKey(multiKeyTarget); });\n            if (columnKeys.length > 0) {\n                addClass(columnKeys, cls.MULTI_ACTIVE_CLASS);\n                if (columnKeys[0].previousElementSibling) {\n                    addClass([columnKeys[0].previousElementSibling], 'e-multi-bottom-border');\n                }\n            }\n        }\n        document.body.style.cursor = (contentCell && contentCell.classList.contains(cls.DROPPING_CLASS) ||\n            (contentCell && borderElem && borderElem.classList.contains(cls.DROPPING_CLASS))) ? '' : 'not-allowed';\n        if (cardElement && !(closest(cardElement, '.' + cls.CONTENT_CELLS_CLASS)).classList.contains(cls.DROPPING_CLASS) &&\n            !(contentCell && borderElem && borderElem.classList.contains(cls.DROPPING_CLASS))) {\n            cardElement.style.cursor = 'not-allowed';\n            document.body.style.cursor = 'not-allowed';\n        }\n        if (this.isExternalDrop && document.body.style.cursor === 'not-allowed') {\n            document.body.style.cursor = '';\n        }\n        if (document.body.style.cursor === 'not-allowed') {\n            this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n            this.multiCloneRemove();\n        }\n        this.updateScrollPosition();\n        var dragArgs = { data: this.dragObj.cardDetails, event: e, element: this.dragObj.selectedCards };\n        this.kanbanObj.trigger(events.drag, dragArgs);\n        this.parent.isExternalKanbanDrop = false;\n        this.isExternalDrop = false;\n    };\n    DragAndDrop.prototype.removeElement = function (element, kanbanObj) {\n        kanbanObj = kanbanObj ? kanbanObj : this.parent;\n        if (kanbanObj.element.getElementsByClassName(element.className).length > 0) {\n            remove(element);\n        }\n    };\n    DragAndDrop.prototype.isTargetElementVisible = function (targetElem) {\n        var wrapperElem = closest(targetElem, '.' + cls.CARD_WRAPPER_CLASS);\n        if (!isNoU(wrapperElem)) {\n            var wrapperElemBottom = wrapperElem.getBoundingClientRect().bottom;\n            var targetElemBottom = targetElem.getBoundingClientRect().bottom;\n            if (targetElemBottom > wrapperElemBottom) {\n                return false;\n            }\n            return true;\n        }\n        return true;\n    };\n    DragAndDrop.prototype.externalDrop = function (target) {\n        var _this = this;\n        this.parent.externalDropId.forEach(function (externalDropId) {\n            var targetRootElement = closest(target, externalDropId);\n            if (targetRootElement) {\n                if (targetRootElement.classList.contains('e-kanban')) {\n                    _this.parent.externalDropObj = document.querySelector(externalDropId).ej2_instances[0];\n                    _this.parent.isExternalKanbanDrop = true;\n                    var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS +\n                        '):not(.' + cls.COLLAPSED_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n                    var cells = [].slice.call(_this.parent.externalDropObj.element.querySelectorAll(className));\n                    addClass(cells, cls.DROPPING_CLASS);\n                }\n                else {\n                    _this.isExternalDrop = true;\n                }\n            }\n        });\n    };\n    DragAndDrop.prototype.multiCloneCreate = function (keys, contentCell) {\n        var offsetHeight = contentCell.offsetHeight;\n        var limitEle = contentCell.querySelector('.' + cls.LIMITS_CLASS);\n        if (limitEle) {\n            offsetHeight -= limitEle.offsetHeight;\n        }\n        this.dragObj.targetCloneMulti.style.height = formatUnit(offsetHeight);\n        if (contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n            addClass([contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.MULTI_CARD_WRAPPER_CLASS);\n        }\n        addClass([contentCell.querySelector('.' + cls.CARD_WRAPPER_CLASS)], cls.MULTI_CARD_WRAPPER_CLASS);\n        contentCell.querySelector('.' + cls.CARD_WRAPPER_CLASS).style.height = 'auto';\n        contentCell.style.borderStyle = 'none';\n        this.removeElement(this.dragObj.targetClone);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            var dragCell = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n            var transition = this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;\n            var allowTransition = this.allowedTransition(this.dragObj.element.getAttribute('data-key'), key, transition);\n            var name_1 = allowTransition ? '' : ' ' + cls.DISABLED_CLASS;\n            var colKey = createElement('div', {\n                className: cls.MULTI_COLUMN_KEY_CLASS + name_1,\n                attrs: { 'data-key': key.trim() }\n            });\n            var text = createElement('div', { className: 'e-text', innerHTML: key.trim() });\n            contentCell.appendChild(this.dragObj.targetCloneMulti).appendChild(colKey).appendChild(text);\n            colKey.style.cursor = allowTransition ? '' : 'not-allowed';\n            colKey.style.lineHeight = colKey.style.height = formatUnit((offsetHeight / keys.length));\n            text.style.top = formatUnit((offsetHeight / 2) - (text.offsetHeight / 2));\n        }\n    };\n    DragAndDrop.prototype.allowedTransition = function (currentCardKey, targetCardKey, allowedKey) {\n        var allowTransition = true;\n        var targetKey = targetCardKey.split(',');\n        for (var i = 0; i < targetKey.length; i++) {\n            if (currentCardKey === targetKey[i].trim()) {\n                return true;\n            }\n            if (allowedKey) {\n                if (allowedKey.length === 1 && allowedKey[0].length === 0) {\n                    return true;\n                }\n                for (var j = 0; j < allowedKey.length; j++) {\n                    if (targetKey[i].trim() === allowedKey[j].trim()) {\n                        return true;\n                    }\n                    else {\n                        allowTransition = false;\n                    }\n                }\n            }\n        }\n        return allowTransition;\n    };\n    DragAndDrop.prototype.cellDropping = function () {\n        var _this = this;\n        var dragCell = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n        var dragRow = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_ROW_CLASS);\n        if (dragCell && dragCell.classList.contains(cls.DROP_CLASS)) {\n            addClass([dragCell], cls.DROPPING_CLASS);\n        }\n        this.addDropping(dragRow, dragCell);\n        if (this.kanbanObj.swimlaneSettings.keyField && this.kanbanObj.swimlaneSettings.allowDragAndDrop) {\n            var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + '):not(.' + cls.COLLAPSED_CLASS + ')';\n            var rows = [].slice.call(this.kanbanObj.element.querySelectorAll(className));\n            [].slice.call(rows).forEach(function (row) {\n                if (dragRow !== row) {\n                    _this.addDropping(row, dragCell);\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.addDropping = function (dragRow, dragCell) {\n        var _this = this;\n        if (dragCell && this.borderElm && this.borderElm.length !== 0) {\n            if (dragCell.classList.contains(cls.DROPPING_CLASS)) {\n                removeClass([dragCell], cls.DROPPING_CLASS);\n            }\n            var cellDimension = dragCell.getBoundingClientRect();\n            this.updateDimension(cellDimension);\n        }\n        else if (dragCell && dragRow) {\n            [].slice.call(dragRow.children).forEach(function (cell) {\n                var transition = _this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;\n                if (cell !== dragCell && cell.classList.contains(cls.DROP_CLASS) &&\n                    _this.allowedTransition(dragCell.getAttribute('data-key'), cell.getAttribute('data-key'), transition)) {\n                    addClass([cell], cls.DROPPING_CLASS);\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.updateDimension = function (dimensions, target) {\n        [].slice.call(this.borderElm).forEach(function (element) {\n            if (element.parentElement && (element.parentElement.getAttribute('aria-expanded') === 'true' || !element.parentElement.hasAttribute('aria-expanded'))) {\n                addClass([element], cls.DROPPING_CLASS);\n            }\n            var hasAddButton = element.previousElementSibling;\n            element.style.height = parseInt(dimensions.height.toString(), 10) - (hasAddButton &&\n                hasAddButton.classList.contains(cls.SHOW_ADD_BUTTON) ? hasAddButton.offsetHeight + hasAddButton.offsetTop : 0) + 'px';\n            if (!target || target.tagName !== 'TABLE') {\n                element.style.width = parseInt(dimensions.width.toString(), 10) + 'px';\n            }\n            element.style.left = (element.parentElement.getBoundingClientRect().left - closest(element, '.e-kanban').getBoundingClientRect().left) + 'px';\n        });\n    };\n    DragAndDrop.prototype.keydownHandler = function (e) {\n        if (e.code === 'Escape' && this.dragObj.cloneElement) {\n            EventHandler.remove(this.dragObj.cloneElement, 'keydown', this.keydownHandler);\n            this.dragObj.element.removeAttribute('aria-grabbed');\n            this.dragStopClear();\n            this.dragStopPostClear();\n        }\n    };\n    DragAndDrop.prototype.dragStop = function (e) {\n        var _this = this;\n        var contentCell = closest(this.dragObj.targetClone, '.' + cls.CONTENT_CELLS_CLASS);\n        if (this.parent.enableVirtualization && !isNoU(contentCell)) {\n            contentCell.classList.add('e-dropped-column');\n        }\n        var columnKey;\n        var dropIndex;\n        var dataDropIndexKeyfieldValue;\n        var isMultipleDrag;\n        EventHandler.remove(document.body, 'keydown', this.keydownHandler);\n        [].slice.call(this.borderElm).forEach(function (element) {\n            element.classList.remove(cls.DROPPING_CLASS);\n        });\n        if (this.dragObj.targetClone.parentElement) {\n            isMultipleDrag = (this.dragObj.selectedCards && this.dragObj.selectedCards.length > 1\n                && this.parent.sortSettings.sortBy === 'Index');\n            var className = !isMultipleDrag ? '.' + cls.CARD_CLASS + ':not(.' + cls.DRAGGED_CARD_CLASS + ', .' + cls.CLONED_CARD_CLASS + '),.' + cls.DROPPED_CLONE_CLASS :\n                '.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + '),.' + cls.DROPPED_CLONE_CLASS;\n            var element = [].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(className));\n            dropIndex = element.indexOf(this.dragObj.targetClone);\n            if (this.parent.enableVirtualization && !isNoU(this.dragObj.targetClone.nextElementSibling)) {\n                dataDropIndexKeyfieldValue = this.dragObj.targetClone.nextElementSibling.getAttribute('data-id');\n            }\n        }\n        if (!isNoU(this.kanbanObj) && this.kanbanObj.element.querySelector('.' + cls.TARGET_MULTI_CLONE_CLASS)) {\n            columnKey = closest(e.target, '.' + cls.MULTI_COLUMN_KEY_CLASS + ':not(.' + cls.DISABLED_CLASS + ')');\n        }\n        if (contentCell || columnKey) {\n            var cardStatus_1;\n            if (contentCell) {\n                cardStatus_1 = this.getColumnKey(contentCell);\n            }\n            else {\n                cardStatus_1 = this.getColumnKey(columnKey);\n                contentCell = closest(columnKey, '.' + cls.CONTENT_CELLS_CLASS);\n            }\n            if (this.dragObj.selectedCards instanceof HTMLElement) {\n                this.updateDroppedData(this.dragObj.selectedCards, cardStatus_1, contentCell);\n            }\n            else {\n                this.dragObj.selectedCards.forEach(function (element) { _this.updateDroppedData(element, cardStatus_1, contentCell); });\n            }\n            if (this.parent.sortSettings.field && this.parent.sortSettings.sortBy === 'Index') {\n                this.changeOrder(this.dragObj.modifiedData, e.helper);\n            }\n        }\n        if (this.dragObj.modifiedData.length === 0) {\n            this.dragObj.modifiedData = this.dragObj.cardDetails;\n        }\n        var dragArgs = {\n            cancel: false, data: this.dragObj.modifiedData, event: e, element: this.dragObj.selectedCards,\n            dropIndex: dropIndex\n        };\n        this.parent.trigger(events.dragStop, dragArgs, function (dragEventArgs) {\n            _this.dragStopClear();\n            if (!dragEventArgs.cancel) {\n                if (contentCell || columnKey) {\n                    var updateCard = dragEventArgs.data instanceof Array &&\n                        dragEventArgs.data.length > 1 ? dragEventArgs.data :\n                        dragEventArgs.data[0];\n                    var draggedColumnKey = void 0;\n                    var droppedColumnKey = void 0;\n                    if (_this.parent.enableVirtualization) {\n                        draggedColumnKey = contentCell.closest('.e-kanban').querySelector('.e-dragged-column').getAttribute('data-key');\n                        droppedColumnKey = contentCell.getAttribute('data-key');\n                    }\n                    _this.parent.crudModule.updateCard(updateCard, dragEventArgs.dropIndex, true, dataDropIndexKeyfieldValue, draggedColumnKey, droppedColumnKey, isMultipleDrag);\n                    if (_this.parent.enableVirtualization) {\n                        _this.parent.virtualLayoutModule.refreshColumnData(draggedColumnKey, droppedColumnKey);\n                        _this.parent.virtualLayoutModule.ensureColumnNotEmpty(draggedColumnKey);\n                    }\n                }\n            }\n            _this.removeEmptyTrElement();\n            _this.dragStopPostClear();\n        });\n    };\n    DragAndDrop.prototype.removeEmptyTrElement = function () {\n        if (!this.parent.swimlaneSettings.showEmptyRow) {\n            var swimlaneRowList = this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row');\n            for (var j = 0; j < swimlaneRowList.length; j++) {\n                var cardRowData = swimlaneRowList[j].nextElementSibling.querySelectorAll('.e-card-wrapper .e-card');\n                if (!isNoU(swimlaneRowList[j].nextElementSibling) && cardRowData.length === 0) {\n                    detach(swimlaneRowList[j].nextElementSibling);\n                    detach(swimlaneRowList[j]);\n                }\n            }\n        }\n    };\n    DragAndDrop.prototype.dragStopClear = function () {\n        this.removeElement(this.dragObj.draggedClone);\n        this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n        this.removeElement(this.dragObj.cloneElement);\n        var dragMultiClone = [].slice.call(this.parent.element.querySelectorAll('.' + cls.DRAGGED_CLONE_CLASS));\n        dragMultiClone.forEach(function (clone) { remove(clone); });\n        this.dragObj.element.style.removeProperty('width');\n        this.multiCloneRemove();\n        if (this.dragObj.selectedCards instanceof HTMLElement) {\n            removeClass([this.dragObj.selectedCards], cls.DRAGGED_CARD_CLASS);\n        }\n        else {\n            removeClass(this.dragObj.selectedCards, cls.DRAGGED_CARD_CLASS);\n        }\n        clearInterval(this.dragObj.navigationInterval);\n        this.dragObj.navigationInterval = null;\n        if (document.body.style.cursor === 'not-allowed') {\n            document.body.style.cursor = '';\n        }\n        var styleCards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[style]'));\n        styleCards.forEach(function (styleCard) { styleCard.style.cursor = ''; });\n        var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ')';\n        var cells = [].slice.call(this.parent.element.querySelectorAll(className + ' .' + cls.CONTENT_CELLS_CLASS));\n        cells.forEach(function (cell) { return removeClass([cell], cls.DROPPING_CLASS); });\n        if (this.parent.externalDropObj) {\n            var externalCells = [].slice.call(this.parent.externalDropObj.element.querySelectorAll(className + ' .' +\n                cls.CONTENT_CELLS_CLASS));\n            externalCells.forEach(function (externalCell) { return removeClass([externalCell], cls.DROPPING_CLASS); });\n        }\n    };\n    DragAndDrop.prototype.dragStopPostClear = function () {\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.tabHold = false;\n        }\n        if (this.parent.element.querySelector('.e-dragged-column')) {\n            this.parent.element.querySelector('.e-dragged-column').classList.remove('e-dragged-column');\n        }\n        if (this.parent.element.querySelector('.e-dropped-column')) {\n            this.parent.element.querySelector('.e-dropped-column').classList.remove('e-dropped-column');\n        }\n        this.dragObj.cardDetails = this.dragObj.modifiedData = [];\n        this.isDragging = false;\n        this.parent.isExternalKanbanDrop = false;\n        this.parent.externalDropObj = null;\n    };\n    DragAndDrop.prototype.updateDroppedData = function (element, cardStatus, contentCell) {\n        var crudObj = this.parent.getCardDetails(element);\n        var crudData = extend({}, crudObj, null, true);\n        if (cardStatus.split(',').length === 1) {\n            crudData[this.parent.keyField] = cardStatus;\n        }\n        if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneSettings.allowDragAndDrop) {\n            var prev = closest(contentCell, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling;\n            if (this.parent.isAdaptive) {\n                var keyField = this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;\n                crudData[this.parent.swimlaneSettings.keyField] = keyField;\n            }\n            else {\n                crudData[this.parent.swimlaneSettings.keyField] = this.getColumnKey(prev);\n            }\n        }\n        this.dragObj.modifiedData.push(crudData);\n    };\n    DragAndDrop.prototype.changeOrder = function (modifieddata, draggedCard) {\n        var _this = this;\n        var prevele = false;\n        var element;\n        if (this.kanbanObj.sortSettings.direction === 'Ascending') {\n            element = (draggedCard === this.dragObj.targetClone.previousElementSibling) &&\n                (this.dragObj.targetClone.previousElementSibling &&\n                    this.dragObj.targetClone.previousElementSibling.previousElementSibling) ?\n                this.dragObj.targetClone.previousElementSibling.previousElementSibling : this.dragObj.targetClone.previousElementSibling;\n        }\n        else {\n            element = this.dragObj.targetClone.nextElementSibling;\n        }\n        if (element && !element.classList.contains(cls.DRAGGED_CARD_CLASS) && !element.classList.contains(cls.CLONED_CARD_CLASS)\n            && !element.classList.contains(cls.DRAGGED_CLONE_CLASS)) {\n            prevele = true;\n        }\n        else if (this.dragObj.targetClone.nextElementSibling && this.kanbanObj.sortSettings.direction === 'Ascending') {\n            element = this.dragObj.targetClone.nextElementSibling;\n        }\n        else if (this.dragObj.targetClone.previousElementSibling && this.kanbanObj.sortSettings.direction === 'Descending') {\n            element = this.dragObj.targetClone.previousElementSibling;\n        }\n        else {\n            return;\n        }\n        if (element.classList.contains(cls.CARD_CLASS)) {\n            var obj = this.kanbanObj.getCardDetails(element);\n            var keyIndex_1 = obj[this.kanbanObj.sortSettings.field];\n            if (modifieddata.length > 1 && this.kanbanObj.sortSettings.direction === 'Descending') {\n                modifieddata = modifieddata.reverse();\n            }\n            modifieddata.forEach(function (data, index) {\n                if (prevele) {\n                    data[_this.kanbanObj.sortSettings.field] = ++keyIndex_1;\n                }\n                else if (keyIndex_1 !== 1 && index <= data[_this.kanbanObj.sortSettings.field]) {\n                    data[_this.kanbanObj.sortSettings.field] = --keyIndex_1;\n                }\n                else if (keyIndex_1 === 1) {\n                    data[_this.kanbanObj.sortSettings.field] = index + 1;\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.toggleVisible = function (target, tColumn) {\n        var _this = this;\n        var headerCells = '.' + cls.HEADER_CELLS_CLASS + ':not(.' + cls.STACKED_HEADER_CELL_CLASS + ')';\n        var lists = [].slice.call(this.kanbanObj.element.querySelectorAll(headerCells));\n        lists.forEach(function (list) {\n            if (_this.getColumnKey(list) === _this.getColumnKey(tColumn || target)) {\n                _this.kanbanObj.actionModule.columnToggle(list);\n            }\n        });\n        var cloneTarget = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n        if (cloneTarget) {\n            var width = formatUnit(cloneTarget.offsetWidth - events.cardSpace);\n            this.dragObj.draggedClone.style.width = width;\n            this.dragObj.cloneElement.style.width = width;\n        }\n    };\n    DragAndDrop.prototype.multiCloneRemove = function () {\n        var cloneMulti = !isNoU(this.kanbanObj) ? [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.TARGET_MULTI_CLONE_CLASS)) : [];\n        if (cloneMulti.length > 0) {\n            var columnKey = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.MULTI_COLUMN_KEY_CLASS));\n            columnKey.forEach(function (node) { return remove(node); });\n            cloneMulti.forEach(function (node) {\n                var cell = closest(node, '.' + cls.CONTENT_CELLS_CLASS);\n                if (cell) {\n                    cell.style.borderStyle = '';\n                    if (cell.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n                        removeClass([cell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.MULTI_CARD_WRAPPER_CLASS);\n                    }\n                    removeClass([cell.querySelector('.' + cls.CARD_WRAPPER_CLASS)], cls.MULTI_CARD_WRAPPER_CLASS);\n                }\n            });\n            this.removeElement(this.dragObj.targetCloneMulti, this.kanbanObj);\n        }\n    };\n    DragAndDrop.prototype.calculateArgs = function (e) {\n        var eventArgs = this.getPageCoordinates(e);\n        this.dragObj.pageY = eventArgs.pageY;\n        this.dragObj.pageX = eventArgs.pageX;\n        this.isDragging = true;\n        if (this.kanbanObj.isAdaptive && this.kanbanObj.tooltipModule) {\n            this.kanbanObj.tooltipModule.tooltipObj.close();\n        }\n    };\n    DragAndDrop.prototype.getPageCoordinates = function (e) {\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    DragAndDrop.prototype.getColumnKey = function (target) {\n        if (target && target.getAttribute('data-key')) {\n            return target.getAttribute('data-key').trim();\n        }\n        return '';\n    };\n    DragAndDrop.prototype.updateScrollPosition = function () {\n        var _this = this;\n        if (isNoU(this.dragObj.navigationInterval)) {\n            this.dragObj.navigationInterval = window.setInterval(function () { _this.autoScroll(); }, 100);\n        }\n    };\n    DragAndDrop.prototype.autoScrollValidation = function () {\n        var pageY = this.dragObj.pageY;\n        var pageX = this.dragObj.pageX;\n        var autoScrollDistance = 30;\n        var dragEdges = { left: false, right: false, top: false, bottom: false };\n        var viewBoundaries = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS).getBoundingClientRect();\n        if ((pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset) &&\n            (pageY > viewBoundaries.top + window.pageYOffset)) {\n            dragEdges.top = true;\n        }\n        if ((pageY > (viewBoundaries.bottom - autoScrollDistance) + window.pageYOffset) &&\n            (pageY < viewBoundaries.bottom + window.pageYOffset)) {\n            dragEdges.bottom = true;\n        }\n        if ((pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset) &&\n            (pageX > viewBoundaries.left + window.pageXOffset)) {\n            dragEdges.left = true;\n        }\n        if ((pageX > (viewBoundaries.right - autoScrollDistance) + window.pageXOffset) &&\n            (pageX < viewBoundaries.right + window.pageXOffset)) {\n            dragEdges.right = true;\n        }\n        this.dragEdges = dragEdges;\n    };\n    DragAndDrop.prototype.autoScroll = function () {\n        this.autoScrollValidation();\n        var scrollSensitivity = 30;\n        if (this.kanbanObj.isAdaptive) {\n            var parent_1;\n            if (this.dragEdges.top || this.dragEdges.bottom) {\n                if (this.dragObj.targetClone) {\n                    parent_1 = closest(this.dragObj.targetClone, '.' + cls.CARD_WRAPPER_CLASS);\n                }\n                else {\n                    parent_1 = closest(this.dragObj.draggedClone, '.' + cls.CARD_WRAPPER_CLASS);\n                }\n            }\n            else if (this.dragEdges.right || this.dragEdges.left) {\n                parent_1 = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS);\n            }\n            if (parent_1) {\n                var yIsScrollable = parent_1.offsetHeight <= parent_1.scrollHeight;\n                var xIsScrollable = parent_1.offsetWidth <= parent_1.scrollWidth;\n                var yInBounds = parent_1.scrollTop >= 0 && parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n                var xInBounds = parent_1.scrollLeft >= 0 && parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n                if (yIsScrollable && yInBounds && (this.dragEdges.top || this.dragEdges.bottom)) {\n                    parent_1.scrollTop += this.dragEdges.top ? -(scrollSensitivity + 36) : scrollSensitivity;\n                }\n                if (xIsScrollable && xInBounds && (this.dragEdges.left || this.dragEdges.right)) {\n                    var width = this.parent.enableVirtualization ? this.kanbanObj.virtualLayoutModule.getWidth() :\n                        this.kanbanObj.layoutModule.getWidth();\n                    var scroll_1 = (width * (this.kanbanObj.columns.length - 1)) >\n                        parent_1.scrollLeft;\n                    if (scroll_1 || this.dragEdges.left) {\n                        parent_1.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                    }\n                }\n            }\n        }\n        else {\n            var parent_2 = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS);\n            var column = this.dragObj.targetClone.parentElement;\n            var yScrollable = parent_2.offsetHeight <= parent_2.scrollHeight;\n            var xScrollable = parent_2.offsetWidth <= parent_2.scrollWidth;\n            var yBounds = yScrollable && parent_2.scrollTop >= 0 && parent_2.scrollTop + parent_2.offsetHeight <= parent_2.scrollHeight;\n            var xBounds = xScrollable && parent_2.scrollLeft >= 0 && parent_2.scrollLeft + parent_2.offsetWidth <= parent_2.scrollWidth;\n            if (yBounds && (this.dragEdges.top || this.dragEdges.bottom)) {\n                parent_2.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;\n                if (this.parent.swimlaneSettings.enableFrozenRows) {\n                    this.dragObj.cloneElement.style.top = !this.dragEdges.top ? (parseInt(this.dragObj.cloneElement.style.top, 10) + scrollSensitivity) + 'px' : (parseInt(this.dragObj.cloneElement.style.top, 10) - scrollSensitivity) + 'px';\n                }\n                if (column) {\n                    column.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;\n                }\n            }\n            if (xBounds && (this.dragEdges.left || this.dragEdges.right)) {\n                parent_2.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                if (column) {\n                    column.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                }\n            }\n            if (this.dragObj.pageY - window.scrollY < scrollSensitivity) {\n                window.scrollTo(window.scrollX, window.scrollY - scrollSensitivity);\n            }\n            else if (window.innerHeight - (this.dragObj.pageY - window.scrollY) < scrollSensitivity) {\n                window.scrollTo(window.scrollX, window.scrollY + scrollSensitivity);\n            }\n        }\n    };\n    DragAndDrop.prototype.unWireDragEvents = function (element) {\n        if (!isNoU(element) && !isNoU(element.ej2_instances[0])) {\n            var dragInstance = element.ej2_instances[0];\n            if (dragInstance && !dragInstance.isDestroyed) {\n                dragInstance.destroy();\n            }\n        }\n    };\n    return DragAndDrop;\n}());\nexport { DragAndDrop };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, remove, isNullOrUndefined, closest, extend, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { FormValidator, NumericTextBox, TextBox } from '@syncfusion/ej2-inputs';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Dialog module is used to perform card actions.\n */\nvar KanbanDialog = /** @class */ (function () {\n    /**\n     * Constructor for dialog module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function KanbanDialog(parent) {\n        this.preventUpdate = false;\n        this.parent = parent;\n    }\n    KanbanDialog.prototype.openDialog = function (action, data) {\n        this.action = action;\n        this.parent.activeCardData.data = data;\n        this.renderDialog(data, action);\n        this.dialogObj.show();\n    };\n    KanbanDialog.prototype.closeDialog = function () {\n        this.dialogObj.hide();\n    };\n    KanbanDialog.prototype.renderDialog = function (args, action) {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        var dialogModel = {\n            buttons: this.getDialogButtons(action),\n            content: this.getDialogContent(args, action),\n            cssClass: cls.DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            header: this.parent.localeObj.getConstant(action === 'Add' ? 'addTitle' : action === 'Edit' ? 'editTitle' : 'deleteTitle'),\n            height: 'auto',\n            isModal: true,\n            showCloseIcon: true,\n            width: (action === 'Delete') ? 400 : 350,\n            visible: false,\n            beforeOpen: this.onBeforeDialogOpen.bind(this),\n            beforeClose: this.onBeforeDialogClose.bind(this)\n        };\n        this.dialogObj = new Dialog(extend(dialogModel, action !== 'Delete' ? (this.parent.dialogSettings.model || {}) : {}), this.element);\n        if (action !== 'Delete') {\n            this.applyFormValidation();\n        }\n        this.dialogObj.element.querySelector('.e-dlg-closeicon-btn').title = this.parent.localeObj.getConstant('close');\n    };\n    KanbanDialog.prototype.getDialogContent = function (args, action) {\n        if (action === 'Delete') {\n            return this.parent.localeObj.getConstant('deleteContent');\n        }\n        else {\n            var container = createElement('div', { className: cls.FORM_WRAPPER_CLASS });\n            var form = createElement('form', {\n                id: this.parent.element.id + 'EditForm',\n                className: cls.FORM_CLASS, attrs: { onsubmit: 'return false;' }\n            });\n            if (this.parent.dialogSettings.template) {\n                if (args) {\n                    this.destroyComponents();\n                    [].slice.call(form.childNodes).forEach(function (node) { return remove(node); });\n                }\n                var templateId = this.parent.element.id + '_dialogTemplate';\n                var dialogTemplate = this.parent.templateParser(this.parent.dialogSettings.template)(args, this.parent, 'dialogTemplate', templateId, false);\n                append(dialogTemplate, form);\n                this.parent.renderTemplates();\n            }\n            else {\n                var dialogWrapper = createElement('div', { className: cls.DIALOG_CONTENT_CONTAINER });\n                form.appendChild(dialogWrapper);\n                var table = createElement('table');\n                dialogWrapper.appendChild(table);\n                var dialogFields = this.getDialogFields();\n                for (var _i = 0, dialogFields_1 = dialogFields; _i < dialogFields_1.length; _i++) {\n                    var field = dialogFields_1[_i];\n                    var tr = createElement('tr');\n                    table.appendChild(tr);\n                    tr.appendChild(createElement('td', { className: 'e-label', innerHTML: field.text ? field.text : field.key }));\n                    var td = createElement('td');\n                    tr.appendChild(td);\n                    td.appendChild(this.renderComponents(field));\n                }\n            }\n            container.appendChild(form);\n            return container;\n        }\n    };\n    KanbanDialog.prototype.getDialogFields = function () {\n        var fields = this.parent.dialogSettings.fields;\n        if (fields.length === 0) {\n            fields = [\n                { text: 'ID', key: this.parent.cardSettings.headerField, type: 'TextBox' },\n                { key: this.parent.keyField, type: 'DropDown' },\n                { key: this.parent.cardSettings.contentField, type: 'TextArea' }\n            ];\n            if (this.parent.sortSettings.field) {\n                fields.splice(fields.length - 1, 0, { key: this.parent.sortSettings.field, type: 'TextBox' });\n            }\n            if (this.parent.swimlaneSettings.keyField) {\n                fields.splice(fields.length - 1, 0, { key: this.parent.swimlaneSettings.keyField, type: 'DropDown' });\n            }\n        }\n        return fields;\n    };\n    KanbanDialog.prototype.getDialogButtons = function (action) {\n        var primaryButtonClass = action === 'Delete' ? 'e-dialog-yes' : action === 'Add' ? 'e-dialog-add' : 'e-dialog-edit';\n        var flatButtonClass = action === 'Delete' ? 'e-dialog-no' : 'e-dialog-cancel';\n        var dialogButtons = [\n            {\n                buttonModel: {\n                    cssClass: 'e-flat ' + primaryButtonClass, isPrimary: true,\n                    content: this.parent.localeObj.getConstant(action === 'Add' || action === 'Edit' ? 'save' : 'yes')\n                },\n                click: this.dialogButtonClick.bind(this)\n            }, {\n                buttonModel: {\n                    cssClass: 'e-flat ' + flatButtonClass, isPrimary: false,\n                    content: this.parent.localeObj.getConstant(action === 'Add' || action === 'Edit' ? 'cancel' : 'no')\n                },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (action === 'Edit') {\n            var deleteButton = {\n                buttonModel: { cssClass: 'e-flat e-dialog-delete', isPrimary: false, content: this.parent.localeObj.getConstant('delete') },\n                click: this.dialogButtonClick.bind(this)\n            };\n            dialogButtons.splice(0, 0, deleteButton);\n        }\n        return dialogButtons;\n    };\n    KanbanDialog.prototype.renderComponents = function (field) {\n        var wrapper = createElement('div', { className: field.key + '_wrapper' });\n        var element = createElement('input', { className: cls.FIELD_CLASS, attrs: { 'name': field.key } });\n        wrapper.appendChild(element);\n        var divElement;\n        var dropDownOptions;\n        var controlObj;\n        var fieldValue = this.parent.activeCardData.data ?\n            this.parent.activeCardData.data[field.key] : null;\n        switch (field.type) {\n            case 'DropDown':\n                if (field.key === this.parent.keyField) {\n                    var currentKeys = this.parent.enableVirtualization ?\n                        this.parent.virtualLayoutModule.columnKeys : this.parent.layoutModule.columnKeys;\n                    if (this.parent.actionModule.hideColumnKeys.length > 0) {\n                        currentKeys = [];\n                        for (var i = 0; i < this.parent.columns.length; i++) {\n                            var isColumnVisible = this.parent.enableVirtualization ?\n                                this.parent.virtualLayoutModule.isColumnVisible(this.parent.columns[i]) :\n                                this.parent.layoutModule.isColumnVisible(this.parent.columns[i]);\n                            if (isColumnVisible) {\n                                var isNumeric = typeof this.parent.columns[i].keyField === 'number';\n                                if (isNumeric) {\n                                    currentKeys = currentKeys.concat(this.parent.columns[i].keyField.toString());\n                                }\n                                else {\n                                    currentKeys = currentKeys.concat(this.parent.columns[i].keyField.split(',').map(function (e) { return e.trim(); }));\n                                }\n                            }\n                        }\n                    }\n                    dropDownOptions = { dataSource: currentKeys, value: fieldValue ? fieldValue.toString() : fieldValue };\n                }\n                else if (field.key === this.parent.swimlaneSettings.keyField) {\n                    dropDownOptions = {\n                        dataSource: [].slice.call(this.parent.enableVirtualization ? this.parent.virtualLayoutModule.kanbanRows :\n                            this.parent.layoutModule.kanbanRows),\n                        fields: { text: 'textField', value: 'keyField' }, value: fieldValue\n                    };\n                }\n                controlObj = new DropDownList(dropDownOptions);\n                break;\n            case 'Numeric':\n                controlObj = new NumericTextBox({ value: fieldValue });\n                break;\n            case 'TextBox':\n                controlObj = new TextBox({ value: fieldValue });\n                if (fieldValue && this.parent.cardSettings.headerField === field.key) {\n                    controlObj.enabled = false;\n                }\n                break;\n            case 'TextArea':\n                remove(element);\n                divElement = createElement('div');\n                element = createElement('textarea', {\n                    className: cls.FIELD_CLASS, attrs: { 'name': field.key, 'rows': '3', 'aria-label': this.parent.cardSettings.contentField },\n                    innerHTML: fieldValue\n                });\n                wrapper.appendChild(divElement).appendChild(element);\n                break;\n            default:\n                break;\n        }\n        if (controlObj) {\n            controlObj.appendTo(element);\n        }\n        return wrapper;\n    };\n    KanbanDialog.prototype.onBeforeDialogOpen = function (args) {\n        var _this = this;\n        var eventProp = {\n            data: this.parent.activeCardData.data,\n            cancel: false, element: this.element,\n            target: this.parent.activeCardData.element,\n            requestType: this.action\n        };\n        this.storeElement = document.activeElement;\n        if (parseInt(args.maxHeight, 10) <= 250) {\n            args.maxHeight = '250px';\n        }\n        this.parent.trigger(events.dialogOpen, eventProp, function (openArgs) {\n            args.cancel = openArgs.cancel;\n            if (openArgs.cancel) {\n                _this.destroy();\n            }\n        });\n    };\n    KanbanDialog.prototype.onBeforeDialogClose = function (args) {\n        var _this = this;\n        var formInputs = this.getFormElements();\n        var cardObj = {};\n        if (args.isInteracted) {\n            /* close icon preventing data update */\n            this.preventUpdate = true;\n        }\n        if (!this.preventUpdate) {\n            for (var _i = 0, formInputs_1 = formInputs; _i < formInputs_1.length; _i++) {\n                var input = formInputs_1[_i];\n                var columnName = input.name || this.getColumnName(input);\n                if (!isNullOrUndefined(columnName) && columnName !== '') {\n                    var value = this.getValueFromElement(input);\n                    if (columnName === this.parent.cardSettings.headerField) {\n                        value = this.getIDType() === 'string' ? value : parseInt(value, 10);\n                    }\n                    cardObj[columnName] = value;\n                }\n            }\n        }\n        this.preventUpdate = false;\n        cardObj = extend(this.parent.activeCardData.data, cardObj);\n        var eventProp = { data: cardObj, cancel: false, element: this.element, requestType: this.action };\n        this.parent.trigger(events.dialogClose, eventProp, function (closeArgs) {\n            args.cancel = closeArgs.cancel;\n            if (!closeArgs.cancel) {\n                _this.cardData = eventProp.data;\n                _this.destroy();\n                _this.parent.actionModule.SingleCardSelection(_this.cardData);\n            }\n        });\n    };\n    KanbanDialog.prototype.getIDType = function () {\n        if (this.parent.kanbanData.length !== 0) {\n            return typeof (this.parent.kanbanData[0][this.parent.cardSettings.headerField]);\n        }\n        return 'string';\n    };\n    KanbanDialog.prototype.applyFormValidation = function () {\n        var _this = this;\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        for (var _i = 0, _a = this.parent.dialogSettings.fields; _i < _a.length; _i++) {\n            var field = _a[_i];\n            rules[field.key] = (field.validationRules && Object.keys(field.validationRules).length > 0) ? field.validationRules : null;\n        }\n        this.formObj = new FormValidator(form, {\n            rules: rules,\n            customPlacement: function (inputElement, error) {\n                var id = error.getAttribute('for');\n                var elem = _this.element.querySelector('#' + id + '_Error');\n                if (!elem) {\n                    _this.createTooltip(inputElement, error, id, '');\n                }\n            },\n            validationComplete: function (args) {\n                var elem = _this.element.querySelector('#' + args.inputName + '_Error');\n                if (elem) {\n                    elem.style.display = (args.status === 'failure') ? '' : 'none';\n                }\n            }\n        });\n    };\n    KanbanDialog.prototype.createTooltip = function (element, error, name, display) {\n        var dlgContent;\n        var client;\n        var inputClient = element.parentElement.getBoundingClientRect();\n        if (this.element.classList.contains(cls.DIALOG_CLASS)) {\n            dlgContent = this.element;\n            client = this.element.getBoundingClientRect();\n        }\n        else {\n            dlgContent = this.element.querySelector('.e-kanban-dialog .e-dlg-content');\n            client = dlgContent.getBoundingClientRect();\n        }\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup ' + cls.ERROR_VALIDATION_CLASS,\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        dlgContent.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    };\n    KanbanDialog.prototype.destroyToolTip = function () {\n        if (this.element) {\n            this.element.querySelectorAll('.' + cls.ERROR_VALIDATION_CLASS).forEach(function (node) { return remove(node); });\n        }\n        if (this.formObj && this.formObj.element) {\n            this.formObj.reset();\n        }\n    };\n    KanbanDialog.prototype.dialogButtonClick = function (event) {\n        var target = event.target.cloneNode(true);\n        if (!isNullOrUndefined(event.keyCode) && event.keyCode === 13) {\n            var valTrg = this.dialogObj.element.querySelector('.e-footer-content button.e-primary');\n            target = valTrg.cloneNode(true);\n        }\n        var id = this.formObj.element.id;\n        if (document.getElementById(id) && this.formObj.validate() &&\n            (target.classList.contains('e-dialog-edit') || target.classList.contains('e-dialog-add'))) {\n            this.dialogObj.hide();\n            if (!isNullOrUndefined(this.cardData)) {\n                if (target.classList.contains('e-dialog-edit')) {\n                    var activeCard = this.parent.activeCardData;\n                    var updateIndex = void 0;\n                    if (activeCard.data[this.parent.keyField] === this.cardData[this.parent.keyField]\n                        && activeCard.element) {\n                        updateIndex = [].slice.call(activeCard.element.parentElement.children).indexOf(activeCard.element);\n                    }\n                    if (this.parent.enableHtmlSanitizer) {\n                        if (typeof this.cardData[this.parent.cardSettings.contentField] === 'string') {\n                            this.cardData[this.parent.cardSettings.contentField] =\n                                SanitizeHtmlHelper.sanitize(this.cardData[this.parent.cardSettings.contentField]);\n                        }\n                    }\n                    this.parent.crudModule.updateCard(this.cardData, updateIndex);\n                }\n                if (target.classList.contains('e-dialog-add')) {\n                    this.parent.crudModule.addCard(this.cardData);\n                }\n                this.parent.actionModule.SingleCardSelection(this.cardData);\n                this.cardData = null;\n            }\n        }\n        if (!target.classList.contains('e-dialog-edit') && !target.classList.contains('e-dialog-add')) {\n            if (target.classList.contains('e-dialog-cancel')) {\n                this.preventUpdate = true;\n            }\n            this.dialogObj.hide();\n            if (target.classList.contains('e-dialog-yes')) {\n                this.parent.crudModule.deleteCard(this.parent.activeCardData.data);\n            }\n            else if (target.classList.contains('e-dialog-no')) {\n                this.openDialog('Edit', this.parent.activeCardData.data);\n            }\n            else if (target.classList.contains('e-dialog-delete')) {\n                this.openDialog('Delete', this.parent.activeCardData.data);\n            }\n        }\n    };\n    KanbanDialog.prototype.getFormElements = function () {\n        var elements = [].slice.call(this.element.querySelectorAll('.' + cls.FIELD_CLASS));\n        var validElements = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var element = elements_1[_i];\n            if (element.classList.contains('e-control')) {\n                validElements.push(element);\n            }\n            else if (element.querySelector('.e-control')) {\n                validElements.push(element.querySelector('.e-control'));\n            }\n            else {\n                validElements.push(element);\n            }\n        }\n        return validElements;\n    };\n    KanbanDialog.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist') || element.classList.contains('e-multiselect')) {\n                fieldSelector = element.classList.contains('e-dropdownlist') ? 'e-ddl' : 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                fieldSelector = 'e-numeric';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    KanbanDialog.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = element.value;\n            }\n        }\n        return value;\n    };\n    KanbanDialog.prototype.destroyComponents = function () {\n        var formelement = this.getFormElements();\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var element = formelement_1[_i];\n            var instance = element.ej2_instances;\n            if (instance && instance.length > 0) {\n                instance.forEach(function (node) { return node.destroy(); });\n            }\n            if (this.parent.isReact && this.formObj) {\n                this.formObj.element.remove();\n            }\n        }\n    };\n    KanbanDialog.prototype.destroy = function () {\n        this.destroyToolTip();\n        this.destroyComponents();\n        if (this.dialogObj) {\n            this.dialogObj.destroy();\n            this.storeElement.focus();\n            this.dialogObj = null;\n            remove(this.element);\n            this.element = null;\n        }\n    };\n    return KanbanDialog;\n}());\nexport { KanbanDialog };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { KeyboardEvents, addClass, removeClass, closest } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban keyboard module\n */\nvar Keyboard = /** @class */ (function () {\n    /**\n     * Constructor for keyboard module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function Keyboard(parent) {\n        this.keyConfigs = {\n            firstCardSelection: '36',\n            lastCardSelection: '35',\n            upArrow: '38',\n            downArrow: '40',\n            rightArrow: '39',\n            leftArrow: '37',\n            multiSelectionEnter: 'ctrl+13',\n            multiSelectionSpace: 'ctrl+32',\n            multiSelectionByUpArrow: 'shift+38',\n            multiSelectionByDownArrow: 'shift+40',\n            shiftTab: 'shift+tab',\n            enter: '13',\n            tab: 'tab',\n            delete: '46',\n            escape: '27',\n            space: '32'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.multiSelection = false;\n    }\n    Keyboard.prototype.keyActionHandler = function (e) {\n        var _this = this;\n        var selectedCard = this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS).item(0);\n        if (!selectedCard && !closest(document.activeElement, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var contentCell;\n        var selectedCards;\n        var selectedCardsData = [];\n        switch (e.action) {\n            case 'upArrow':\n            case 'downArrow':\n            case 'multiSelectionByUpArrow':\n            case 'multiSelectionByDownArrow':\n                e.preventDefault();\n                this.processUpDownArrow(e.action, selectedCard);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.processLeftRightArrow(e);\n                break;\n            case 'firstCardSelection':\n            case 'lastCardSelection':\n                this.processCardSelection(e.action, selectedCard);\n                break;\n            case 'multiSelectionEnter':\n            case 'multiSelectionSpace':\n                if (document.activeElement) {\n                    this.parent.actionModule.cardSelection(document.activeElement, true, false);\n                }\n                break;\n            case 'space':\n            case 'enter':\n                this.processEnter(e, selectedCard);\n                break;\n            case 'escape':\n                if (document.activeElement.classList.contains(cls.CARD_CLASS) ||\n                    document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                    if (document.activeElement.classList.contains(cls.CARD_SELECTION_CLASS)) {\n                        removeClass([document.activeElement], cls.CARD_SELECTION_CLASS);\n                        document.activeElement.focus();\n                    }\n                    else {\n                        var ele = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                        var cards = [].slice.call(ele.querySelectorAll('.' + cls.CARD_CLASS));\n                        removeClass(cards, cls.CARD_SELECTION_CLASS);\n                        ele.focus();\n                        this.cardTabIndexRemove();\n                        this.addRemoveTabIndex('Add');\n                    }\n                }\n                break;\n            case 'tab':\n            case 'shiftTab':\n                contentCell = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                if (document.activeElement.classList.contains(cls.CARD_CLASS)) {\n                    if (!document.activeElement.nextElementSibling && e.action === 'tab') {\n                        e.preventDefault();\n                    }\n                    if (!document.activeElement.previousElementSibling && contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)\n                        && e.action === 'tab') {\n                        addClass([contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.SHOW_ADD_FOCUS);\n                    }\n                }\n                if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                    if ((!contentCell.querySelector('.' + cls.CARD_CLASS) && e.action === 'tab') || e.action === 'shiftTab') {\n                        e.preventDefault();\n                    }\n                }\n                if (document.activeElement.classList.contains(cls.ROOT_CLASS)) {\n                    this.cardTabIndexRemove();\n                    this.parent.keyboardModule.addRemoveTabIndex('Add');\n                }\n                break;\n            case 'delete':\n                selectedCards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n                selectedCards.forEach(function (selected) { selectedCardsData.push(_this.parent.getCardDetails(selected)); });\n                this.parent.crudModule.deleteCard(selectedCardsData);\n                break;\n        }\n    };\n    Keyboard.prototype.processCardSelection = function (action, selectedCard) {\n        if (selectedCard) {\n            removeClass([selectedCard], cls.CARD_SELECTION_CLASS);\n            if (this.parent.enableVirtualization) {\n                this.parent.virtualLayoutModule.disableAttributeSelection(selectedCard);\n            }\n            else {\n                this.parent.layoutModule.disableAttributeSelection(selectedCard);\n            }\n            var selection = this.parent.actionModule.selectionArray;\n            selection.splice(selection.indexOf(selectedCard.getAttribute('data-id')), 1);\n        }\n        this.cardTabIndexRemove();\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS));\n        var element = action === 'firstCardSelection' ? cards[0] : cards[cards.length - 1];\n        this.parent.actionModule.cardSelection(element, false, false);\n        this.addRemoveTabIndex('Remove');\n        element.focus();\n        var card = [].slice.call(closest(element, '.' + cls.CONTENT_CELLS_CLASS).querySelectorAll('.' + cls.CARD_CLASS));\n        card.forEach(function (element) { element.setAttribute('tabindex', '0'); });\n    };\n    Keyboard.prototype.processLeftRightArrow = function (e) {\n        if (document.activeElement.classList.contains(cls.CONTENT_CELLS_CLASS)) {\n            if (e.action === 'rightArrow' && document.activeElement.nextElementSibling) {\n                document.activeElement.nextElementSibling.focus();\n            }\n            else if (e.action === 'leftArrow' && document.activeElement.previousElementSibling) {\n                document.activeElement.previousElementSibling.focus();\n            }\n        }\n    };\n    Keyboard.prototype.processUpDownArrow = function (action, selectedCard) {\n        if (action === 'upArrow' && document.activeElement) {\n            if (document.activeElement.classList.contains(cls.CARD_CLASS) && document.activeElement.previousElementSibling) {\n                document.activeElement.previousElementSibling.focus();\n            }\n            else if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n                document.activeElement.setAttribute('tabindex', '-1');\n                removeClass([document.activeElement], cls.SHOW_ADD_FOCUS);\n                var cell = closest(document.activeElement, '.' + cls.CONTENT_CELLS_CLASS);\n                if (cell.querySelectorAll('.' + cls.CARD_CLASS).length > 0) {\n                    [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS)).slice(-1)[0].focus();\n                }\n            }\n            this.removeSelection();\n        }\n        else if (action === 'downArrow' && document.activeElement &&\n            document.activeElement.classList.contains(cls.CARD_CLASS)) {\n            if (document.activeElement.nextElementSibling) {\n                document.activeElement.nextElementSibling.focus();\n            }\n            else if (closest(document.activeElement, '.' + cls.CARD_WRAPPER_CLASS).nextElementSibling) {\n                var ele = closest(document.activeElement, '.' + cls.CARD_WRAPPER_CLASS).nextElementSibling;\n                ele.setAttribute('tabindex', '0');\n                addClass([ele], cls.SHOW_ADD_FOCUS);\n                ele.focus();\n            }\n            this.removeSelection();\n        }\n        if ((action === 'multiSelectionByUpArrow' || action === 'multiSelectionByDownArrow')\n            && selectedCard && this.parent.cardSettings.selectionType === 'Multiple') {\n            var card = void 0;\n            if (action === 'multiSelectionByUpArrow') {\n                card = document.activeElement.previousElementSibling;\n            }\n            else {\n                card = document.activeElement.nextElementSibling;\n            }\n            if (card) {\n                this.parent.actionModule.cardSelection(card, false, true);\n                card.focus();\n                this.multiSelection = true;\n            }\n        }\n    };\n    Keyboard.prototype.removeSelection = function () {\n        if (this.multiSelection) {\n            var cards = this.parent.getSelectedCards();\n            if (cards.length > 0) {\n                removeClass(cards, cls.CARD_SELECTION_CLASS);\n                if (this.parent.enableVirtualization) {\n                    this.parent.virtualLayoutModule.disableAttributeSelection(cards);\n                }\n                else {\n                    this.parent.layoutModule.disableAttributeSelection(cards);\n                }\n            }\n            this.multiSelection = false;\n        }\n    };\n    Keyboard.prototype.cardTabIndexRemove = function () {\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS));\n        cards.forEach(function (card) { card.setAttribute('tabindex', '-1'); });\n        var addButton = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SHOW_ADD_BUTTON));\n        addButton.forEach(function (add) {\n            add.setAttribute('tabindex', '-1');\n            removeClass([add], cls.SHOW_ADD_FOCUS);\n        });\n    };\n    Keyboard.prototype.processEnter = function (e, selectedCard) {\n        if (e.action === 'space') {\n            e.preventDefault();\n        }\n        var element = (e.target);\n        if (element.classList.contains(cls.HEADER_ICON_CLASS)) {\n            this.parent.actionModule.columnExpandCollapse(e);\n        }\n        if (element.classList.contains(cls.SWIMLANE_ROW_EXPAND_CLASS) || element.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n            this.parent.actionModule.rowExpandCollapse(e);\n        }\n        if (document.activeElement.classList.contains(cls.CARD_CLASS)) {\n            this.parent.actionModule.cardSelection(document.activeElement, false, false);\n        }\n        if (document.activeElement.classList.contains(cls.SHOW_ADD_BUTTON)) {\n            if (!this.parent.dialogModule.dialogObj) {\n                this.parent.actionModule.addButtonClick(document.activeElement);\n            }\n            document.activeElement.focus();\n        }\n        if (element.classList.contains(cls.CONTENT_CELLS_CLASS)) {\n            var cards = [].slice.call(element.querySelectorAll('.' + cls.CARD_CLASS));\n            this.addRemoveTabIndex('Remove');\n            if (cards.length > 0) {\n                element.querySelector('.' + cls.CARD_CLASS).focus();\n                cards.forEach(function (element) { element.setAttribute('tabindex', '0'); });\n            }\n            if (element.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n                element.querySelector('.' + cls.SHOW_ADD_BUTTON).setAttribute('tabindex', '0');\n                element.querySelector('.' + cls.SHOW_ADD_BUTTON).focus();\n            }\n        }\n        if (selectedCard === document.activeElement && this.parent.element.querySelectorAll('.' + cls.CARD_SELECTION_CLASS).length === 1) {\n            this.parent.activeCardData = {\n                data: this.parent.getCardDetails(selectedCard), element: selectedCard\n            };\n            if (!this.parent.dialogModule.dialogObj) {\n                this.parent.dialogModule.openDialog('Edit', this.parent.getCardDetails(selectedCard));\n            }\n            selectedCard.focus();\n        }\n    };\n    Keyboard.prototype.addRemoveTabIndex = function (action) {\n        var attribute = action === 'Add' ? '0' : '-1';\n        var headerIcon = [].slice.call(this.parent.element.querySelectorAll('.' + cls.HEADER_ICON_CLASS));\n        if (headerIcon.length > 0) {\n            headerIcon.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n        }\n        var swimlaneIcon = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_EXPAND_CLASS));\n        if (swimlaneIcon.length > 0) {\n            swimlaneIcon.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n        }\n        var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n        var contentCell = [].slice.call(this.parent.element.querySelectorAll(className));\n        contentCell.forEach(function (element) { element.setAttribute('tabindex', attribute); });\n    };\n    Keyboard.prototype.destroy = function () {\n        this.keyboardModule.destroy();\n    };\n    return Keyboard;\n}());\nexport { Keyboard };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, append, closest, addClass, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport * as cls from '../base/css-constant';\n/**\n * Tooltip for Kanban board\n */\nvar KanbanTooltip = /** @class */ (function () {\n    /**\n     * Constructor for tooltip module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     */\n    function KanbanTooltip(parent) {\n        this.parent = parent;\n        this.renderTooltip();\n    }\n    KanbanTooltip.prototype.renderTooltip = function () {\n        this.tooltipObj = new Tooltip({\n            cssClass: this.parent.cssClass + ' ' + cls.TOOLTIP_CLASS,\n            enableRtl: this.parent.enableRtl,\n            mouseTrail: !this.parent.isAdaptive,\n            offsetY: 5,\n            position: 'BottomCenter',\n            showTipPointer: true,\n            target: '.' + cls.TOOLTIP_TEXT_CLASS,\n            beforeRender: this.onBeforeRender.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        });\n        this.tooltipObj.appendTo(this.parent.element);\n        this.tooltipObj.isStringTemplate = true;\n    };\n    KanbanTooltip.prototype.onBeforeRender = function (args) {\n        if (this.parent.dragAndDropModule.isDragging) {\n            args.cancel = true;\n            return;\n        }\n        var tooltipContent;\n        if (this.parent.tooltipTemplate) {\n            tooltipContent = createElement('div');\n            var target = closest(args.target, '.' + cls.CARD_CLASS);\n            var data = this.parent.getCardDetails(target);\n            var templateId = this.parent.element.id + '_tooltipTemplate';\n            var tooltipTemplate = this.parent.templateParser(this.parent.tooltipTemplate)(data, this.parent, 'tooltipTemplate', templateId, false);\n            append(tooltipTemplate, tooltipContent);\n            this.parent.renderTemplates();\n        }\n        else {\n            tooltipContent = initializeCSPTemplate(function () {\n                return \"<div class=\\\"e-card-header-caption\\\">\" + args.target.innerText + \"</div>\";\n            });\n        }\n        this.tooltipObj.setProperties({ content: tooltipContent }, true);\n    };\n    KanbanTooltip.prototype.onBeforeClose = function () {\n        this.parent.resetTemplates(['tooltipTemplate']);\n    };\n    KanbanTooltip.prototype.destroy = function () {\n        this.tooltipObj.destroy();\n        addClass([this.parent.element], 'e-control');\n        this.tooltipObj = null;\n    };\n    return KanbanTooltip;\n}());\nexport { KanbanTooltip };\n","import { Touch, EventHandler, remove, addClass, createElement, closest } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban touch module\n */\nvar KanbanTouch = /** @class */ (function () {\n    /**\n     * Constructor for touch module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function KanbanTouch(parent) {\n        this.parent = parent;\n        this.tabHold = false;\n    }\n    KanbanTouch.prototype.wireTouchEvents = function () {\n        this.element = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        this.touchObj = new Touch(this.element, { tapHold: this.tapHoldHandler.bind(this) });\n    };\n    KanbanTouch.prototype.tapHoldHandler = function (e) {\n        this.tabHold = true;\n        var target = closest(e.originalEvent.target, '.' + cls.CARD_CLASS);\n        if (target && this.parent.cardSettings.selectionType === 'Multiple') {\n            this.parent.actionModule.cardSelection(target, true, false);\n            if (!this.mobilePopup) {\n                this.renderMobilePopup();\n                this.mobilePopup.show();\n            }\n            this.updatePopupContent();\n        }\n    };\n    KanbanTouch.prototype.renderMobilePopup = function () {\n        if (this.parent.cardSettings.selectionType === 'Multiple') {\n            var mobilePopupWrapper = createElement('div', {\n                className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close',\n                innerHTML: \"<div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\"><button class=\\\"\" + cls.CLOSE_CLASS + \"\\\"></button></div>\" +\n                    (\"<div class=\\\"\" + cls.POPUP_CONTENT_CLASS + \"\\\"></div>\")\n            });\n            document.body.appendChild(mobilePopupWrapper);\n            addClass([mobilePopupWrapper], cls.DEVICE_CLASS);\n            this.mobilePopup = new Popup(mobilePopupWrapper, {\n                targetType: 'container',\n                enableRtl: this.parent.enableRtl,\n                hideAnimation: { name: 'ZoomOut' },\n                showAnimation: { name: 'ZoomIn' },\n                collision: { X: 'fit', Y: 'fit' },\n                position: { X: 'left', Y: 'top' },\n                viewPortElement: document.body,\n                zIndex: 1004,\n                close: this.popupClose.bind(this)\n            });\n            var closeIcon = this.mobilePopup.element.querySelector('.' + cls.CLOSE_CLASS);\n            var buttonObj = new Button({\n                cssClass: 'e-flat e-round e-small',\n                enableRtl: this.parent.enableRtl,\n                iconCss: cls.ICON_CLASS + ' ' + cls.CLOSE_ICON_CLASS\n            });\n            buttonObj.appendTo(closeIcon);\n            buttonObj.isStringTemplate = true;\n            EventHandler.add(closeIcon, 'click', this.closeClick, this);\n        }\n    };\n    KanbanTouch.prototype.getPopupContent = function () {\n        var popupContent;\n        var selectedCards = this.parent.getSelectedCards();\n        if (selectedCards.length > 1) {\n            popupContent = '(' + selectedCards.length + ') ' + this.parent.localeObj.getConstant('cardsSelected');\n        }\n        else if (selectedCards.length === 1) {\n            popupContent = ' ' + this.parent.getCardDetails(selectedCards[0])[this.parent.cardSettings.headerField];\n        }\n        return popupContent;\n    };\n    KanbanTouch.prototype.updatePopupContent = function () {\n        if (!this.mobilePopup) {\n            return;\n        }\n        var popupContent = this.getPopupContent();\n        if (popupContent) {\n            this.mobilePopup.element.querySelector('.' + cls.POPUP_CONTENT_CLASS).textContent = popupContent;\n        }\n        else {\n            this.mobilePopup.hide();\n        }\n    };\n    KanbanTouch.prototype.closeClick = function () {\n        this.parent.touchModule.mobilePopup.hide();\n    };\n    KanbanTouch.prototype.popupClose = function () {\n        this.popupDestroy();\n    };\n    KanbanTouch.prototype.popupDestroy = function () {\n        if (this.mobilePopup && this.mobilePopup.element) {\n            var instance = this.mobilePopup.element.querySelector('.e-control.e-btn').ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n            this.mobilePopup.destroy();\n            remove(this.mobilePopup.element);\n            this.mobilePopup = null;\n        }\n    };\n    KanbanTouch.prototype.unWireTouchEvents = function () {\n        if (this.touchObj) {\n            this.touchObj.destroy();\n        }\n        this.touchObj = null;\n        this.element = null;\n    };\n    KanbanTouch.prototype.destroy = function () {\n        this.popupDestroy();\n        this.unWireTouchEvents();\n        this.tabHold = false;\n    };\n    return KanbanTouch;\n}());\nexport { KanbanTouch };\n","import { append, createElement, EventHandler, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from './constant';\nimport * as cls from './css-constant';\n/**\n * Kanban mobile layout rendering module\n *\n */\nvar MobileLayout = /** @class */ (function () {\n    function MobileLayout(parent) {\n        this.parent = parent;\n    }\n    MobileLayout.prototype.renderSwimlaneHeader = function () {\n        var toolbarWrapper = createElement('div', {\n            className: cls.SWIMLANE_HEADER_CLASS,\n            innerHTML: '<div class=\"' + cls.SWIMLANE_HEADER_TOOLBAR_CLASS + '\"><div class=\"' + cls.TOOLBAR_MENU_CLASS +\n                '\"><div class=\"e-icons ' + cls.TOOLBAR_MENU_ICON_CLASS + '\"></div></div><div class=\"' + cls.TOOLBAR_LEVEL_TITLE_CLASS +\n                '\"><div class=\"' + cls.TOOLBAR_SWIMLANE_NAME_CLASS + '\"></div></div></div>'\n        });\n        this.parent.element.appendChild(toolbarWrapper);\n        EventHandler.add(toolbarWrapper.querySelector('.' + cls.TOOLBAR_MENU_ICON_CLASS), 'click', this.menuClick, this);\n    };\n    MobileLayout.prototype.renderSwimlaneTree = function () {\n        var height = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).offsetHeight;\n        var treeHeight = window.innerHeight - height;\n        this.popupOverlay = createElement('div', { className: cls.SWIMLANE_OVERLAY_CLASS, styles: 'height: ' + treeHeight + 'px;' });\n        var wrapper = createElement('div', { className: cls.SWIMLANE_CONTENT_CLASS, styles: 'top:' + height + 'px;' });\n        var treeWrapper = createElement('div', {\n            className: cls.SWIMLANE_RESOURCE_CLASS + ' e-popup-close', styles: 'height: ' + treeHeight + 'px;'\n        });\n        wrapper.appendChild(treeWrapper);\n        wrapper.appendChild(this.popupOverlay);\n        this.parent.element.appendChild(wrapper);\n        var swimlaneTree = createElement('div', { className: cls.SWIMLANE_TREE_CLASS });\n        treeWrapper.appendChild(swimlaneTree);\n        var dataSource = this.parent.enableVirtualization ?\n            this.parent.virtualLayoutModule.kanbanRows : this.parent.layoutModule.kanbanRows;\n        this.treeViewObj = new TreeView({\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            fields: {\n                dataSource: dataSource,\n                id: 'keyField',\n                text: 'textField'\n            },\n            nodeTemplate: this.parent.swimlaneSettings.template,\n            nodeClicked: this.treeSwimlaneClick.bind(this),\n            drawNode: this.drawNode.bind(this)\n        });\n        this.treeViewObj.appendTo(swimlaneTree);\n        var popupObj = {\n            targetType: 'relative',\n            actionOnScroll: 'none',\n            enableRtl: this.parent.enableRtl,\n            zIndex: 10,\n            hideAnimation: { name: 'SlideLeftOut', duration: 500 },\n            showAnimation: { name: 'SlideLeftIn', duration: 500 },\n            viewPortElement: this.parent.element.querySelector('.' + cls.CONTENT_CLASS)\n        };\n        popupObj.content = this.treeViewObj.element;\n        this.treePopup = new Popup(treeWrapper, popupObj);\n    };\n    MobileLayout.prototype.menuClick = function () {\n        if (this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        else {\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item'));\n            removeClass(treeNodes, 'e-active');\n            addClass([treeNodes[this.parent.layoutModule.swimlaneIndex]], 'e-active');\n            this.treePopup.show();\n            addClass([this.popupOverlay], 'e-enable');\n        }\n    };\n    MobileLayout.prototype.treeSwimlaneClick = function (args) {\n        this.treePopup.hide();\n        var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item'));\n        this.parent.layoutModule.swimlaneIndex = treeNodes.indexOf(args.node);\n        this.parent.layoutModule.scrollLeft = 0;\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        args.event.preventDefault();\n    };\n    MobileLayout.prototype.hidePopup = function () {\n        this.treePopup.hide();\n        removeClass([this.popupOverlay], 'e-enable');\n    };\n    MobileLayout.prototype.getWidth = function () {\n        return (window.innerWidth * 80) / 100;\n    };\n    MobileLayout.prototype.drawNode = function (args) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.parent.swimlaneSettings.template && this.parent.isReact) {\n            var templateId = this.parent.element.id + '_treeviewTemplate';\n            var treeViewTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(args.nodeData, this.parent, 'nodeTemplate', templateId, false);\n            append(treeViewTemplate, args.node.querySelector('.e-list-text'));\n        }\n    };\n    return MobileLayout;\n}());\nexport { MobileLayout };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, formatUnit, EventHandler, addClass, remove, extend, Browser, isNullOrUndefined as isNoU, removeClass, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { MobileLayout } from './mobile-layout';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban layout rendering module\n *\n */\nvar LayoutRender = /** @class */ (function (_super) {\n    __extends(LayoutRender, _super);\n    function LayoutRender(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.kanbanRows = [];\n        _this.parent = parent;\n        _this.columnKeys = [];\n        _this.swimlaneIndex = 0;\n        _this.swimlaneData = {};\n        _this.scrollLeft = 0;\n        _this.frozenOrder = 0;\n        _this.parent.on(events.dataReady, _this.initRender, _this);\n        _this.parent.on(events.contentReady, _this.scrollUiUpdate, _this);\n        return _this;\n    }\n    LayoutRender.prototype.initRender = function () {\n        if (this.parent.columns.length === 0) {\n            return;\n        }\n        this.columnData = this.getColumnCards();\n        this.kanbanRows = this.getRows();\n        this.swimlaneData = this.getSwimlaneCards();\n        if (this.parent.isAdaptive) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n            if (parent_1) {\n                this.scrollLeft = parent_1.scrollLeft;\n            }\n        }\n        this.destroy();\n        this.parent.on(events.dataReady, this.initRender, this);\n        this.parent.on(events.contentReady, this.scrollUiUpdate, this);\n        if (this.parent.isAdaptive && this.parent.swimlaneSettings.keyField && this.parent.kanbanData.length !== 0) {\n            this.renderSwimlaneHeader();\n        }\n        var header = createElement('div', { className: cls.HEADER_CLASS });\n        this.parent.element.appendChild(header);\n        this.renderHeader(header);\n        this.renderContent();\n        this.renderCards();\n        this.renderValidation();\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.wireEvents();\n        if (this.parent.isInitialRender) {\n            this.parent.isInitialRender = false;\n        }\n    };\n    LayoutRender.prototype.renderHeader = function (header) {\n        var headerWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        header.appendChild(headerWrap);\n        var headerTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.HEADER_TABLE_CLASS\n        });\n        headerWrap.appendChild(headerTable);\n        this.renderColGroup(headerTable);\n        var tableHead = createElement('thead');\n        var tableBody = createElement('tbody', { className: 'e-hide', innerHTML: '<tr><td></td></tr>', attrs: { 'role': 'rowgroup' } });\n        headerTable.appendChild(tableBody);\n        headerTable.appendChild(tableHead);\n        if (this.parent.stackedHeaders.length > 0) {\n            tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));\n        }\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        tableHead.appendChild(tr);\n        var _loop_1 = function (column) {\n            if (this_1.isColumnVisible(column)) {\n                var index = this_1.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var th_1 = createElement('th', {\n                    className: index === -1 ? cls.HEADER_CELLS_CLASS : cls.HEADER_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'scope': 'col' }\n                });\n                var classList = [];\n                if (column.allowToggle) {\n                    classList.push(cls.HEADER_ROW_TOGGLE_CLASS);\n                    if (!column.isExpanded) {\n                        classList.push(cls.COLLAPSED_CLASS);\n                    }\n                }\n                addClass([th_1], classList);\n                var headerWrapper = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n                th_1.appendChild(headerWrapper);\n                this_1.columnData = this_1.getColumnCards(this_1.parent.kanbanData);\n                var noOfCard = this_1.columnData[column.keyField].length;\n                var headerTitle = createElement('div', { className: cls.HEADER_TITLE_CLASS });\n                headerWrapper.appendChild(headerTitle);\n                if (column.template) {\n                    var templateArgs = {\n                        keyField: column.keyField, headerText: column.headerText, minCount: column.minCount, maxCount: column.maxCount,\n                        allowToggle: column.allowToggle, isExpanded: column.isExpanded, showItemCount: column.showItemCount, count: noOfCard\n                    };\n                    addClass([th_1], cls.TEMPLATE_CLASS);\n                    var templateId = this_1.parent.element.id + '_columnTemplate';\n                    var templateHeader = this_1.parent.templateParser(column.template)(templateArgs, this_1.parent, 'columnTemplate', templateId, false);\n                    append(templateHeader, headerTitle);\n                }\n                else {\n                    var header_1 = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: column.headerText });\n                    headerTitle.appendChild(header_1);\n                    if (column.showItemCount) {\n                        var itemCount = createElement('div', {\n                            className: cls.CARD_ITEM_COUNT_CLASS,\n                            innerHTML: '- ' + noOfCard.toString() + ' ' + this_1.parent.localeObj.getConstant('items')\n                        });\n                        headerTitle.appendChild(itemCount);\n                    }\n                }\n                if (column.allowToggle) {\n                    var isExpand = (column.isExpanded && index === -1) ? true : false;\n                    var name_1 = (isExpand) ? cls.COLUMN_EXPAND_CLASS : cls.COLUMN_COLLAPSE_CLASS;\n                    var icon = createElement('div', {\n                        className: cls.HEADER_ICON_CLASS + ' ' + cls.ICON_CLASS + ' ' + name_1,\n                        attrs: { 'tabindex': '0', 'role': 'button' }\n                    });\n                    icon.setAttribute('aria-label', isExpand ? column.keyField + ' Expand' : column.keyField + ' Collapse');\n                    th_1.setAttribute('aria-expanded', isExpand.toString());\n                    headerWrapper.appendChild(icon);\n                }\n                var dataObj = [{ keyField: column.keyField, textField: column.headerText, count: noOfCard }];\n                var args = { data: dataObj, element: tr, cancel: false, requestType: 'headerRow' };\n                this_1.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n                    if (!columnArgs.cancel) {\n                        tr.appendChild(th_1);\n                    }\n                });\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            _loop_1(column);\n        }\n    };\n    LayoutRender.prototype.renderContent = function () {\n        var content = createElement('div', { className: cls.CONTENT_CLASS });\n        this.parent.element.appendChild(content);\n        var contentWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        content.appendChild(contentWrap);\n        var contentTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.CONTENT_TABLE_CLASS, attrs: { 'role': 'presentation' }\n        });\n        contentWrap.appendChild(contentTable);\n        this.renderColGroup(contentTable);\n        var tHead = createElement('thead', { className: 'e-hide', attrs: { 'role': 'none' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            var thElem = createElement('th', { id: column.keyField, innerHTML: column.keyField, attrs: { 'scope': 'col' } });\n            thElem.style.display = 'none';\n            tHead.appendChild(thElem);\n        }\n        contentTable.appendChild(tHead);\n        var tBody = createElement('tbody', { attrs: { 'role': 'treegrid', 'aria-label': 'Kanban Content' } });\n        contentTable.appendChild(tBody);\n        var isCollaspsed = false;\n        this.swimlaneRow = this.kanbanRows;\n        this.initializeSwimlaneTree();\n        for (var _b = 0, _c = this.swimlaneRow; _b < _c.length; _b++) {\n            var row = _c[_b];\n            if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {\n                var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);\n                isCollaspsed = index !== -1;\n            }\n            if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n                this.renderSwimlaneRow(tBody, row, isCollaspsed);\n            }\n            this.renderSingleContent(tBody, row, isCollaspsed);\n        }\n    };\n    LayoutRender.prototype.renderSingleContent = function (tBody, row, isCollaspsed) {\n        var className = isCollaspsed ? cls.CONTENT_ROW_CLASS + ' ' + cls.COLLAPSED_CLASS : cls.CONTENT_ROW_CLASS;\n        var tr = createElement('tr', { className: className,\n            attrs: { 'role': 'row', 'aria-label': row.keyField + 'row content' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (this.isColumnVisible(column)) {\n                var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var className_1 = index === -1 ? cls.CONTENT_CELLS_CLASS : cls.CONTENT_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS;\n                var dragClass = (column.allowDrag ? ' ' + cls.DRAG_CLASS : '') + (column.allowDrop ? ' ' + cls.DROP_CLASS\n                    + ' ' + cls.DROPPABLE_CLASS : '');\n                var td = createElement('td', {\n                    className: className_1 + dragClass, attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'tabindex': '0',\n                        'aria-describedby': column.keyField.toString(), 'role': 'gridcell' }\n                });\n                if (column.allowToggle && !column.isExpanded || index !== -1) {\n                    addClass([td], cls.COLLAPSED_CLASS);\n                    var text = (column.showItemCount ? '[' +\n                        this.getColumnData(column.keyField, this.swimlaneData[row.keyField]).length + '] ' : '') + column.headerText;\n                    td.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                    td.setAttribute('aria-expanded', 'false');\n                }\n                if (column.showAddButton) {\n                    var button = createElement('div', { className: cls.SHOW_ADD_BUTTON, attrs: { 'tabindex': '-1' } });\n                    button.appendChild(createElement('div', { className: cls.SHOW_ADD_ICON + ' ' + cls.ICON_CLASS }));\n                    td.appendChild(button);\n                }\n                tr.appendChild(td);\n            }\n        }\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'contentRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.initializeSwimlaneTree = function () {\n        if (this.parent.swimlaneSettings.keyField && this.parent.isAdaptive && this.parent.kanbanData.length !== 0) {\n            var swimlaneHeaderName = this.parent.element.querySelector('.' + cls.TOOLBAR_SWIMLANE_NAME_CLASS);\n            this.swimlaneRow = [this.kanbanRows[this.swimlaneIndex]];\n            this.renderSwimlaneTree();\n            if (this.parent.swimlaneSettings.template) {\n                var cardCount = this.swimlaneData[this.swimlaneRow[0].keyField].length;\n                var templateArgs = extend({}, this.swimlaneRow[0], { count: cardCount }, true);\n                var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, 'swimlaneTemplate', '', false);\n                swimlaneHeaderName.appendChild(swimlaneTemplate[0]);\n            }\n            else {\n                swimlaneHeaderName.innerHTML = this.swimlaneRow[0].textField;\n            }\n        }\n    };\n    LayoutRender.prototype.renderSwimlaneRow = function (tBody, row, isCollapsed) {\n        var name = cls.CONTENT_ROW_CLASS + ' ' + cls.SWIMLANE_ROW_CLASS;\n        var className = isCollapsed ? ' ' + cls.COLLAPSED_CLASS : '';\n        var tr = createElement('tr', {\n            className: name + className, attrs: { 'aria-label': row.keyField + ' row header',\n                'role': 'row', 'data-key': row.keyField, 'aria-expanded': (!isCollapsed).toString() }\n        });\n        var col = this.parent.columns.length - this.parent.actionModule.hideColumnKeys.length;\n        var td = createElement('td', { className: cls.CONTENT_CELLS_CLASS,\n            attrs: { 'data-role': 'kanban-column', 'role': 'gridcell', colspan: col.toString() } });\n        var swimlaneHeader = createElement('div', { className: cls.SWIMLANE_HEADER_CLASS });\n        td.appendChild(swimlaneHeader);\n        var iconClass = isCollapsed ? cls.SWIMLANE_ROW_COLLAPSE_CLASS : cls.SWIMLANE_ROW_EXPAND_CLASS;\n        var iconDiv = createElement('div', {\n            className: cls.ICON_CLASS + ' ' + iconClass, attrs: {\n                'tabindex': '0', 'role': 'button', 'aria-label': isCollapsed ? row.keyField + ' Collapse' : row.keyField + ' Expand'\n            }\n        });\n        swimlaneHeader.appendChild(iconDiv);\n        var headerWrap = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n        swimlaneHeader.appendChild(headerWrap);\n        var cardCount = this.swimlaneData[row.keyField].length;\n        if (this.parent.swimlaneSettings.template) {\n            var templateArgs = extend({}, row, { count: cardCount }, true);\n            addClass([td], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_swimlaneTemplate';\n            var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, 'swimlaneTemplate', templateId, false);\n            append(swimlaneTemplate, headerWrap);\n        }\n        else {\n            headerWrap.appendChild(createElement('div', {\n                className: cls.SWIMLANE_ROW_TEXT_CLASS,\n                innerHTML: row.textField,\n                attrs: { 'data-role': row.textField }\n            }));\n        }\n        if (this.parent.swimlaneSettings.showItemCount) {\n            swimlaneHeader.appendChild(createElement('div', {\n                className: cls.CARD_ITEM_COUNT_CLASS,\n                innerHTML: \"- \" + cardCount.toString() + \" \" + this.parent.localeObj.getConstant('items')\n            }));\n        }\n        tr.appendChild(td);\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'swimlaneRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.renderCards = function () {\n        var _this = this;\n        var rows = this.swimlaneRow;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row'));\n        var removeTrs = [];\n        var columnTransition = false;\n        cardRows.forEach(function (tr, index) {\n            var dataCount = 0;\n            var _loop_2 = function (column) {\n                if (_this.isColumnVisible(column)) {\n                    var columnData = _this.parent.swimlaneSettings.keyField ?\n                        _this.getColumnData(column.keyField, (_this.parent.swimlaneSettings.showEmptyRow &&\n                            isNoU(_this.swimlaneData[rows[index].keyField])) ? []\n                            : _this.swimlaneData[rows[index].keyField]) : _this.columnData[column.keyField];\n                    dataCount += columnData.length;\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var cardWrapper_1 = createElement('div', {\n                        className: cls.CARD_WRAPPER_CLASS, attrs: { 'role': 'listbox', 'tabindex': '0',\n                            'aria-label': column.keyField.toString()\n                        }\n                    });\n                    if (column.transitionColumns.length > 0) {\n                        columnTransition = true;\n                    }\n                    if (!columnTransition && isNoU(_this.parent.swimlaneSettings.keyField)) {\n                        var borderElem = createElement('div', { className: cls.BORDER_CLASS });\n                        columnWrapper.appendChild(borderElem);\n                    }\n                    columnWrapper.appendChild(cardWrapper_1);\n                    if (columnData.length > 0) {\n                        var _loop_3 = function (data) {\n                            var cardText = data[_this.parent.cardSettings.headerField];\n                            var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);\n                            var cardElement = _this.renderCard(data);\n                            if (cardIndex !== -1) {\n                                cardElement.setAttribute('aria-selected', 'true');\n                                addClass([cardElement], cls.CARD_SELECTION_CLASS);\n                            }\n                            var args = { data: data, element: cardElement, cancel: false };\n                            _this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                                if (!cardArgs.cancel) {\n                                    cardWrapper_1.appendChild(cardElement);\n                                }\n                            });\n                        };\n                        for (var _i = 0, _a = columnData; _i < _a.length; _i++) {\n                            var data = _a[_i];\n                            _loop_3(data);\n                        }\n                    }\n                    else {\n                        cardWrapper_1.appendChild(_this.renderEmptyCard());\n                    }\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_2(column);\n            }\n            if (dataCount === 0) {\n                removeTrs.push(tr);\n                if (swimlaneRows.length > 0) {\n                    removeTrs.push(swimlaneRows[index]);\n                }\n            }\n        });\n        if (!this.parent.swimlaneSettings.showEmptyRow && (this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn)) {\n            removeTrs.forEach(function (tr) { return remove(tr); });\n        }\n    };\n    LayoutRender.prototype.renderCard = function (data) {\n        var cardElement = createElement('div', {\n            className: cls.CARD_CLASS,\n            attrs: { 'data-id': data[this.parent.cardSettings.headerField], 'data-key': data[this.parent.keyField],\n                'aria-selected': 'false', 'tabindex': '-1', 'role': 'option', 'aria-roledescription': 'Card'\n            }\n        });\n        if (this.parent.cardHeight !== 'auto') {\n            cardElement.style.height = formatUnit(this.parent.cardHeight);\n        }\n        if (this.parent.cardSettings.template) {\n            addClass([cardElement], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_cardTemplate';\n            var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, 'cardTemplate', templateId, false);\n            append(cardTemplate, cardElement);\n        }\n        else {\n            var tooltipClass = this.parent.enableTooltip ? ' ' + cls.TOOLTIP_TEXT_CLASS : '';\n            if (this.parent.cardSettings.showHeader) {\n                var cardHeader = createElement('div', { className: cls.CARD_HEADER_CLASS });\n                var cardCaption = createElement('div', { className: cls.CARD_HEADER_TEXT_CLASS });\n                var cardText = createElement('div', {\n                    className: cls.CARD_HEADER_TITLE_CLASS + tooltipClass,\n                    innerHTML: data[this.parent.cardSettings.headerField] || ''\n                });\n                cardHeader.appendChild(cardCaption);\n                cardCaption.appendChild(cardText);\n                cardElement.appendChild(cardHeader);\n            }\n            var cardContent = createElement('div', {\n                className: cls.CARD_CONTENT_CLASS + tooltipClass,\n                innerHTML: data[this.parent.cardSettings.contentField] || ''\n            });\n            cardElement.appendChild(cardContent);\n            if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {\n                var cardTags = createElement('div', { className: cls.CARD_TAGS_CLASS });\n                var tags = data[this.parent.cardSettings.tagsField].toString().split(',');\n                for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n                    var tag = tags_1[_i];\n                    cardTags.appendChild(createElement('div', {\n                        className: cls.CARD_TAG_CLASS + ' ' + cls.CARD_LABEL_CLASS, innerHTML: tag\n                    }));\n                }\n                cardElement.appendChild(cardTags);\n            }\n            if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {\n                addClass([cardElement], cls.CARD_COLOR_CLASS);\n                cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];\n            }\n            if (this.parent.cardSettings.footerCssField) {\n                var cardFields = createElement('div', { className: cls.CARD_FOOTER_CLASS });\n                var keys = data[this.parent.cardSettings.footerCssField].split(',');\n                for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n                    var key = keys_1[_a];\n                    cardFields.appendChild(createElement('div', {\n                        className: key.trim() + ' ' + cls.CARD_FOOTER_CSS_CLASS\n                    }));\n                }\n                cardElement.appendChild(cardFields);\n            }\n        }\n        return cardElement;\n    };\n    LayoutRender.prototype.renderEmptyCard = function () {\n        var emptyCard = createElement('span', {\n            className: cls.EMPTY_CARD_CLASS, innerHTML: this.parent.localeObj.getConstant('noCard'),\n            attrs: { 'aria-label': this.parent.localeObj.getConstant('noCard'), 'role': 'option' }\n        });\n        return emptyCard;\n    };\n    LayoutRender.prototype.renderColGroup = function (table) {\n        var _this = this;\n        var colGroup = createElement('colgroup');\n        this.parent.columns.forEach(function (column) {\n            if (_this.isColumnVisible(column)) {\n                var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var isToggle = column.allowToggle && !column.isExpanded;\n                var className = index === -1 ? (isToggle ? cls.COLLAPSED_CLASS : '') : cls.COLLAPSED_CLASS;\n                var col = createElement('col', {\n                    className: className,\n                    attrs: { 'data-key': column.keyField.toString() },\n                    styles: _this.parent.isAdaptive ? 'width: ' +\n                        (isToggle ? formatUnit(events.toggleWidth) : formatUnit(_this.getWidth())) : ''\n                });\n                colGroup.appendChild(col);\n            }\n        });\n        table.appendChild(colGroup);\n    };\n    LayoutRender.prototype.getRows = function () {\n        var _this = this;\n        var kanbanRows = [];\n        if (this.parent.swimlaneSettings.keyField) {\n            this.parent.kanbanData.map(function (obj) {\n                if (!_this.parent.swimlaneSettings.showEmptyRow) {\n                    if ((isNoU(obj[_this.parent.keyField])) || (obj[_this.parent.keyField] === '') ||\n                        (obj[_this.parent.keyField] && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) === -1)) {\n                        return;\n                    }\n                }\n                var textField = obj[_this.parent.swimlaneSettings.textField] || obj[_this.parent.swimlaneSettings.keyField];\n                var keyField = obj[_this.parent.swimlaneSettings.keyField];\n                if (!obj[_this.parent.swimlaneSettings.keyField]) {\n                    if (_this.parent.swimlaneSettings.showUnassignedRow) {\n                        textField = _this.parent.localeObj.getConstant('unassigned');\n                        keyField = '';\n                    }\n                    else {\n                        return;\n                    }\n                }\n                kanbanRows.push({ keyField: keyField, textField: textField });\n            });\n            kanbanRows = kanbanRows.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.keyField; }).indexOf(item.keyField);\n            });\n            kanbanRows = this.swimlaneSorting(kanbanRows);\n            kanbanRows.forEach(function (row) {\n                row.count = _this.parent.kanbanData.filter(function (obj) {\n                    return _this.columnKeys.indexOf(obj[_this.parent.keyField]) > -1 &&\n                        obj[_this.parent.swimlaneSettings.keyField] === row.keyField;\n                }).length;\n            });\n            if (kanbanRows.length === 0) {\n                kanbanRows.push({ keyField: '', textField: '' });\n            }\n        }\n        else {\n            kanbanRows.push({ keyField: '', textField: '' });\n        }\n        return kanbanRows;\n    };\n    LayoutRender.prototype.swimlaneSorting = function (rows) {\n        if (this.parent.swimlaneSettings.sortComparer) {\n            rows = this.parent.swimlaneSettings.sortComparer.call(this.parent, rows);\n        }\n        else {\n            rows.sort(function (a, b) { return a.textField.localeCompare(b.textField, undefined, { numeric: true }); });\n            if (this.parent.swimlaneSettings.sortDirection === 'Descending') {\n                rows.reverse();\n            }\n        }\n        return rows;\n    };\n    LayoutRender.prototype.createStackedRow = function (rows) {\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS + ' ' + cls.STACKED_HEADER_ROW_CLASS });\n        var stackedHeaders = [];\n        this.parent.columns.forEach(function (column) {\n            var headerText = '';\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {\n                    headerText = row.text;\n                }\n            }\n            stackedHeaders.push(headerText);\n        });\n        for (var h = 0; h < stackedHeaders.length; h++) {\n            var colSpan = 1;\n            for (var j = h + 1; j < stackedHeaders.length; j++) {\n                if ((stackedHeaders[h] !== '') && (stackedHeaders[j] !== '') && stackedHeaders[h] === stackedHeaders[j]) {\n                    colSpan++;\n                }\n                else {\n                    break;\n                }\n            }\n            var div = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: stackedHeaders[h] });\n            var th = createElement('th', {\n                className: cls.HEADER_CELLS_CLASS + ' ' + cls.STACKED_HEADER_CELL_CLASS,\n                attrs: { 'colspan': colSpan.toString(), 'scope': 'col' }\n            });\n            tr.appendChild(th).appendChild(div);\n            h += colSpan - 1;\n        }\n        return tr;\n    };\n    LayoutRender.prototype.scrollUiUpdate = function () {\n        var _this = this;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        var height = this.parent.element.offsetHeight - header.offsetHeight;\n        if (this.parent.isAdaptive) {\n            height = window.innerHeight - (header.offsetHeight + events.bottomSpace);\n            var swimlaneToolbar = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n            if (swimlaneToolbar) {\n                height -= swimlaneToolbar.offsetHeight;\n            }\n            var cardWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n            cardWrappers.forEach(function (cell) {\n                var cardWrapper = cell.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                if (!cardWrapper.classList.contains(cls.MULTI_CARD_WRAPPER_CLASS)) {\n                    cardWrapper.style.height = formatUnit(height);\n                    EventHandler.add(cell, 'touchmove', _this.onAdaptiveScroll, _this);\n                }\n            });\n        }\n        if (this.parent.height !== 'auto' && this.parent.height !== '100%') {\n            content.style.height = formatUnit(height);\n        }\n        [].slice.call(header.children).forEach(function (node) {\n            var paddingValue = 0;\n            if ((content.offsetWidth - content.clientWidth) > 0) {\n                paddingValue = 17;\n                if ((content.offsetHeight - content.clientHeight) > 0) {\n                    node.style.width = formatUnit(content.clientWidth);\n                }\n            }\n            if (_this.parent.enableRtl) {\n                node.style.paddingLeft = formatUnit(paddingValue);\n            }\n            else {\n                node.style.paddingRight = formatUnit(paddingValue);\n            }\n        });\n        this.updateScrollPosition();\n    };\n    LayoutRender.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (node) { node.scrollLeft = target.scrollLeft; });\n        this.parent.scrollPosition.content = { left: target.scrollLeft, top: target.scrollTop };\n        if (!isNoU(this.parent.swimlaneSettings.keyField) && this.parent.swimlaneSettings.enableFrozenRows) {\n            this.frozenRows(e);\n        }\n    };\n    LayoutRender.prototype.addFrozenSwimlaneDataKey = function (currentElem) {\n        var frozenKey = currentElem.getAttribute('data-key');\n        if (!isNoU(frozenKey)) {\n            this.frozenSwimlaneRow.setAttribute('data-key', frozenKey);\n        }\n    };\n    LayoutRender.prototype.frozenRows = function (e) {\n        var firstSwimlane = this.parent.element.querySelector('.' + cls.SWIMLANE_ROW_CLASS);\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (isNoU(this.frozenSwimlaneRow)) {\n            this.frozenSwimlaneRow = createElement('div', { className: cls.FROZEN_SWIMLANE_ROW_CLASS });\n            var frozenRow = createElement('div', { className: cls.FROZEN_ROW_CLASS });\n            this.frozenSwimlaneRow.appendChild(frozenRow);\n            this.parent.element.insertBefore(this.frozenSwimlaneRow, this.parent.element.firstElementChild);\n            frozenRow.appendChild(firstSwimlane.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n            this.addFrozenSwimlaneDataKey(firstSwimlane);\n            setStyleAttribute(this.frozenSwimlaneRow, { height: formatUnit(firstSwimlane.getBoundingClientRect().height),\n                width: formatUnit(content.querySelector('.e-swimlane').getBoundingClientRect().width),\n                top: formatUnit(header.getBoundingClientRect().height.toString())\n            });\n            setStyleAttribute(header, { position: 'relative', top: formatUnit((-this.frozenSwimlaneRow.getBoundingClientRect().height)) });\n            setStyleAttribute(content, { position: 'relative', top: formatUnit((-this.frozenSwimlaneRow.getBoundingClientRect().height)) });\n        }\n        else {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n            var curSwim = swimlaneRows[this.frozenOrder];\n            var prevSwim = swimlaneRows[this.frozenOrder - 1];\n            var nextSwim = swimlaneRows[this.frozenOrder + 1];\n            var curSwimHeight = void 0;\n            var prevSwimHeight = void 0;\n            var nextSwimHeight = void 0;\n            if (curSwim) {\n                curSwimHeight = curSwim.getBoundingClientRect().top + curSwim.getBoundingClientRect().height;\n            }\n            if (prevSwim) {\n                prevSwimHeight = prevSwim.getBoundingClientRect().top + prevSwim.getBoundingClientRect().height;\n            }\n            if (nextSwim) {\n                nextSwimHeight = nextSwim.getBoundingClientRect().top + nextSwim.getBoundingClientRect().height;\n            }\n            var frozenSwimHeight = content.getBoundingClientRect().top + this.frozenSwimlaneRow.getBoundingClientRect().height;\n            var frozenRowsElement = this.frozenSwimlaneRow.querySelector('.' + cls.FROZEN_ROW_CLASS);\n            if (nextSwimHeight && frozenSwimHeight >= nextSwimHeight && this.frozenOrder < swimlaneRows.length - 1) {\n                if (frozenRowsElement) {\n                    remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n                    frozenRowsElement.appendChild(nextSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n                    this.addFrozenSwimlaneDataKey(nextSwim);\n                }\n                ++this.frozenOrder;\n            }\n            else if (prevSwimHeight && frozenSwimHeight < curSwimHeight && frozenSwimHeight > prevSwimHeight && this.frozenOrder > 0) {\n                if (frozenRowsElement) {\n                    remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n                    frozenRowsElement.appendChild(prevSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n                    this.addFrozenSwimlaneDataKey(prevSwim);\n                }\n                --this.frozenOrder;\n            }\n        }\n        if (e && e.target.scrollTop === 0) {\n            this.removeFrozenRows();\n        }\n    };\n    LayoutRender.prototype.removeFrozenRows = function () {\n        remove(this.frozenSwimlaneRow);\n        this.frozenSwimlaneRow = null;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        setStyleAttribute(header, { position: '', top: '' });\n        setStyleAttribute(content, { position: '', top: '' });\n        this.parent.scrollPosition.content = { left: this.parent.scrollPosition.content.left, top: 0 };\n        content.scrollTop = 0;\n        this.frozenOrder = 0;\n    };\n    LayoutRender.prototype.onColumnScroll = function (e) {\n        var target = e.target;\n        if (target.offsetParent) {\n            var columnKey = target.offsetParent.getAttribute('data-key');\n            this.parent.scrollPosition.column[\"\" + columnKey] = { left: target.scrollLeft, top: target.scrollTop };\n        }\n    };\n    LayoutRender.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {\n            e.preventDefault();\n        }\n    };\n    /**\n     * Check column is visible or not.\n     *\n     * @param {ColumnsModel} column - specifies the column.\n     * @returns {boolean}\n     * @private\n     * @hidden\n     */\n    LayoutRender.prototype.isColumnVisible = function (column) {\n        var _this = this;\n        var isVisible = false;\n        var isNumeric = typeof column.keyField === 'number';\n        if (isNumeric) {\n            isVisible = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;\n        }\n        else {\n            column.keyField.split(',').forEach(function (key) { isVisible = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1; });\n        }\n        return isVisible;\n    };\n    LayoutRender.prototype.renderLimits = function (column, target) {\n        var limits = createElement('div', { className: cls.LIMITS_CLASS });\n        if (column.minCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MIN_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('min') + ': ' + column.minCount.toString()\n            }));\n        }\n        if (column.maxCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MAX_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('max') + ': ' + column.maxCount.toString()\n            }));\n        }\n        if (limits.childElementCount > 0) {\n            if (target.querySelector('.' + cls.CARD_WRAPPER_CLASS)) {\n                target.insertBefore(limits, target.firstElementChild);\n            }\n            else {\n                target.appendChild(limits);\n            }\n        }\n    };\n    LayoutRender.prototype.renderValidation = function () {\n        var _this = this;\n        this.parent.columns.forEach(function (column) {\n            if (!column.minCount && !column.maxCount) {\n                return;\n            }\n            var cardData = _this.columnData[column.keyField];\n            var keySelector = \"[data-key=\\\"\" + column.keyField + \"\\\"]\";\n            var headerCell = _this.parent.element.querySelector(\".\" + (cls.HEADER_CELLS_CLASS + keySelector));\n            var rowCells = [].slice.call(_this.parent.element.querySelectorAll(\".\" + (cls.CONTENT_CELLS_CLASS + keySelector)));\n            if (_this.parent.constraintType === 'Swimlane' && _this.parent.swimlaneSettings.keyField) {\n                _this.swimlaneRow.forEach(function (row, index) {\n                    _this.renderLimits(column, rowCells[index]);\n                    var rowCards = cardData.filter(function (card) {\n                        return card[_this.parent.swimlaneSettings.keyField] === row.keyField;\n                    });\n                    var colorClass = _this.getValidationClass(column, rowCards.length);\n                    if (colorClass) {\n                        addClass([rowCells[index]], colorClass);\n                    }\n                });\n            }\n            else {\n                _this.renderLimits(column, headerCell);\n                var colorClass = _this.getValidationClass(column, cardData.length);\n                if (colorClass) {\n                    addClass(rowCells.concat(headerCell), colorClass);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.getValidationClass = function (column, count) {\n        var colorClass;\n        if (column.maxCount && count > column.maxCount) {\n            colorClass = cls.MAX_COLOR_CLASS;\n        }\n        else if (column.minCount && count < column.minCount) {\n            colorClass = cls.MIN_COLOR_CLASS;\n        }\n        return colorClass;\n    };\n    LayoutRender.prototype.refreshValidation = function () {\n        var validations = [].slice.call(this.parent.element.querySelectorAll('.' + cls.LIMITS_CLASS));\n        validations.forEach(function (node) { remove(node); });\n        var minClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MIN_COLOR_CLASS));\n        removeClass(minClass, cls.MIN_COLOR_CLASS);\n        var maxClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MAX_COLOR_CLASS));\n        removeClass(maxClass, cls.MAX_COLOR_CLASS);\n        this.renderValidation();\n    };\n    LayoutRender.prototype.getColumnData = function (columnValue, dataSource) {\n        var _this = this;\n        if (dataSource === void 0) { dataSource = this.parent.kanbanData; }\n        var cardData = [];\n        var isNumeric = typeof columnValue === 'number';\n        if (isNumeric) {\n            var keyData = dataSource.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnValue;\n            });\n            cardData = cardData.concat(keyData);\n        }\n        else {\n            var columnKeys = columnValue.split(',');\n            var _loop_4 = function (key) {\n                var keyData = dataSource.filter(function (cardObj) {\n                    return cardObj[_this.parent.keyField] === key.trim();\n                });\n                cardData = cardData.concat(keyData);\n            };\n            for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n                var key = columnKeys_1[_i];\n                _loop_4(key);\n            }\n        }\n        this.sortCategory(cardData);\n        return cardData;\n    };\n    LayoutRender.prototype.sortCategory = function (cardData) {\n        var key = this.parent.cardSettings.headerField;\n        var direction = this.parent.sortSettings.direction;\n        switch (this.parent.sortSettings.sortBy) {\n            case 'DataSourceOrder':\n                this.sortOrder(key, direction, cardData);\n                break;\n            case 'Custom':\n            case 'Index':\n                if (this.parent.sortSettings.field) {\n                    key = this.parent.sortSettings.field;\n                }\n                this.sortOrder(key, direction, cardData);\n                break;\n        }\n        return cardData;\n    };\n    LayoutRender.prototype.sortOrder = function (key, direction, cardData) {\n        var isNumeric = true;\n        if (this.parent.kanbanData.length > 0) {\n            isNumeric = typeof (this.parent.kanbanData[0])[\"\" + key] === 'number';\n        }\n        if (!isNumeric && this.parent.sortSettings.sortBy === 'Index') {\n            return cardData;\n        }\n        var first;\n        var second;\n        cardData = cardData.sort(function (firstData, secondData) {\n            if (!isNumeric) {\n                first = firstData[\"\" + key].toLowerCase();\n                second = secondData[\"\" + key].toLowerCase();\n            }\n            else {\n                first = firstData[\"\" + key];\n                second = secondData[\"\" + key];\n            }\n            return (first > second) ? 1 : ((second > first) ? -1 : 0);\n        });\n        if (direction === 'Descending') {\n            cardData.reverse();\n        }\n        return cardData;\n    };\n    LayoutRender.prototype.documentClick = function (args) {\n        if (args.target.classList.contains(cls.SWIMLANE_OVERLAY_CLASS) &&\n            this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        if (closest(args.target, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var cards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.disableAttributeSelection(cards);\n    };\n    LayoutRender.prototype.disableAttributeSelection = function (cards) {\n        if (cards instanceof Element) {\n            cards.setAttribute('aria-selected', 'false');\n        }\n        else {\n            cards.forEach(function (card) { card.setAttribute('aria-selected', 'false'); });\n        }\n    };\n    LayoutRender.prototype.getColumnCards = function (data) {\n        var _this = this;\n        var columnData = {};\n        this.columnKeys = [];\n        this.parent.columns.forEach(function (column) {\n            var isNumeric = typeof column.keyField === 'number';\n            if (isNumeric) {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());\n            }\n            else {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.split(',').map(function (e) { return e.trim(); }));\n            }\n            var cardData = _this.getColumnData(column.keyField, data);\n            columnData[column.keyField] = cardData;\n        });\n        return columnData;\n    };\n    LayoutRender.prototype.getSwimlaneCards = function () {\n        var _this = this;\n        var swimlaneData = {};\n        if (this.parent.swimlaneSettings.keyField) {\n            this.kanbanRows.forEach(function (row) {\n                return swimlaneData[row.keyField] = _this.parent.kanbanData.filter(function (obj) {\n                    return !isNoU(obj[_this.parent.keyField]) &&\n                        _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) > -1 &&\n                        ((!obj[_this.parent.swimlaneSettings.keyField] && _this.parent.swimlaneSettings.showUnassignedRow) ?\n                            '' : obj[_this.parent.swimlaneSettings.keyField]) === row.keyField;\n                });\n            });\n        }\n        return swimlaneData;\n    };\n    LayoutRender.prototype.refreshHeaders = function () {\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (child) { return remove(child); });\n        this.renderHeader(header);\n    };\n    LayoutRender.prototype.refreshCards = function () {\n        this.parent.resetTemplates(['cardTemplate']);\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cards.forEach(function (card) { return remove(card); });\n        this.renderCards();\n        this.wireDragEvent();\n        this.parent.renderTemplates();\n    };\n    LayoutRender.prototype.refresh = function () {\n        var _this = this;\n        var isColumnTemplateRefreshed = false;\n        this.parent.columns.forEach(function (column) {\n            if (column.showItemCount) {\n                if (column && column.template && !isColumnTemplateRefreshed) {\n                    _this.refreshHeaders();\n                    isColumnTemplateRefreshed = true;\n                }\n                var countSelector = \".\" + cls.HEADER_CELLS_CLASS + \"[data-key=\\\"\" + column.keyField + \"\\\"] .\" + cls.CARD_ITEM_COUNT_CLASS;\n                var itemCount = _this.parent.element.querySelector(countSelector);\n                if (itemCount) {\n                    var isNumeric = typeof column.keyField === 'number';\n                    var cardLength = 0;\n                    if (isNumeric) {\n                        // eslint-disable-next-line no-useless-escape\n                        cardLength = ([].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + column.keyField + '\\\"]'))).length;\n                    }\n                    else {\n                        var keys = column.keyField.split(',');\n                        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n                            var key = keys_2[_i];\n                            // eslint-disable-next-line no-useless-escape\n                            var cards = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + key.trim() + '\\\"]'));\n                            cardLength = cards.length + cardLength;\n                        }\n                    }\n                    itemCount.innerHTML = '-' + cardLength + '' + _this.parent.localeObj.getConstant('items');\n                }\n            }\n        });\n        if (this.parent.swimlaneSettings.keyField) {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.SWIMLANE_ROW_CLASS));\n            swimlaneRows.forEach(function (swimlane) {\n                var swimlaneKey = swimlane.getAttribute('data-key');\n                var itemCount = swimlane.querySelector(\".\" + cls.CARD_ITEM_COUNT_CLASS);\n                if (itemCount && swimlaneKey) {\n                    var cards = [].slice.call(swimlane.nextElementSibling.querySelectorAll('.' + cls.CARD_CLASS));\n                    itemCount.innerHTML = '-' + cards.length + '' + _this.parent.localeObj.getConstant('items');\n                }\n            });\n        }\n        this.refreshValidation();\n    };\n    LayoutRender.prototype.updateScrollPosition = function () {\n        var _this = this;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            if (!Browser.isIE) {\n                content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);\n            }\n            else {\n                content.scrollTop = this.parent.scrollPosition.content.top;\n                content.scrollLeft = this.parent.scrollPosition.content.left;\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (wrapper.offsetParent) {\n                var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')];\n                if (scrollData) {\n                    if (!Browser.isIE) {\n                        wrapper.scrollTo(scrollData.left, scrollData.top);\n                    }\n                    else {\n                        wrapper.scrollTop = scrollData.top;\n                        wrapper.scrollLeft = scrollData.left;\n                    }\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.renderCardBasedOnIndex = function (data, index) {\n        var _this = this;\n        var key = data[this.parent.keyField];\n        var cardRow = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row)');\n        if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n            var rowSelector = \".e-content-row.e-swimlane-row[data-key=\\\"\" + data[this.parent.swimlaneSettings.keyField] + \"\\\"]\";\n            if (this.parent.element.querySelector(rowSelector)) {\n                cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n            }\n            else {\n                var columnIndex = this.columnKeys.indexOf(key);\n                if (columnIndex !== -1 && this.parent.actionModule.hideColumnKeys.indexOf(key) === -1) {\n                    var index_1 = this.kanbanRows.findIndex(function (rowData) { return rowData['keyField'] === data[_this.parent.swimlaneSettings.keyField]; });\n                    var swim = [].slice.call(this.parent.element.querySelectorAll('.e-swimlane-row'));\n                    var swimRow = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n                    if (swim[index_1]) {\n                        swimRow = swim[index_1];\n                    }\n                    this.renderSwimlaneRow(swimRow, this.kanbanRows[index_1], false);\n                    this.renderSingleContent(swimRow, this.kanbanRows[index_1], false);\n                }\n                cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n                [].slice.call(cardRow.children).forEach(function (cell) {\n                    var cardWrapper = createElement('div', { className: cls.CARD_WRAPPER_CLASS });\n                    cell.appendChild(cardWrapper);\n                    cardWrapper.appendChild(_this.renderEmptyCard());\n                });\n            }\n        }\n        if (this.parent.sortSettings.sortBy !== 'Index') {\n            var field_1 = this.parent.cardSettings.headerField;\n            if (this.parent.sortSettings.sortBy === 'Custom') {\n                field_1 = this.parent.sortSettings.field;\n            }\n            if (isNoU(this.parent.swimlaneSettings.keyField)) {\n                index = this.getColumnData(key, this.parent.kanbanData).findIndex(function (colData) {\n                    return colData[\"\" + field_1] === data[\"\" + field_1];\n                });\n            }\n            else {\n                var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);\n                index = this.getColumnData(key, swimlaneDatas).findIndex(function (colData) { return colData[\"\" + field_1] === data[\"\" + field_1]; });\n            }\n        }\n        else if (this.parent.sortSettings.sortBy === 'Index' &&\n            this.parent.sortSettings.field && this.parent.sortSettings.direction === 'Ascending') {\n            index = data[this.parent.sortSettings.field] - 1;\n        }\n        if (cardRow) {\n            var td = [].slice.call(cardRow.children).filter(function (e) {\n                return e.getAttribute('data-key').replace(/\\s/g, '').split(',').indexOf(key.toString().replace(/\\s/g, '')) !== -1;\n            })[0];\n            var cardWrapper_2 = td.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n            var emptyCard = cardWrapper_2.querySelector('.' + cls.EMPTY_CARD_CLASS);\n            if (emptyCard) {\n                remove(emptyCard);\n            }\n            var cardElement_1 = this.renderCard(data);\n            if (this.parent.allowDragAndDrop && td.classList.contains(cls.DRAG_CLASS)) {\n                this.parent.dragAndDropModule.wireDragEvents(cardElement_1);\n                addClass([cardElement_1], cls.DROPPABLE_CLASS);\n            }\n            var args = { data: data, element: cardElement_1, cancel: false };\n            this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                if (!cardArgs.cancel) {\n                    if (isNoU(index) || cardWrapper_2.children.length === 0) {\n                        cardWrapper_2.appendChild(cardElement_1);\n                    }\n                    else {\n                        cardWrapper_2.insertBefore(cardElement_1, cardWrapper_2.childNodes[index]);\n                    }\n                }\n            });\n        }\n    };\n    LayoutRender.prototype.removeCard = function (data) {\n        var cardKey = data[this.parent.cardSettings.headerField];\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + cardKey + \"\\\"]\");\n        this.isSelectedCard = cardElement.classList.contains(cls.CARD_SELECTION_CLASS) ? true : false;\n        var cardContainer = cardElement.parentElement;\n        if (cardElement) {\n            remove(cardElement);\n        }\n        if (cardContainer.querySelectorAll('.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')').length === 0) {\n            cardContainer.appendChild(this.renderEmptyCard());\n        }\n    };\n    LayoutRender.prototype.wireEvents = function () {\n        var _this = this;\n        EventHandler.add(this.parent.element, 'click', this.parent.actionModule.clickHandler, this.parent.actionModule);\n        EventHandler.add(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler, this.parent.actionModule);\n        EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        EventHandler.add(content, 'scroll', this.onContentScroll, this);\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (_this.parent.isInitialRender && wrapper.offsetParent) {\n                _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')] = { left: 0, top: 0 };\n            }\n            EventHandler.add(wrapper, 'scroll', _this.onColumnScroll, _this);\n        });\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.wireTouchEvents();\n            content.scrollLeft = this.scrollLeft;\n        }\n        this.wireDragEvent();\n    };\n    LayoutRender.prototype.unWireEvents = function () {\n        var _this = this;\n        EventHandler.remove(this.parent.element, 'click', this.parent.actionModule.clickHandler);\n        EventHandler.remove(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler);\n        EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            EventHandler.remove(content, 'scroll', this.onContentScroll);\n            if (this.parent.allowDragAndDrop) {\n                this.unWireDragEvent();\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        if (cardWrapper.length > 0) {\n            cardWrapper.forEach(function (wrapper) { EventHandler.remove(wrapper, 'scroll', _this.onColumnScroll); });\n        }\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.unWireTouchEvents();\n        }\n    };\n    LayoutRender.prototype.wireDragEvent = function () {\n        var _this = this;\n        if (this.parent.allowDragAndDrop) {\n            var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n                + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n            addClass(cards, cls.DROPPABLE_CLASS);\n            cards.forEach(function (card) { return _this.parent.dragAndDropModule.wireDragEvents(card); });\n        }\n    };\n    LayoutRender.prototype.unWireDragEvent = function () {\n        var _this = this;\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n        removeClass(cards, cls.DROPPABLE_CLASS);\n        cards.forEach(function (card) { return _this.parent.dragAndDropModule.unWireDragEvents(card); });\n    };\n    LayoutRender.prototype.destroy = function () {\n        this.parent.resetTemplates();\n        this.parent.off(events.dataReady, this.initRender);\n        this.parent.off(events.contentReady, this.scrollUiUpdate);\n        this.unWireEvents();\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        if (header) {\n            remove(header);\n        }\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            remove(content);\n        }\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n        }\n        var swimlaneToolBarEle = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n        if (swimlaneToolBarEle) {\n            remove(swimlaneToolBarEle);\n        }\n        var swimlaneContent = this.parent.element.querySelector('.' + cls.SWIMLANE_CONTENT_CLASS);\n        if (swimlaneContent) {\n            remove(swimlaneContent);\n        }\n    };\n    return LayoutRender;\n}(MobileLayout));\nexport { LayoutRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, formatUnit, EventHandler, addClass, remove, extend, Browser, isNullOrUndefined as isNoU, removeClass, closest, detach, debounce } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, UrlAdaptor, Predicate } from '@syncfusion/ej2-data';\nimport { MobileLayout } from './mobile-layout';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban layout rendering module\n *\n */\nvar VirtualLayoutRender = /** @class */ (function (_super) {\n    __extends(VirtualLayoutRender, _super);\n    function VirtualLayoutRender(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.parent = parent;\n        _this.kanbanRows = [];\n        _this.scrollStatus = {};\n        _this.offsets = {};\n        _this.tempOffsets = {};\n        _this.offsetKeys = [];\n        _this.columnKeys = [];\n        _this.scrollLeft = 0;\n        _this.frozenOrder = 0;\n        _this.winResize = _this.windowResize.bind(_this);\n        if (_this.parent.enableVirtualization) {\n            _this.parent.on(events.dataReady, _this.initRender, _this);\n            _this.parent.on(events.contentReady, _this.scrollUiUpdate, _this);\n        }\n        return _this;\n    }\n    VirtualLayoutRender.prototype.initRender = function () {\n        this.isSwimlane = !isNoU(this.parent.swimlaneSettings.keyField) &&\n            this.parent.swimlaneSettings.keyField.trim().length > 1 ? true : false;\n        this.query = this.parent.query instanceof Query ? this.parent.query : new Query();\n        if (this.parent.columns.length === 0) {\n            return;\n        }\n        this.cardHeight = this.cardHeightCalculate();\n        this.columnData = this.getColumnCards();\n        this.kanbanRows = this.getRows();\n        if (this.parent.isAdaptive) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n            if (parent_1) {\n                this.scrollLeft = parent_1.scrollLeft;\n            }\n        }\n        this.destroy();\n        this.parent.on(events.dataReady, this.initRender, this);\n        this.parent.on(events.contentReady, this.scrollUiUpdate, this);\n        var header = createElement('div', { className: cls.HEADER_CLASS });\n        this.parent.element.appendChild(header);\n        this.renderHeader(header);\n        if (!this.isSwimlane) {\n            this.renderContent();\n            this.renderCards();\n        }\n        this.renderValidation();\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.wireEvents();\n        if (this.parent.isInitialRender) {\n            this.parent.isInitialRender = false;\n        }\n    };\n    VirtualLayoutRender.prototype.cardHeightCalculate = function () {\n        var cardHeight;\n        if (this.parent.cardHeight === 'auto') {\n            cardHeight = 100 + 8; // 8 is the margin bottom value of the card.\n        }\n        else {\n            cardHeight = parseInt(formatUnit(this.parent.cardHeight).split('px')[0], 10) + 8;\n        }\n        return cardHeight;\n    };\n    VirtualLayoutRender.prototype.renderHeader = function (header) {\n        var headerWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        header.appendChild(headerWrap);\n        var headerTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.HEADER_TABLE_CLASS,\n            attrs: { 'role': 'presentation' }\n        });\n        headerWrap.appendChild(headerTable);\n        this.renderColGroup(headerTable);\n        var tableHead = createElement('thead');\n        headerTable.appendChild(tableHead);\n        if (this.parent.stackedHeaders.length > 0) {\n            tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));\n        }\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        tableHead.appendChild(tr);\n        var _loop_1 = function (column) {\n            if (this_1.isColumnVisible(column)) {\n                var index = this_1.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var th_1 = createElement('th', {\n                    className: index === -1 ? cls.HEADER_CELLS_CLASS : cls.HEADER_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString() }\n                });\n                var classList = [];\n                if (column.allowToggle) {\n                    classList.push(cls.HEADER_ROW_TOGGLE_CLASS);\n                    if (!column.isExpanded) {\n                        classList.push(cls.COLLAPSED_CLASS);\n                    }\n                }\n                addClass([th_1], classList);\n                var headerWrapper = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n                th_1.appendChild(headerWrapper);\n                var noOfCard = this_1.parent.dataModule.isRemote() ?\n                    this_1.parent.columnDataCount[column.keyField] : this_1.columnData[column.keyField].length;\n                var headerTitle = createElement('div', { className: cls.HEADER_TITLE_CLASS });\n                headerWrapper.appendChild(headerTitle);\n                if (column.template) {\n                    var templateArgs = {\n                        keyField: column.keyField, headerText: column.headerText, minCount: column.minCount, maxCount: column.maxCount,\n                        allowToggle: column.allowToggle, isExpanded: column.isExpanded, showItemCount: column.showItemCount, count: noOfCard\n                    };\n                    addClass([th_1], cls.TEMPLATE_CLASS);\n                    var templateId = this_1.parent.element.id + '_columnTemplate';\n                    var templateHeader = this_1.parent.templateParser(column.template)(templateArgs, this_1.parent, 'columnTemplate', templateId, false);\n                    append(templateHeader, headerTitle);\n                }\n                else {\n                    var header_1 = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: column.headerText });\n                    headerTitle.appendChild(header_1);\n                    if (column.showItemCount) {\n                        var itemCount = createElement('div', {\n                            className: cls.CARD_ITEM_COUNT_CLASS,\n                            innerHTML: '- ' + noOfCard.toString() + ' ' + this_1.parent.localeObj.getConstant('items')\n                        });\n                        headerTitle.appendChild(itemCount);\n                    }\n                }\n                if (column.allowToggle) {\n                    var isExpand = (column.isExpanded && index === -1) ? true : false;\n                    var name_1 = (isExpand) ? cls.COLUMN_EXPAND_CLASS : cls.COLUMN_COLLAPSE_CLASS;\n                    var icon = createElement('div', {\n                        className: cls.HEADER_ICON_CLASS + ' ' + cls.ICON_CLASS + ' ' + name_1,\n                        attrs: { 'tabindex': '0' }\n                    });\n                    icon.setAttribute('aria-label', isExpand ? column.keyField + ' Expand' : column.keyField + ' Collapse');\n                    th_1.setAttribute('aria-expanded', isExpand.toString());\n                    headerWrapper.appendChild(icon);\n                }\n                var dataObj = [{ keyField: column.keyField, textField: column.headerText, count: noOfCard }];\n                var args = { data: dataObj, element: tr, cancel: false, requestType: 'headerRow' };\n                this_1.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n                    if (!columnArgs.cancel) {\n                        tr.appendChild(th_1);\n                    }\n                });\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            _loop_1(column);\n        }\n    };\n    VirtualLayoutRender.prototype.renderContent = function () {\n        var content = createElement('div', { className: cls.CONTENT_CLASS });\n        this.parent.element.appendChild(content);\n        var contentWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        content.appendChild(contentWrap);\n        var contentTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.CONTENT_TABLE_CLASS,\n            attrs: { 'role': 'presentation' }\n        });\n        contentWrap.appendChild(contentTable);\n        this.renderColGroup(contentTable);\n        var tBody = createElement('tbody');\n        contentTable.appendChild(tBody);\n        var isCollaspsed = false;\n        for (var _i = 0, _a = this.kanbanRows; _i < _a.length; _i++) {\n            var row = _a[_i];\n            if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {\n                var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);\n                isCollaspsed = index !== -1;\n            }\n            this.renderSingleContent(tBody, row, isCollaspsed);\n        }\n    };\n    VirtualLayoutRender.prototype.renderSingleContent = function (tBody, row, isCollaspsed) {\n        var className = isCollaspsed ? cls.CONTENT_ROW_CLASS + ' ' + cls.COLLAPSED_CLASS : cls.CONTENT_ROW_CLASS;\n        var tr = createElement('tr', { className: className, attrs: { 'aria-expanded': 'true' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (this.isColumnVisible(column)) {\n                var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var className_1 = index === -1 ? cls.CONTENT_CELLS_CLASS : cls.CONTENT_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS;\n                var dragClass = (column.allowDrag ? ' ' + cls.DRAG_CLASS : '') + (column.allowDrop ? ' ' + cls.DROP_CLASS\n                    + ' ' + cls.DROPPABLE_CLASS : '');\n                var td = createElement('td', {\n                    className: className_1 + dragClass,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'aria-expanded': 'true',\n                        'tabindex': '0', 'role': 'navigation' }\n                });\n                if (column.allowToggle && !column.isExpanded || index !== -1) {\n                    addClass([td], cls.COLLAPSED_CLASS);\n                    var text = (column.showItemCount ? '[' + (this.parent.dataModule.isRemote() ?\n                        this.parent.columnDataCount[column.keyField] : this.getColumnData(column.keyField).length) +\n                        '] ' : '') + column.headerText;\n                    td.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                    td.setAttribute('aria-expanded', 'false');\n                }\n                if (column.showAddButton) {\n                    var button = createElement('div', { className: cls.SHOW_ADD_BUTTON, attrs: { 'tabindex': '-1' } });\n                    button.appendChild(createElement('div', { className: cls.SHOW_ADD_ICON + ' ' + cls.ICON_CLASS }));\n                    td.appendChild(button);\n                }\n                tr.appendChild(td);\n                if (this.parent.enableVirtualization) {\n                    var headerHeight = this.parent.element.querySelector('.e-kanban-header').getBoundingClientRect().height;\n                    //'15' is reduced for optimal padding in the bottom and to avoid page scrollbar appear in the height auto case.\n                    if (this.parent.height === 'auto') {\n                        td.style.height = window.innerHeight - (headerHeight + this.parent.element.getBoundingClientRect().top + 15) + 'px';\n                    }\n                    else {\n                        td.style.height = parseInt(formatUnit(this.parent.height).split('px')[0], 10) - (headerHeight + 15) + 'px';\n                    }\n                }\n            }\n        }\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'contentRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.windowResize = function () {\n        var cloumnsTDElem = this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS);\n        var headerHeight = this.parent.element.querySelector('.e-kanban-header').getBoundingClientRect().height;\n        for (var j = 0; j < cloumnsTDElem.length; j++) {\n            if (this.parent.height === 'auto') {\n                cloumnsTDElem[j].style.height = window.innerHeight - (headerHeight + this.parent.element.getBoundingClientRect().top + 15) + 'px';\n            }\n            else {\n                cloumnsTDElem[j].style.height = parseInt(formatUnit(this.parent.height).split('px')[0], 10) - (headerHeight + 15) + 'px';\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.refreshColumnData = function (draggedColumnKey, droppedColumnKey, requestType, crudKeyField) {\n        var _this = this;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var isCRUD = (requestType === 'cardChanged' || requestType === 'cardCreated' || requestType === 'cardRemoved')\n            && !isNoU(crudKeyField);\n        cardRows.forEach(function (tr) {\n            var _loop_2 = function (column) {\n                if (_this.isColumnVisible(column) && (column.keyField === draggedColumnKey || column.keyField === droppedColumnKey)\n                    || isCRUD) {\n                    var cards_1 = 0;\n                    var blocks = [];\n                    var columnData = _this.getColumnCards()[column.keyField];\n                    var currentColumnDataCount = _this.parent.dataModule.isRemote() ?\n                        _this.parent.columnDataCount[column.keyField] : columnData.length;\n                    var overallHeight = _this.cardHeight * currentColumnDataCount;\n                    // eslint-disable-next-line prefer-spread\n                    blocks = Array.apply(null, Array(currentColumnDataCount)).map(function () { return ++cards_1; });\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var singleIndexCardCount = Math.ceil(parseInt(columnWrapper.style.height.split('px')[0], 10) / _this.cardHeight);\n                    _this.offsets[1] = singleIndexCardCount * _this.cardHeight;\n                    for (var i = 1; i < blocks.length; i++) {\n                        _this.offsets[blocks[i]] = (_this.offsets[blocks[i - 1]]) + (singleIndexCardCount * _this.cardHeight);\n                        _this.tempOffsets[blocks[i]] = _this.offsets[blocks[i] - 1] | 0;\n                    }\n                    var cardWrapper = columnWrapper.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                    var maxBlock = currentColumnDataCount % 2 === 0 ? currentColumnDataCount - 2 : currentColumnDataCount - 1;\n                    var viewInfo = _this.getInfoFromView(_this.scrollStatus[column.keyField]);\n                    var transformY = _this.getTranslateY(viewInfo);\n                    var cardVirtualElement = cardWrapper.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n                    cardVirtualElement.style.maxHeight = currentColumnDataCount * _this.cardHeight + 'px';\n                    _this.setPadding(transformY, cardVirtualElement, currentColumnDataCount);\n                    _this.currentStatus = {\n                        column: column.keyField,\n                        columnOverAllHeight: overallHeight,\n                        columnHeight: parseInt(columnWrapper.style.height.split('px')[0], 10),\n                        previousScrollTop: _this.scrollStatus[column.keyField].currentScrollTop,\n                        currentScrollTop: cardWrapper.scrollTop,\n                        scrollDirection: _this.scrollStatus[column.keyField].scrollDirection,\n                        currentBlockIndex: _this.scrollStatus[column.keyField].currentBlockIndex,\n                        oldBlockIndex: _this.scrollStatus[column.keyField].oldBlockIndex,\n                        offsets: _this.offsets,\n                        tempOffsets: _this.tempOffsets,\n                        totalColumnData: currentColumnDataCount,\n                        singleIndexCardCount: singleIndexCardCount,\n                        maxBlock: maxBlock\n                    };\n                    _this.scrollStatus[column.keyField] = _this.currentStatus;\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_2(column);\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.renderCards = function () {\n        var _this = this;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row'));\n        var removeTrs = [];\n        var columnTransition = false;\n        cardRows.forEach(function (tr, index) {\n            var dataCount = 0;\n            var _loop_3 = function (column) {\n                if (_this.isColumnVisible(column)) {\n                    var cards_2 = 0;\n                    var currentScrollIndex = 0;\n                    var blocks = [];\n                    _this.offsets = {};\n                    _this.tempOffsets = {};\n                    var columnData = _this.columnData[column.keyField];\n                    var currentColumnDataCount = _this.parent.dataModule.isRemote()\n                        ? _this.parent.columnDataCount[column.keyField] : columnData.length;\n                    dataCount += currentColumnDataCount;\n                    var overallHeight = (_this.cardHeight * currentColumnDataCount) + 7; //7 is difference between top space of the scroll element\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var singleIndexCardCount = Math.ceil(parseFloat(columnWrapper.style.height.split('px')[0]) / _this.cardHeight);\n                    var currentColumnBlock = singleIndexCardCount > currentColumnDataCount ? currentColumnDataCount :\n                        Math.floor(currentColumnDataCount / singleIndexCardCount);\n                    // eslint-disable-next-line prefer-spread\n                    blocks = Array.apply(null, Array(currentColumnDataCount)).map(function () { return ++cards_2; });\n                    _this.offsets[1] = singleIndexCardCount * _this.cardHeight + 7;\n                    for (var i = 1; i < blocks.length; i++) {\n                        _this.offsets[blocks[i]] = (_this.offsets[blocks[i - 1]]) + (singleIndexCardCount * _this.cardHeight);\n                        _this.tempOffsets[blocks[i]] = _this.offsets[blocks[i] - 1] | 0;\n                    }\n                    var cardWrapper = createElement('div', {\n                        className: cls.CARD_WRAPPER_CLASS, attrs: { 'role': 'listbox' }\n                    });\n                    var cardVirtualWrapper_1 = createElement('div', {\n                        className: cls.CARD_VIRTUAL_WRAPPER_CLASS, attrs: { 'role': 'listbox' }\n                    });\n                    cardWrapper.appendChild(cardVirtualWrapper_1);\n                    var maxBlock = currentColumnBlock % 2 === 0 ? currentColumnBlock : currentColumnBlock + 1;\n                    _this.currentStatus = {\n                        column: column.keyField,\n                        columnOverAllHeight: overallHeight,\n                        columnHeight: parseInt(columnWrapper.style.height.split('px')[0], 10),\n                        previousScrollTop: null,\n                        currentScrollTop: cardWrapper.scrollTop,\n                        scrollDirection: null,\n                        currentBlockIndex: [1, 2],\n                        oldBlockIndex: [1, 2],\n                        offsets: _this.offsets,\n                        tempOffsets: _this.tempOffsets,\n                        totalColumnData: currentColumnDataCount,\n                        singleIndexCardCount: singleIndexCardCount,\n                        maxBlock: maxBlock\n                    };\n                    _this.scrollStatus[column.keyField] = _this.currentStatus;\n                    if (column.transitionColumns.length > 0) {\n                        columnTransition = true;\n                    }\n                    if (!columnTransition && isNoU(_this.parent.swimlaneSettings.keyField)) {\n                        var borderElem = createElement('div', { className: cls.BORDER_CLASS });\n                        columnWrapper.appendChild(borderElem);\n                    }\n                    columnWrapper.appendChild(cardWrapper);\n                    if (currentColumnDataCount > 0) {\n                        var _loop_4 = function (i) {\n                            var cardText = columnData[i][_this.parent.cardSettings.headerField];\n                            var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);\n                            var cardElement = _this.renderCard(columnData[i]);\n                            if (cardIndex !== -1) {\n                                cardElement.setAttribute('aria-selected', 'true');\n                                addClass([cardElement], cls.CARD_SELECTION_CLASS);\n                            }\n                            var args = { data: columnData[i], element: cardElement, cancel: false };\n                            _this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                                if (!cardArgs.cancel) {\n                                    cardVirtualWrapper_1.appendChild(cardElement);\n                                }\n                            });\n                        };\n                        for (var i = currentScrollIndex; i < singleIndexCardCount * 2 && i < columnData.length; i++) {\n                            _loop_4(i);\n                        }\n                        cardVirtualWrapper_1.style.maxHeight = _this.cardHeight * currentColumnDataCount + 'px';\n                    }\n                    else {\n                        cardVirtualWrapper_1.appendChild(_this.renderEmptyCard());\n                    }\n                    _this.setPadding(0, cardVirtualWrapper_1, currentColumnDataCount);\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_3(column);\n            }\n            if (dataCount === 0) {\n                removeTrs.push(tr);\n                if (swimlaneRows.length > 0) {\n                    removeTrs.push(swimlaneRows[index]);\n                }\n            }\n        });\n        if (!this.parent.swimlaneSettings.showEmptyRow && (this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn)) {\n            removeTrs.forEach(function (tr) { return remove(tr); });\n        }\n    };\n    VirtualLayoutRender.prototype.renderCard = function (data) {\n        var cardElement = createElement('div', {\n            className: cls.CARD_CLASS,\n            attrs: {\n                'data-id': data[this.parent.cardSettings.headerField], 'data-key': data[this.parent.keyField],\n                'aria-selected': 'false', 'tabindex': '-1', 'role': 'option'\n            }\n        });\n        cardElement.style.height = this.cardHeight - 8 + 'px'; // Since in the public card height calculation margin bottom is added, so it reduced here.\n        if (this.parent.cardSettings.template) {\n            addClass([cardElement], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_cardTemplate';\n            var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, 'cardTemplate', templateId, false);\n            append(cardTemplate, cardElement);\n        }\n        else {\n            var tooltipClass = this.parent.enableTooltip ? ' ' + cls.TOOLTIP_TEXT_CLASS : '';\n            if (this.parent.cardSettings.showHeader) {\n                var cardHeader = createElement('div', { className: cls.CARD_HEADER_CLASS });\n                var cardCaption = createElement('div', { className: cls.CARD_HEADER_TEXT_CLASS });\n                var cardText = createElement('div', {\n                    className: cls.CARD_HEADER_TITLE_CLASS + tooltipClass,\n                    innerHTML: data[this.parent.cardSettings.headerField] || ''\n                });\n                cardHeader.appendChild(cardCaption);\n                cardCaption.appendChild(cardText);\n                cardElement.appendChild(cardHeader);\n            }\n            var cardContent = createElement('div', {\n                className: cls.CARD_CONTENT_CLASS + tooltipClass,\n                innerHTML: data[this.parent.cardSettings.contentField] || ''\n            });\n            cardElement.appendChild(cardContent);\n            if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {\n                var cardTags = createElement('div', { className: cls.CARD_TAGS_CLASS });\n                var tags = data[this.parent.cardSettings.tagsField].toString().split(',');\n                for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n                    var tag = tags_1[_i];\n                    cardTags.appendChild(createElement('div', {\n                        className: cls.CARD_TAG_CLASS + ' ' + cls.CARD_LABEL_CLASS, innerHTML: tag\n                    }));\n                }\n                cardElement.appendChild(cardTags);\n            }\n            if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {\n                addClass([cardElement], cls.CARD_COLOR_CLASS);\n                cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];\n            }\n            if (this.parent.cardSettings.footerCssField) {\n                var cardFields = createElement('div', { className: cls.CARD_FOOTER_CLASS });\n                var keys = data[this.parent.cardSettings.footerCssField].split(',');\n                for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n                    var key = keys_1[_a];\n                    cardFields.appendChild(createElement('div', {\n                        className: key.trim() + ' ' + cls.CARD_FOOTER_CSS_CLASS\n                    }));\n                }\n                cardElement.appendChild(cardFields);\n            }\n        }\n        return cardElement;\n    };\n    VirtualLayoutRender.prototype.renderEmptyCard = function () {\n        var emptyCard = createElement('span', {\n            className: cls.EMPTY_CARD_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noCard')\n        });\n        return emptyCard;\n    };\n    VirtualLayoutRender.prototype.renderColGroup = function (table) {\n        var _this = this;\n        var colGroup = createElement('colgroup');\n        this.parent.columns.forEach(function (column) {\n            if (_this.isColumnVisible(column)) {\n                var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var isToggle = column.allowToggle && !column.isExpanded;\n                var className = index === -1 ? (isToggle ? cls.COLLAPSED_CLASS : '') : cls.COLLAPSED_CLASS;\n                var col = createElement('col', {\n                    className: className,\n                    attrs: { 'data-key': column.keyField.toString() },\n                    styles: _this.parent.isAdaptive ? 'width: ' +\n                        (isToggle ? formatUnit(events.toggleWidth) : formatUnit(_this.getWidth())) : ''\n                });\n                colGroup.appendChild(col);\n            }\n        });\n        table.appendChild(colGroup);\n    };\n    VirtualLayoutRender.prototype.getRows = function () {\n        var kanbanRows = [];\n        kanbanRows.push({ keyField: '', textField: '' });\n        return kanbanRows;\n    };\n    VirtualLayoutRender.prototype.createStackedRow = function (rows) {\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS + ' ' + cls.STACKED_HEADER_ROW_CLASS });\n        var stackedHeaders = [];\n        this.parent.columns.forEach(function (column) {\n            var headerText = '';\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {\n                    headerText = row.text;\n                }\n            }\n            stackedHeaders.push(headerText);\n        });\n        for (var h = 0; h < stackedHeaders.length; h++) {\n            var colSpan = 1;\n            for (var j = h + 1; j < stackedHeaders.length; j++) {\n                if ((stackedHeaders[h] !== '') && (stackedHeaders[j] !== '') && stackedHeaders[h] === stackedHeaders[j]) {\n                    colSpan++;\n                }\n                else {\n                    break;\n                }\n            }\n            var div = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: stackedHeaders[h] });\n            var th = createElement('th', {\n                className: cls.HEADER_CELLS_CLASS + ' ' + cls.STACKED_HEADER_CELL_CLASS,\n                attrs: { 'colspan': colSpan.toString() }\n            });\n            tr.appendChild(th).appendChild(div);\n            h += colSpan - 1;\n        }\n        return tr;\n    };\n    VirtualLayoutRender.prototype.scrollUiUpdate = function () {\n        var _this = this;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        var height = this.parent.element.offsetHeight - header.offsetHeight;\n        if (this.parent.isAdaptive) {\n            height = window.innerHeight - (header.offsetHeight + events.bottomSpace);\n            var swimlaneToolbar = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n            if (swimlaneToolbar) {\n                height -= swimlaneToolbar.offsetHeight;\n            }\n            var cardWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n            cardWrappers.forEach(function (cell) {\n                var cardWrapper = cell.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                if (!cardWrapper.classList.contains(cls.MULTI_CARD_WRAPPER_CLASS)) {\n                    cardWrapper.style.height = formatUnit(height);\n                    EventHandler.add(cell, 'touchmove', _this.onAdaptiveScroll, _this);\n                }\n            });\n        }\n        if (this.parent.height !== 'auto' && this.parent.height !== '100%') {\n            content.style.height = formatUnit(height);\n        }\n        [].slice.call(header.children).forEach(function (node) {\n            var paddingValue = 0;\n            if ((content.offsetWidth - content.clientWidth) > 0) {\n                paddingValue = 17;\n                if ((content.offsetHeight - content.clientHeight) > 0) {\n                    node.style.width = formatUnit(content.clientWidth);\n                }\n            }\n            if (_this.parent.enableRtl) {\n                node.style.paddingLeft = formatUnit(paddingValue);\n            }\n            else {\n                node.style.paddingRight = formatUnit(paddingValue);\n            }\n        });\n        this.updateScrollPosition();\n    };\n    VirtualLayoutRender.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (node) { node.scrollLeft = target.scrollLeft; });\n        this.parent.scrollPosition.content = { left: target.scrollLeft, top: target.scrollTop };\n    };\n    VirtualLayoutRender.prototype.getOffset = function (block, viewInfo) {\n        return Math.min(viewInfo.offsets[block] | 0, viewInfo.offsets[viewInfo.maxBlock] | 0);\n    };\n    VirtualLayoutRender.prototype.getTranslateY = function (viewInfo) {\n        var block = (viewInfo.newBlockIndex[0] || 1) - 1;\n        var translate = this.getOffset(block, viewInfo);\n        var endTranslate = this.getOffset(viewInfo.newBlockIndex[viewInfo.newBlockIndex.length - 1], viewInfo);\n        var result = translate > viewInfo.currentScrollTop ?\n            this.getOffset(block - 1, viewInfo) : endTranslate < (viewInfo.currentScrollTop + viewInfo.columnHeight) ?\n            this.getOffset(block + 1, viewInfo) : translate;\n        return result;\n    };\n    VirtualLayoutRender.prototype.setPadding = function (paddingTop, scrollElem, dataCount, isScrolledToLast, direction) {\n        if (isScrolledToLast && direction === 'down') {\n            scrollElem.style.paddingTop = paddingTop + \"px\";\n            scrollElem.style.paddingBottom = '0px';\n        }\n        else {\n            scrollElem.style.paddingTop = paddingTop + \"px\";\n            scrollElem.style.paddingBottom = this.cardHeight * dataCount - paddingTop + \"px\";\n        }\n    };\n    VirtualLayoutRender.prototype.getData = function (keyField, column, take, skip) {\n        var query = this.query.clone();\n        var predicate = new Predicate(keyField, 'equal', column, true);\n        query.where(predicate);\n        query.take(take);\n        query.skip(skip);\n        query.addParams('KanbanVirtualScroll', 'KanbanVirtualScroll');\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise({ requestType: '' }, query);\n            return def.promise;\n        }\n        return this.parent.dataModule.dataManager.executeQuery(query);\n    };\n    VirtualLayoutRender.prototype.eventPromise = function (args, query) {\n        var state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        state.updateData = def.resolve;\n        state.action = args;\n        return def;\n    };\n    VirtualLayoutRender.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    VirtualLayoutRender.prototype.dataManagerSuccess = function (e, type) {\n        var _this = this;\n        var resultData;\n        if (type) {\n            resultData = extend([], !isNoU(e.result.result) ?\n                e.result.result : e.result, null, true);\n        }\n        else {\n            this.parent.trigger(events.dataBinding, e, function (args) {\n                resultData = extend([], !isNoU(args.result.result) ?\n                    args.result.result : args.result, null, true);\n                _this.parent.trigger(events.dataBound, null, function () { return _this.parent.hideSpinner(); });\n            });\n        }\n        return resultData;\n    };\n    VirtualLayoutRender.prototype.dataManagerFailure = function (e) {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.actionFailure, { error: e }, function () { return _this.parent.hideSpinner(); });\n    };\n    VirtualLayoutRender.prototype.onColScrollShowSkeleton = function (args) {\n        var target = args.target;\n        if (this.parent.element.querySelectorAll('.e-card-skeleton-wrapper').length > 0) {\n            return;\n        }\n        var key = target.parentElement.getAttribute('data-key');\n        var previousScrollTop = this.scrollStatus[key].previousScrollTop;\n        var parentElemHeight = target.parentElement.clientHeight;\n        if ((target.scrollTop - previousScrollTop) > parentElemHeight || (previousScrollTop - target.scrollTop) > parentElemHeight) {\n            this.showSkeleton(target, this.scrollStatus[key].singleIndexCardCount);\n        }\n    };\n    VirtualLayoutRender.prototype.showSkeleton = function (cardWrapper, skeletonCount) {\n        var cardVirtualSkeletonWrapper = createElement('div', {\n            className: 'e-card-virtual-skeleton-wrapper', attrs: { 'role': 'listbox' }\n        });\n        cardWrapper.parentElement.insertBefore(cardVirtualSkeletonWrapper, cardWrapper);\n        cardVirtualSkeletonWrapper.style.position = 'absolute';\n        cardVirtualSkeletonWrapper.style.zIndex = '10';\n        for (var j = 0; j < skeletonCount; j++) {\n            var skeletonWrapper = createElement('div', { className: 'e-card-skeleton-wrapper' });\n            var skeleton = createElement('span', { className: 'e-skeleton e-skeleton-text e-shimmer-wave' });\n            skeleton.style.height = this.cardHeight + 'px';\n            // Assumption fix, issue reproduce in rare cases only .\n            if (!isNoU(cardWrapper.querySelector('.e-card'))) {\n                skeleton.style.width = cardWrapper.querySelector('.e-card').getBoundingClientRect().width + 'px';\n            }\n            skeletonWrapper.appendChild(skeleton);\n            cardVirtualSkeletonWrapper.appendChild(skeletonWrapper);\n        }\n    };\n    VirtualLayoutRender.prototype.hideSkeleton = function (cardWrapper) {\n        setTimeout(function () {\n            var skeletonWrapper = cardWrapper.querySelectorAll('.e-card-virtual-skeleton-wrapper');\n            for (var i = 0; i < skeletonWrapper.length; i++) {\n                detach(skeletonWrapper[i]);\n            }\n        }, 50);\n    };\n    VirtualLayoutRender.prototype.onColumnScroll = function (e) {\n        var _this = this;\n        var target = e.target;\n        var currentScrolledHeight = target.scrollTop;\n        var columnKey;\n        if (target.offsetParent) {\n            columnKey = target.offsetParent.getAttribute('data-key');\n            this.parent.scrollPosition.column[columnKey] = { left: target.scrollLeft, top: target.scrollTop };\n        }\n        if (this.parent.enableVirtualization) {\n            var cardWrapper_1 = target;\n            var dataCount = 0;\n            var columnData = this.getColumnCards()[columnKey];\n            var currentColumnDataCount = this.parent.dataModule.isRemote() ?\n                this.parent.columnDataCount[columnKey] : columnData.length;\n            dataCount += currentColumnDataCount;\n            var overallHeight = this.cardHeight * dataCount;\n            var removeIndex = [];\n            var addIndex = [];\n            this.checkScrollDirection(columnKey, currentScrolledHeight);\n            if (this.findScrollSpeed(target, columnKey) === 'fast' && currentScrolledHeight > overallHeight) {\n                this.hideSkeleton(cardWrapper_1.parentElement);\n                return;\n            }\n            var maxBlock = this.scrollStatus[columnKey].maxBlock;\n            var isLastBlockRendered = this.scrollStatus[columnKey].currentBlockIndex.indexOf(maxBlock) > -1;\n            var isDuplicateScroll = e.timeStamp - this.scrollStatus[columnKey].previousTimeStamps < 300;\n            if (isLastBlockRendered && !isNoU(this.scrollStatus[columnKey].previousTimeStamps) && isDuplicateScroll) {\n                this.hideSkeleton(cardWrapper_1.parentElement);\n                return;\n            }\n            this.scrollStatus[columnKey].previousTimeStamps = e.timeStamp;\n            var viewInfo_1 = this.getInfoFromView(this.scrollStatus[columnKey]);\n            removeIndex = viewInfo_1.currentBlockIndex.filter(function (val) {\n                return viewInfo_1.newBlockIndex.indexOf(val) === -1;\n            });\n            addIndex = viewInfo_1.newBlockIndex.filter(function (val) {\n                return viewInfo_1.currentBlockIndex.indexOf(val) === -1;\n            });\n            var isScrolledToLast = currentScrolledHeight + target.clientHeight >= overallHeight;\n            var transformY = isScrolledToLast ? overallHeight - (cardWrapper_1.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS).childElementCount * this.cardHeight)\n                : this.getTranslateY(viewInfo_1);\n            var cardVirtualElement_1 = cardWrapper_1.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n            if (removeIndex.length > 0) {\n                var removeStartIndex = void 0;\n                var removeEndIndex = void 0;\n                if (removeIndex[0] === 1) {\n                    removeStartIndex = 0;\n                    removeEndIndex = (removeIndex.length * this.scrollStatus[columnKey].singleIndexCardCount) - 1;\n                }\n                else {\n                    removeStartIndex = ((removeIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount);\n                    removeEndIndex = removeStartIndex + (removeIndex.length * this.scrollStatus[columnKey].singleIndexCardCount);\n                }\n                this.removeCardsOnScroll(cardVirtualElement_1, this.scrollStatus[columnKey].scrollDirection === 'down' ? true : false, removeStartIndex, removeEndIndex);\n            }\n            if (addIndex.length > 0) {\n                if (this.parent.dataModule.isRemote()) {\n                    var visibleStartIndex = ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount);\n                    var resultData_1 = [];\n                    var dataManager = this.getData(this.parent.keyField, columnKey, (this.scrollStatus[columnKey].singleIndexCardCount * addIndex.length), visibleStartIndex);\n                    dataManager.then(function (e) {\n                        resultData_1 = _this.dataManagerSuccess(e);\n                        _this.scrollCardInsert(columnKey, cardVirtualElement_1, target, currentScrolledHeight, cardWrapper_1, _this.scrollStatus[columnKey].scrollDirection === 'down' ? 0 : (resultData_1.length - 1), true, resultData_1, null);\n                    }).catch(function (e) { return _this.dataManagerFailure(e); });\n                }\n                else {\n                    var visibleStartIndex = this.scrollStatus[columnKey].scrollDirection === 'down' ? ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount) :\n                        ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount)\n                            + (this.scrollStatus[columnKey].singleIndexCardCount * addIndex.length) - 1;\n                    var visibleLength = this.scrollStatus[columnKey].scrollDirection === 'down' ? visibleStartIndex + (this.scrollStatus[columnKey].singleIndexCardCount * addIndex.length) :\n                        ((addIndex[0] - 1) * this.scrollStatus[columnKey].singleIndexCardCount);\n                    this.scrollCardInsert(columnKey, cardVirtualElement_1, target, currentScrolledHeight, cardWrapper_1, visibleStartIndex, false, columnData, visibleLength);\n                }\n            }\n            this.scrollStatus[columnKey].currentBlockIndex = this.scrollStatus[columnKey].newBlockIndex;\n            this.setPadding(transformY, cardVirtualElement_1, currentColumnDataCount, isScrolledToLast, this.scrollStatus[columnKey].scrollDirection);\n            viewInfo_1.currentBlockIndex = viewInfo_1.newBlockIndex;\n            this.parent.renderTemplates();\n            this.hideSkeleton(cardWrapper_1.parentElement);\n        }\n    };\n    VirtualLayoutRender.prototype.checkScrollDirection = function (columnKey, currentScrolledHeight) {\n        // Update the previous and current scroll top value\n        this.scrollStatus[columnKey].previousScrollTop = this.scrollStatus[columnKey].currentScrollTop;\n        this.scrollStatus[columnKey].currentScrollTop = currentScrolledHeight;\n        // Check the scroll direction\n        if (currentScrolledHeight > this.scrollStatus[columnKey].previousScrollTop) {\n            this.scrollStatus[columnKey].scrollDirection = 'down';\n        }\n        else {\n            this.scrollStatus[columnKey].scrollDirection = 'up';\n        }\n    };\n    VirtualLayoutRender.prototype.findScrollSpeed = function (target, columnKey) {\n        // Find the scroll speed\n        if (this.scrollStatus[columnKey].scrollDirection === 'down' &&\n            (target.scrollTop - this.scrollStatus[columnKey].previousScrollTop > target.clientHeight)) {\n            return 'fast';\n        }\n        else if (this.scrollStatus[columnKey].scrollDirection === 'up' &&\n            (this.scrollStatus[columnKey].previousScrollTop - target.scrollTop > target.clientHeight)) {\n            return 'fast';\n        }\n        return 'slow';\n    };\n    VirtualLayoutRender.prototype.removeCardsOnScroll = function (cardVirtualElement, isDown, removeStartIndex, removeEndIndex) {\n        for (var j = removeStartIndex; j < removeEndIndex; j++) {\n            var removableElem = isDown ? cardVirtualElement.firstChild\n                : cardVirtualElement.lastChild;\n            while (!isNoU(removableElem) && (removableElem.classList.contains(cls.DRAGGED_CARD_CLASS) ||\n                removableElem.classList.contains(cls.DRAGGED_CLONE_CLASS) ||\n                removableElem.classList.contains(cls.DROPPED_CLONE_CLASS) ||\n                removableElem.classList.contains(cls.CLONED_CARD_CLASS))) {\n                removableElem = isDown ? removableElem.nextSibling : removableElem.previousSibling;\n            }\n            if (!isNoU(removableElem)) {\n                detach(removableElem);\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.scrollCardInsert = function (columnKey, cardVirtualElement, target, currentScrolledHeight, cardWrapper, startNumber, isRemote, resultData, visibleLength) {\n        var _this = this;\n        var conditonsScrollDownCase = isRemote ? resultData.length : visibleLength;\n        var conditonsScrollUpCase = isRemote ? 0 : visibleLength;\n        if (resultData.length > 0) {\n            var _loop_5 = function (j) {\n                if (!isNoU(resultData[j])) {\n                    var cardText = resultData[j][this_2.parent.cardSettings.headerField];\n                    var cardIndex = this_2.parent.actionModule.selectionArray.indexOf(cardText);\n                    var cardElement_1 = this_2.renderCard(resultData[j]);\n                    if (cardIndex !== -1) {\n                        cardElement_1.setAttribute('aria-selected', 'true');\n                        addClass([cardElement_1], cls.CARD_SELECTION_CLASS);\n                    }\n                    var args = { data: resultData[j], element: cardElement_1, cancel: false };\n                    this_2.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                        if (!cardArgs.cancel) {\n                            if (_this.scrollStatus[columnKey].scrollDirection === 'down') {\n                                cardVirtualElement.appendChild(cardElement_1);\n                            }\n                            else {\n                                cardVirtualElement.insertBefore(cardElement_1, cardVirtualElement.firstChild);\n                            }\n                            _this.parent.dragAndDropModule.wireDragEvents(cardElement_1);\n                            addClass([cardElement_1], cls.DROPPABLE_CLASS);\n                        }\n                    });\n                }\n            };\n            var this_2 = this;\n            for (var j = startNumber; this.scrollStatus[columnKey].scrollDirection === 'down' ? (j < conditonsScrollDownCase) :\n                j >= conditonsScrollUpCase; this.scrollStatus[columnKey].scrollDirection === 'down' ? j++ : j--) {\n                _loop_5(j);\n            }\n            target.scrollTop = currentScrolledHeight;\n        }\n        else {\n            cardWrapper.appendChild(this.renderEmptyCard());\n        }\n    };\n    VirtualLayoutRender.prototype.ensureColumnNotEmpty = function (draggedColumnKey) {\n        var singleIndexCardCount = this.scrollStatus[draggedColumnKey].singleIndexCardCount;\n        var draggedColumnData = this.columnData[draggedColumnKey];\n        var draggedTdColummElement = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row) [data-key=\"' + draggedColumnKey + '\"]');\n        var wrapperELement = draggedTdColummElement.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n        var cardsList = wrapperELement.querySelectorAll('.' + cls.CARD_CLASS);\n        if (cardsList.length > 0) {\n            var lastCardDataId = cardsList[cardsList.length - 1].getAttribute('data-id');\n            var firstCardDataId = cardsList[0].getAttribute('data-id');\n            var lastCardIndex = void 0;\n            var firstCardIndex = void 0;\n            if (cardsList.length < singleIndexCardCount * 2) {\n                for (var i = 0; i < draggedColumnData.length; i++) {\n                    if (lastCardDataId === (draggedColumnData[i][this.parent.cardSettings.headerField]).toString()) {\n                        lastCardIndex = i;\n                    }\n                    if (firstCardDataId === (draggedColumnData[i][this.parent.cardSettings.headerField]).toString()) {\n                        firstCardIndex = i;\n                    }\n                }\n                var cardCount = cardsList.length;\n                for (var i = cardCount; i < singleIndexCardCount * 2; i++) {\n                    var isLast = lastCardIndex === draggedColumnData.length - 1 ? true : false;\n                    var nextCardIndex = lastCardIndex < draggedColumnData.length ? lastCardIndex + 1 : firstCardIndex - 1;\n                    if (nextCardIndex <= draggedColumnData.length) {\n                        var nextCardData = draggedColumnData[nextCardIndex];\n                        if (!isNoU(nextCardData)) {\n                            var nextCard = this.renderCard(nextCardData);\n                            this.triggerCardRendering(nextCard, nextCardIndex, draggedColumnData, wrapperELement, isLast);\n                            if (isLast) {\n                                firstCardIndex = nextCardIndex;\n                            }\n                            else {\n                                lastCardIndex = nextCardIndex;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.triggerCardRendering = function (nextCard, nextCardIndex, draggedColumnData, wrapperELement, isLast) {\n        var _this = this;\n        var cardText = draggedColumnData[nextCardIndex][this.parent.cardSettings.headerField];\n        var cardIndex = this.parent.actionModule.selectionArray.indexOf(cardText);\n        if (cardIndex !== -1) {\n            nextCard.setAttribute('aria-selected', 'true');\n            addClass([nextCard], cls.CARD_SELECTION_CLASS);\n        }\n        var args = { data: draggedColumnData[nextCardIndex], element: nextCard, cancel: false };\n        this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n            if (!cardArgs.cancel) {\n                if (!isLast) {\n                    wrapperELement.appendChild(nextCard);\n                }\n                else {\n                    wrapperELement.insertBefore(nextCard, wrapperELement.querySelectorAll('.' + cls.CARD_CLASS)[0]);\n                }\n                _this.parent.dragAndDropModule.wireDragEvents(nextCard);\n                addClass([nextCard], cls.DROPPABLE_CLASS);\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.ensureBlocks = function (info) {\n        var index = info.newBlockIndex[info.block];\n        var maxPage = Math.ceil(info.totalColumnData / info.singleIndexCardCount);\n        var max = Math.max;\n        var indexes;\n        if (info.scrollDirection === 'down') {\n            indexes = index >= maxPage ? [max(index, 1), --index, --index].reverse() :\n                (index + 1 >= maxPage ? [max(index - 1, 1), index, ++index] :\n                    [max(index, 1), ++index, ++index]);\n        }\n        else {\n            indexes = index === maxPage ? [max(index - 2, 1), max(index - 1, 1), index] :\n                [max(index - 1, 1), index, index + 1];\n        }\n        // eslint-disable-next-line\n        return indexes.filter(function (indexRemoveZero) { return indexRemoveZero > 0; });\n    };\n    VirtualLayoutRender.prototype.getInfoFromView = function (scrollStatus) {\n        var isBlockAdded = false;\n        var infoType = scrollStatus;\n        infoType.page = this.getPageFromTop(scrollStatus);\n        infoType.newBlockIndex = this.getBlockIndexes(infoType.page);\n        var blocks = this.ensureBlocks(infoType);\n        if (infoType.newBlockIndex.toString() !== blocks.toString()) {\n            // To avoid dupilcate row index problem in key focus support\n            var newBlock = blocks[blocks.length - 1];\n            if (infoType.newBlockIndex.indexOf(newBlock) === -1) {\n                isBlockAdded = true;\n            }\n        }\n        infoType.newBlockIndex = isBlockAdded ? blocks : infoType.newBlockIndex;\n        return infoType;\n    };\n    VirtualLayoutRender.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualLayoutRender.prototype.getPageFromTop = function (info) {\n        var _this = this;\n        var total = info.totalColumnData;\n        var page = 0;\n        this.offsetKeys = Object.keys(info.offsets);\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = info.currentScrollTop <= info.offsets[parseInt(offset, 10)]\n                || (iOffset === total && info.currentScrollTop > info.offsets[parseInt(offset, 10)]);\n            if (border) {\n                var maxPage = Math.ceil(total / info.singleIndexCardCount);\n                if (_this.offsetKeys.length % 2 !== 0 && iOffset.toString() === _this.offsetKeys[_this.offsetKeys.length - 2]\n                    && info.currentScrollTop <= info.offsets[_this.offsetKeys.length - 1]) {\n                    iOffset = (iOffset + 1) > maxPage ? maxPage : iOffset + 1;\n                }\n                iOffset = iOffset > maxPage ? maxPage : iOffset;\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.getPage(iOffset, maxPage), maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualLayoutRender.prototype.getPage = function (block, maxPage) {\n        if (block + 1 > maxPage) {\n            return block % 2 === 0 ? block / 2 : (block - 1) / 2;\n        }\n        else {\n            return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n        }\n    };\n    VirtualLayoutRender.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {\n            e.preventDefault();\n        }\n    };\n    /**\n     * Check column is visible or not.\n     *\n     * @param {ColumnsModel} column - specifies the column.\n     * @returns {boolean} - Check column is visible or not.\n     * @private\n     * @hidden\n     */\n    VirtualLayoutRender.prototype.isColumnVisible = function (column) {\n        var _this = this;\n        var isVisible = false;\n        var isNumeric = typeof column.keyField === 'number';\n        if (isNumeric) {\n            isVisible = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;\n        }\n        else {\n            column.keyField.split(',').forEach(function (key) { isVisible = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1; });\n        }\n        return isVisible;\n    };\n    VirtualLayoutRender.prototype.renderLimits = function (column, target) {\n        var limits = createElement('div', { className: cls.LIMITS_CLASS });\n        if (column.minCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MIN_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('min') + ': ' + column.minCount.toString()\n            }));\n        }\n        if (column.maxCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MAX_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('max') + ': ' + column.maxCount.toString()\n            }));\n        }\n        if (limits.childElementCount > 0) {\n            if (target.querySelector('.' + cls.CARD_WRAPPER_CLASS)) {\n                target.insertBefore(limits, target.firstElementChild);\n            }\n            else {\n                target.appendChild(limits);\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.renderValidation = function () {\n        var _this = this;\n        this.parent.columns.forEach(function (column) {\n            if (!column.minCount && !column.maxCount) {\n                return;\n            }\n            var cardData = _this.columnData[column.keyField];\n            var keySelector = \"[data-key=\\\"\" + column.keyField + \"\\\"]\";\n            var headerCell = _this.parent.element.querySelector(\".\" + (cls.HEADER_CELLS_CLASS + keySelector));\n            var rowCells = [].slice.call(_this.parent.element.querySelectorAll(\".\" + (cls.CONTENT_CELLS_CLASS + keySelector)));\n            _this.renderLimits(column, headerCell);\n            var colorClass = _this.getValidationClass(column, cardData.length);\n            if (colorClass) {\n                addClass(rowCells.concat(headerCell), colorClass);\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.getValidationClass = function (column, count) {\n        var colorClass;\n        if (column.maxCount && count > column.maxCount) {\n            colorClass = cls.MAX_COLOR_CLASS;\n        }\n        else if (column.minCount && count < column.minCount) {\n            colorClass = cls.MIN_COLOR_CLASS;\n        }\n        return colorClass;\n    };\n    VirtualLayoutRender.prototype.refreshValidation = function () {\n        var validations = [].slice.call(this.parent.element.querySelectorAll('.' + cls.LIMITS_CLASS));\n        validations.forEach(function (node) { remove(node); });\n        var minClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MIN_COLOR_CLASS));\n        removeClass(minClass, cls.MIN_COLOR_CLASS);\n        var maxClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MAX_COLOR_CLASS));\n        removeClass(maxClass, cls.MAX_COLOR_CLASS);\n        this.renderValidation();\n    };\n    VirtualLayoutRender.prototype.getColumnData = function (columnValue, dataSource) {\n        var _this = this;\n        if (dataSource === void 0) { dataSource = this.parent.kanbanData; }\n        var cardData = [];\n        var isNumeric = typeof columnValue === 'number';\n        if (isNumeric) {\n            var keyData = dataSource.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnValue;\n            });\n            cardData = cardData.concat(keyData);\n        }\n        else {\n            var columnKeys = columnValue.split(',');\n            var _loop_6 = function (key) {\n                var keyData = dataSource.filter(function (cardObj) {\n                    return cardObj[_this.parent.keyField] === key.trim();\n                });\n                cardData = cardData.concat(keyData);\n            };\n            for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n                var key = columnKeys_1[_i];\n                _loop_6(key);\n            }\n        }\n        this.sortCategory(cardData);\n        return cardData;\n    };\n    VirtualLayoutRender.prototype.sortCategory = function (cardData) {\n        var key = this.parent.cardSettings.headerField;\n        var direction = this.parent.sortSettings.direction;\n        switch (this.parent.sortSettings.sortBy) {\n            case 'DataSourceOrder':\n                this.sortOrder(key, direction, cardData);\n                break;\n            case 'Custom':\n            case 'Index':\n                if (this.parent.sortSettings.field) {\n                    key = this.parent.sortSettings.field;\n                }\n                this.sortOrder(key, direction, cardData);\n                break;\n        }\n        return cardData;\n    };\n    VirtualLayoutRender.prototype.sortOrder = function (key, direction, cardData) {\n        var isNumeric = true;\n        if (this.parent.kanbanData.length > 0) {\n            isNumeric = typeof (this.parent.kanbanData[0])[key] === 'number';\n        }\n        if (!isNumeric && this.parent.sortSettings.sortBy === 'Index') {\n            return cardData;\n        }\n        var first;\n        var second;\n        cardData = cardData.sort(function (firstData, secondData) {\n            if (!isNumeric) {\n                first = firstData[key].toLowerCase();\n                second = secondData[key].toLowerCase();\n            }\n            else {\n                first = firstData[key];\n                second = secondData[key];\n            }\n            return (first > second) ? 1 : ((second > first) ? -1 : 0);\n        });\n        if (direction === 'Descending') {\n            cardData.reverse();\n        }\n        return cardData;\n    };\n    VirtualLayoutRender.prototype.documentClick = function (args) {\n        if (args.target.classList.contains(cls.SWIMLANE_OVERLAY_CLASS) &&\n            this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        if (closest(args.target, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var cards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.disableAttributeSelection(cards);\n    };\n    VirtualLayoutRender.prototype.disableAttributeSelection = function (cards) {\n        if (cards instanceof Element) {\n            cards.setAttribute('aria-selected', 'false');\n        }\n        else {\n            cards.forEach(function (card) { card.setAttribute('aria-selected', 'false'); });\n        }\n    };\n    VirtualLayoutRender.prototype.getColumnCards = function (data) {\n        var _this = this;\n        var columnData = {};\n        this.columnKeys = [];\n        this.parent.columns.forEach(function (column) {\n            var isNumeric = typeof column.keyField === 'number';\n            if (isNumeric) {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());\n            }\n            else {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.split(',').map(function (e) { return e.trim(); }));\n            }\n            var cardData = _this.getColumnData(column.keyField, data);\n            columnData[column.keyField] = cardData;\n        });\n        return columnData;\n    };\n    VirtualLayoutRender.prototype.refreshHeaders = function () {\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (child) { return remove(child); });\n        this.renderHeader(header);\n    };\n    VirtualLayoutRender.prototype.refreshCards = function () {\n        this.parent.resetTemplates(['cardTemplate']);\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS));\n        cards.forEach(function (card) { return remove(card); });\n        this.renderCards();\n        this.wireDragEvent();\n        this.parent.renderTemplates();\n    };\n    VirtualLayoutRender.prototype.refresh = function () {\n        var _this = this;\n        var isColumnTemplateRefreshed = false;\n        this.parent.columns.forEach(function (column) {\n            if (column.showItemCount) {\n                if (column && column.template && !isColumnTemplateRefreshed) {\n                    _this.refreshHeaders();\n                    isColumnTemplateRefreshed = true;\n                }\n                var countSelector = \".\" + cls.HEADER_CELLS_CLASS + \"[data-key=\\\"\" + column.keyField + \"\\\"] .\" + cls.CARD_ITEM_COUNT_CLASS;\n                var itemCount = _this.parent.element.querySelector(countSelector);\n                if (itemCount) {\n                    var columnDataLength = _this.parent.dataModule.isRemote() ? _this.parent.columnDataCount[column.keyField]\n                        : _this.columnData[column.keyField].length;\n                    var isNumeric = typeof column.keyField === 'number';\n                    var cardLength = 0;\n                    if (isNumeric) {\n                        cardLength = ([].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=' + column.keyField + ']'))).length;\n                    }\n                    else {\n                        var keys = column.keyField.split(',');\n                        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n                            var key = keys_2[_i];\n                            var cards = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=' + key.trim() + ']'));\n                            cardLength = cards.length + cardLength;\n                        }\n                    }\n                    itemCount.innerHTML = '- ' + columnDataLength + ' ' + _this.parent.localeObj.getConstant('items');\n                }\n            }\n        });\n        this.refreshValidation();\n    };\n    VirtualLayoutRender.prototype.updateScrollPosition = function () {\n        var _this = this;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            if (!Browser.isIE) {\n                content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);\n            }\n            else {\n                content.scrollTop = this.parent.scrollPosition.content.top;\n                content.scrollLeft = this.parent.scrollPosition.content.left;\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (wrapper.offsetParent) {\n                var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')];\n                if (scrollData) {\n                    if (!Browser.isIE) {\n                        wrapper.scrollTo(scrollData.left, scrollData.top);\n                    }\n                    else {\n                        wrapper.scrollTop = scrollData.top;\n                        wrapper.scrollLeft = scrollData.left;\n                    }\n                }\n            }\n        });\n    };\n    VirtualLayoutRender.prototype.renderCardBasedOnIndex = function (data, index, isDropped, requestType) {\n        var _this = this;\n        var key = data[this.parent.keyField];\n        var cardRow = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row)');\n        if (this.parent.sortSettings.sortBy !== 'Index') {\n            var field_1 = this.parent.cardSettings.headerField;\n            if (this.parent.sortSettings.sortBy === 'Custom') {\n                field_1 = this.parent.sortSettings.field;\n            }\n            if (isNoU(this.parent.swimlaneSettings.keyField)) {\n                index = this.getColumnData(key, this.parent.kanbanData).findIndex(function (colData) {\n                    return colData[field_1] === data[field_1];\n                });\n            }\n            else {\n                var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);\n                index = this.getColumnData(key, swimlaneDatas).findIndex(function (colData) { return colData[field_1] === data[field_1]; });\n            }\n        }\n        else if (this.parent.sortSettings.sortBy === 'Index' &&\n            this.parent.sortSettings.field && this.parent.sortSettings.direction === 'Ascending') {\n            index = data[this.parent.sortSettings.field] - 1;\n        }\n        if (cardRow) {\n            var td = [].slice.call(cardRow.children).filter(function (e) {\n                return e.getAttribute('data-key').replace(/\\s/g, '').split(',').indexOf(key.toString().replace(/\\s/g, '')) !== -1;\n            })[0];\n            var cardWrapper_2 = td.querySelector('.' + cls.CARD_VIRTUAL_WRAPPER_CLASS);\n            var emptyCard = cardWrapper_2.querySelector('.' + cls.EMPTY_CARD_CLASS);\n            if (emptyCard) {\n                remove(emptyCard);\n            }\n            var cardElement_2 = this.renderCard(data);\n            if (this.parent.allowDragAndDrop && td.classList.contains(cls.DRAG_CLASS)) {\n                this.parent.dragAndDropModule.wireDragEvents(cardElement_2);\n                addClass([cardElement_2], cls.DROPPABLE_CLASS);\n            }\n            var args = { data: data, element: cardElement_2, cancel: false };\n            this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                var addCardCondition = isDropped ? true : cardWrapper_2.childNodes.length\n                    < _this.scrollStatus[key].singleIndexCardCount;\n                if (!cardArgs.cancel && addCardCondition || !isNoU(requestType)) {\n                    if (isNoU(index) || cardWrapper_2.children.length === 0) {\n                        cardWrapper_2.appendChild(cardElement_2);\n                    }\n                    else {\n                        cardWrapper_2.insertBefore(cardElement_2, cardWrapper_2.childNodes[index]);\n                    }\n                }\n            });\n        }\n    };\n    VirtualLayoutRender.prototype.removeCard = function (data) {\n        var cardKey = data[this.parent.cardSettings.headerField];\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + cardKey + \"\\\"]\");\n        this.isSelectedCard = cardElement.classList.contains(cls.CARD_SELECTION_CLASS) ? true : false;\n        var cardContainer = cardElement.parentElement;\n        if (cardElement) {\n            remove(cardElement);\n        }\n        if (cardContainer.querySelectorAll('.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')').length === 0) {\n            cardContainer.appendChild(this.renderEmptyCard());\n        }\n    };\n    VirtualLayoutRender.prototype.wireEvents = function () {\n        var _this = this;\n        EventHandler.add(this.parent.element, 'click', this.parent.actionModule.clickHandler, this.parent.actionModule);\n        EventHandler.add(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler, this.parent.actionModule);\n        EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);\n        window.addEventListener('resize', this.winResize);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        EventHandler.add(content, 'scroll', this.onContentScroll, this);\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (_this.parent.isInitialRender && wrapper.offsetParent) {\n                _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')] = { left: 0, top: 0 };\n            }\n            EventHandler.add(wrapper, 'scroll', _this.onColScrollShowSkeleton, _this);\n            EventHandler.add(wrapper, 'scroll', debounce(_this.onColumnScroll, 200), _this);\n        });\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.wireTouchEvents();\n            content.scrollLeft = this.scrollLeft;\n        }\n        this.wireDragEvent();\n    };\n    VirtualLayoutRender.prototype.unWireEvents = function () {\n        var _this = this;\n        EventHandler.remove(this.parent.element, 'click', this.parent.actionModule.clickHandler);\n        EventHandler.remove(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler);\n        EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);\n        window.removeEventListener('resize', this.winResize);\n        this.winResize = null;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            EventHandler.remove(content, 'scroll', this.onContentScroll);\n            EventHandler.remove(content, 'scroll', this.onColScrollShowSkeleton);\n            if (this.parent.allowDragAndDrop) {\n                this.unWireDragEvent();\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        if (cardWrapper.length > 0) {\n            cardWrapper.forEach(function (wrapper) { EventHandler.remove(wrapper, 'scroll', debounce(_this.onColumnScroll, 200)); });\n        }\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.unWireTouchEvents();\n        }\n    };\n    VirtualLayoutRender.prototype.wireDragEvent = function () {\n        var _this = this;\n        if (this.parent.allowDragAndDrop) {\n            var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n                + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n            addClass(cards, cls.DROPPABLE_CLASS);\n            if (cards.length > 0) {\n                cards.forEach(function (card) { return _this.parent.dragAndDropModule.wireDragEvents(card); });\n            }\n        }\n    };\n    VirtualLayoutRender.prototype.unWireDragEvent = function () {\n        var _this = this;\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n        removeClass(cards, cls.DROPPABLE_CLASS);\n        if (cards.length > 0) {\n            cards.forEach(function (card) { return _this.parent.dragAndDropModule.unWireDragEvents(card); });\n        }\n    };\n    VirtualLayoutRender.prototype.destroy = function () {\n        this.parent.resetTemplates();\n        this.parent.off(events.dataReady, this.initRender);\n        this.parent.off(events.contentReady, this.scrollUiUpdate);\n        this.unWireEvents();\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        if (header) {\n            remove(header);\n        }\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            remove(content);\n        }\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n        }\n        var swimlaneToolBarEle = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n        if (swimlaneToolBarEle) {\n            remove(swimlaneToolBarEle);\n        }\n        var swimlaneContent = this.parent.element.querySelector('.' + cls.SWIMLANE_CONTENT_CLASS);\n        if (swimlaneContent) {\n            remove(swimlaneContent);\n        }\n    };\n    return VirtualLayoutRender;\n}(MobileLayout));\nexport { VirtualLayoutRender };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Component, NotifyPropertyChanges, Property, Complex, Collection, detach } from '@syncfusion/ej2-base';\nimport { addClass, classList, removeClass, compile, formatUnit, L10n, Browser, Event } from '@syncfusion/ej2-base';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { Data } from './data';\nimport { SwimlaneSettings } from '../models/swimlane-settings';\nimport { CardSettings } from '../models/card-settings';\nimport { DialogSettings } from '../models/dialog-settings';\nimport { Columns } from '../models/columns';\nimport { StackedHeaders } from '../models/stacked-headers';\nimport { SortSettings } from '../models/sort-settings';\nimport { Action } from '../actions/action';\nimport { Crud } from '../actions/crud';\nimport { DragAndDrop } from '../actions/drag';\nimport { KanbanDialog } from '../actions/dialog';\nimport { Keyboard } from '../actions/keyboard';\nimport { KanbanTooltip } from '../actions/tooltip';\nimport { KanbanTouch } from '../actions/touch';\nimport { LayoutRender } from './layout-render';\nimport { VirtualLayoutRender } from './virtual-layout-render';\nimport * as events from '../base/constant';\nimport * as cls from './css-constant';\n/**\n * The Kanban board is an efficient way to visually depict various stages of a process using cards with transparent workflows.\n * The Kanban board has rich set of APIs, methods, and events used to enable or disable its features and customize them.\n * ```html\n * <div id=\"kanban\"></div>\n * ```\n * ```typescript\n * <script>\n *   var kanbanObj = new Kanban();\n *   kanbanObj.appendTo(\"#kanban\");\n * </script>\n * ```\n */\nvar Kanban = /** @class */ (function (_super) {\n    __extends(Kanban, _super);\n    /**\n     * Constructor for creating the Kanban widget\n     *\n     * @param {KanbanModel} options Accepts the kanban properties to render the Kanban board.\n     * @param {string | HTMLElement} element Accepts the DOM element reference as either selector or element to render the Kanban Board.\n     */\n    function Kanban(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.columnDataCount = {};\n        _this.needsID = true;\n        return _this;\n    }\n    /**\n     * Initializes the values of private members.\n     *\n     * @returns {void}\n     * @private\n     */\n    Kanban.prototype.preRender = function () {\n        this.isAdaptive = Browser.isDevice;\n        this.kanbanData = [];\n        if (!this.enablePersistence || !this.swimlaneToggleArray) {\n            this.swimlaneToggleArray = [];\n        }\n        this.activeCardData = { data: null, element: null };\n        var defaultLocale = {\n            items: 'items',\n            min: 'Min',\n            max: 'Max',\n            cardsSelected: 'Cards Selected',\n            addTitle: 'Add New Card',\n            editTitle: 'Edit Card Details',\n            deleteTitle: 'Delete Card',\n            deleteContent: 'Are you sure you want to delete this card?',\n            save: 'Save',\n            delete: 'Delete',\n            cancel: 'Cancel',\n            yes: 'Yes',\n            no: 'No',\n            close: 'Close',\n            noCard: 'No cards to display',\n            unassigned: 'Unassigned',\n            cards: 'Cards'\n        };\n        this.localeObj = new L10n(this.getModuleName(), defaultLocale, this.locale);\n        this.scrollPosition = { content: { left: 0, top: 0 }, column: {} };\n        this.isInitialRender = true;\n    };\n    /**\n     * To provide the array of modules needed for control rendering\n     *\n     * @returns {ModuleDeclaration[]} Returns the declared modules.\n     * @private\n     */\n    Kanban.prototype.requiredModules = function () {\n        var modules = [];\n        return modules;\n    };\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persistance state.\n     * @private\n     */\n    Kanban.prototype.getPersistData = function () {\n        if (this.dataSource.length > 0) {\n            return this.addOnPersist(['columns', 'dataSource', 'swimlaneToggleArray']);\n        }\n        else {\n            return this.addOnPersist(['columns', 'kanbanData', 'swimlaneToggleArray']);\n        }\n    };\n    /**\n     * Core method to return the module name.\n     *\n     * @returns {string} Returns the module name.\n     * @private\n     */\n    Kanban.prototype.getModuleName = function () {\n        return 'kanban';\n    };\n    /**\n     * Core method that initializes the control rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    Kanban.prototype.render = function () {\n        var addClasses = [cls.ROOT_CLASS];\n        var removeClasses = [];\n        if (this.enableRtl) {\n            addClasses.push(cls.RTL_CLASS);\n        }\n        else {\n            removeClasses.push(cls.RTL_CLASS);\n        }\n        if (this.isAdaptive) {\n            addClasses.push(cls.DEVICE_CLASS);\n        }\n        else {\n            removeClasses.push(cls.DEVICE_CLASS);\n        }\n        if (this.cssClass) {\n            addClasses.push(this.cssClass);\n        }\n        classList(this.element, addClasses, removeClasses);\n        this.element.style.width = formatUnit(this.width);\n        this.element.style.height = formatUnit(this.height);\n        this.element.setAttribute('role', 'application');\n        this.element.setAttribute('aria-label', 'Kanban Board');\n        createSpinner({ target: this.element });\n        this.showSpinner();\n        this.initializeModules();\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @param {KanbanModel} newProp Gets the updated values\n     * @param {KanbanModel} oldProp Gets the previous values\n     * @returns {void}\n     * @private\n     */\n    Kanban.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass);\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass);\n                    }\n                    break;\n                case 'enableRtl':\n                case 'locale':\n                    this.refresh();\n                    break;\n                case 'width':\n                    this.element.style.width = formatUnit(newProp.width);\n                    this.element.querySelector('.' + cls.HEADER_CLASS).firstElementChild.style.width = 'auto';\n                    this.notify(events.contentReady, {});\n                    break;\n                case 'height':\n                    this.element.style.height = formatUnit(newProp.height);\n                    this.element.querySelector('.' + cls.CONTENT_CLASS).style.height = 'auto';\n                    this.notify(events.contentReady, {});\n                    break;\n                case 'dataSource':\n                case 'query':\n                    if (this.dataModule) {\n                        this.dataModule.setState({ isDataChanged: false });\n                    }\n                    this.dataModule = new Data(this);\n                    break;\n                case 'columns':\n                case 'constraintType':\n                    this.notify(events.dataReady, { processedData: this.kanbanData });\n                    break;\n                case 'swimlaneSettings':\n                    this.onSwimlaneSettingsPropertyChanged(newProp.swimlaneSettings, oldProp.swimlaneSettings);\n                    break;\n                case 'cardSettings':\n                    this.onCardSettingsPropertyChanged(newProp.cardSettings, oldProp.cardSettings);\n                    break;\n                case 'allowDragAndDrop':\n                    if (newProp.allowDragAndDrop) {\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.wireDragEvent();\n                        }\n                        else {\n                            this.layoutModule.wireDragEvent();\n                        }\n                    }\n                    else {\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.unWireDragEvent();\n                        }\n                        else {\n                            this.layoutModule.unWireDragEvent();\n                        }\n                    }\n                    break;\n                case 'enableTooltip':\n                    if (this.tooltipModule) {\n                        this.tooltipModule.destroy();\n                        this.tooltipModule = null;\n                    }\n                    if (newProp.enableTooltip) {\n                        this.tooltipModule = new KanbanTooltip(this);\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.refreshCards();\n                        }\n                        else {\n                            this.layoutModule.refreshCards();\n                        }\n                    }\n                    break;\n                case 'dialogSettings':\n                    if (newProp.dialogSettings) {\n                        this.dialogModule = new KanbanDialog(this);\n                    }\n                    break;\n                case 'allowKeyboard':\n                    if (this.keyboardModule) {\n                        this.keyboardModule.destroy();\n                        this.keyboardModule = null;\n                    }\n                    if (newProp.allowKeyboard) {\n                        this.keyboardModule = new Keyboard(this);\n                    }\n                    break;\n                case 'stackedHeaders':\n                    if (this.enableVirtualization) {\n                        this.virtualLayoutModule.refreshHeaders();\n                    }\n                    else {\n                        this.layoutModule.refreshHeaders();\n                    }\n                    break;\n                case 'sortSettings':\n                    this.notify(events.dataReady, { processedData: this.kanbanData });\n                    break;\n                default:\n                    break;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Kanban.prototype.onSwimlaneSettingsPropertyChanged = function (newProp, _oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'keyField':\n                case 'textField':\n                case 'showEmptyRow':\n                case 'showItemCount':\n                case 'template':\n                case 'sortDirection':\n                    this.notify(events.dataReady, { processedData: this.kanbanData });\n                    break;\n                case 'enableFrozenRows':\n                    if (this.layoutModule.frozenSwimlaneRow && !this.swimlaneSettings.enableFrozenRows) {\n                        this.layoutModule.removeFrozenRows();\n                    }\n                    break;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Kanban.prototype.onCardSettingsPropertyChanged = function (newProp, _oldProp) {\n        var cards = [];\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'showHeader':\n                case 'headerField':\n                case 'contentField':\n                case 'template':\n                case 'tagsField':\n                case 'grabberField':\n                case 'footerCssField':\n                    if (this.enableVirtualization) {\n                        this.virtualLayoutModule.refreshCards();\n                    }\n                    else {\n                        this.layoutModule.refreshCards();\n                    }\n                    break;\n                case 'selectionType':\n                    cards = this.getSelectedCards();\n                    if (cards.length > 0) {\n                        removeClass(cards, cls.CARD_SELECTION_CLASS);\n                        if (this.enableVirtualization) {\n                            this.virtualLayoutModule.disableAttributeSelection(cards);\n                        }\n                        else {\n                            this.layoutModule.disableAttributeSelection(cards);\n                        }\n                    }\n                    break;\n            }\n        }\n    };\n    Kanban.prototype.initializeModules = function () {\n        this.dataModule = new Data(this);\n        if (this.enableVirtualization) {\n            this.virtualLayoutModule = new VirtualLayoutRender(this);\n        }\n        else {\n            this.layoutModule = new LayoutRender(this);\n        }\n        if (this.allowKeyboard) {\n            this.keyboardModule = new Keyboard(this);\n        }\n        this.actionModule = new Action(this);\n        this.crudModule = new Crud(this);\n        this.dragAndDropModule = new DragAndDrop(this);\n        this.dialogModule = new KanbanDialog(this);\n        if (this.enableTooltip) {\n            this.tooltipModule = new KanbanTooltip(this);\n        }\n        if (Browser.isDevice || Browser.isTouch) {\n            this.touchModule = new KanbanTouch(this);\n        }\n    };\n    Kanban.prototype.renderTemplates = function () {\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    Kanban.prototype.resetTemplates = function (templates) {\n        if (this.isReact) {\n            this.clearTemplate(templates);\n        }\n    };\n    Kanban.prototype.destroyModules = function () {\n        if (this.layoutModule) {\n            this.layoutModule.destroy();\n            this.layoutModule = null;\n        }\n        if (this.keyboardModule) {\n            this.keyboardModule.destroy();\n            this.keyboardModule = null;\n        }\n        if (this.touchModule) {\n            this.touchModule.destroy();\n            this.touchModule = null;\n        }\n        if (this.tooltipModule) {\n            this.tooltipModule.destroy();\n            this.tooltipModule = null;\n        }\n        if (this.virtualLayoutModule) {\n            this.virtualLayoutModule.destroy();\n            this.virtualLayoutModule = null;\n        }\n        this.dialogModule = null;\n        this.actionModule = null;\n        this.crudModule = null;\n        this.dataModule = null;\n        this.dragAndDropModule = null;\n    };\n    Kanban.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (typeof template === 'function') {\n                    return compile(template);\n                }\n                else if (document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Returns the card details based on card ID from the board.\n     *\n     * @function getCardDetails\n     * @param {Element} target Accepts the card element to get the details.\n     * @returns {Object} Returns the card details based on given target.\n     */\n    Kanban.prototype.getCardDetails = function (target) {\n        var _this = this;\n        var isNumeric = typeof (this.kanbanData[0])[this.cardSettings.headerField] === 'number';\n        var targetId = isNumeric ? parseInt(target.getAttribute('data-id'), 10) : target.getAttribute('data-id');\n        var cardObj = this.kanbanData.filter(function (data) {\n            return data[_this.cardSettings.headerField] === targetId;\n        })[0];\n        return cardObj;\n    };\n    /**\n     * Returns the column data based on column key input.\n     *\n     * @function getColumnData\n     * @param {string | number} columnKey Accepts the column key to get the objects.\n     * @param {Object[]} dataSource Accepts the collection of objects to get the results based on given columnKey.\n     * @returns {Object[]} Returns the collection of card objects based on given inputs.\n     */\n    Kanban.prototype.getColumnData = function (columnKey, dataSource) {\n        if (this.enableVirtualization) {\n            return this.virtualLayoutModule.getColumnCards(dataSource)[\"\" + columnKey] || [];\n        }\n        return this.layoutModule.getColumnCards(dataSource)[\"\" + columnKey] || [];\n    };\n    /**\n     * Returns the swimlane column data based on swimlane keyField input.\n     *\n     * @function getSwimlaneData\n     * @param {string} keyField Accepts the swimlane keyField to get the objects.\n     * @returns {Object[]} Returns the collection of card objects based on given inputs.\n     */\n    Kanban.prototype.getSwimlaneData = function (keyField) {\n        return this.layoutModule.getSwimlaneCards()[\"\" + keyField] || [];\n    };\n    /**\n     * Gets the list of selected cards from the board.\n     *\n     * @function getSelectedCards\n     * @returns {HTMLElement[]} Returns the card elements based on selection.\n     */\n    Kanban.prototype.getSelectedCards = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CARD_CLASS + '.' + cls.CARD_SELECTION_CLASS));\n    };\n    /**\n     * Allows you to show the spinner on Kanban at the required scenarios.\n     *\n     * @function showSpinner\n     * @returns {void}\n     */\n    Kanban.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * When the spinner is shown manually using the showSpinner method, it can be hidden using this `hideSpinner` method.\n     *\n     * @function hideSpinner\n     * @returns {void}\n     */\n    Kanban.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    /**\n     * To manually open the dialog.\n     *\n     * @function openDialog\n     * @param {CurrentAction} action Accepts the action for which the dialog needs to be opened such as either for new card creation or\n     *  editing of existing cards. The applicable action names are `Add` and `Edit`.\n     * @param {Object} data It can be card data.\n     * @returns {void}\n     */\n    Kanban.prototype.openDialog = function (action, data) {\n        this.dialogModule.openDialog(action, data);\n    };\n    /**\n     * To manually close the dialog.\n     *\n     * @function closeDialog\n     * @returns {void}\n     */\n    Kanban.prototype.closeDialog = function () {\n        this.dialogModule.closeDialog();\n    };\n    /**\n     * Adds the new card to the data source of Kanban and layout.\n     *\n     * @function addCard\n     * @param {Object | Object[]} cardData Accepts Single card object or Collection of card objects to be added into Kanban.\n     * @param {number} index Accepts the index to insert the card in column.\n     * @returns {void}\n     */\n    Kanban.prototype.addCard = function (cardData, index) {\n        this.crudModule.addCard(cardData, index);\n    };\n    /**\n     * Updates the changes made in the card object by passing it as a parameter to the data source.\n     *\n     * @function updateCard\n     * @param {Object | Object[]} cardData Accepts Single card object or Collection of card objects to be updated into Kanban.\n     * @param {number} index Accepts the index to update the card in column.\n     * @returns {void}\n     */\n    Kanban.prototype.updateCard = function (cardData, index) {\n        this.crudModule.updateCard(cardData, index);\n    };\n    /**\n     * Deletes the card based on the provided ID or card collection in the argument list.\n     *\n     * @function deleteCard\n     * @param {string | number | Object | Object[]} cardData Accepts the ID of the remove card in string or number type or\n     * Single card object or Collection of card objects to be removed from Kanban\n     * @returns {void}\n     */\n    Kanban.prototype.deleteCard = function (cardData) {\n        this.crudModule.deleteCard(cardData);\n    };\n    /**\n     * Add the column to Kanban board dynamically based on the provided column options and index in the argument list.\n     *\n     * @function addColumn\n     * @param {ColumnsModel} columnOptions Accepts the properties to new column that are going to be added in the board.\n     * @param {number} index Accepts the index of column to add the new column.\n     * @returns {void}\n     */\n    Kanban.prototype.addColumn = function (columnOptions, index) {\n        this.actionModule.addColumn(columnOptions, index);\n    };\n    /**\n     * Deletes the column based on the provided index value.\n     *\n     * @function deleteColumn\n     * @param {number} index Accepts the index of column to delete the existing column from Kanban board.\n     * @returns {void}\n     */\n    Kanban.prototype.deleteColumn = function (index) {\n        this.actionModule.deleteColumn(index);\n    };\n    /**\n     * Shows the column from hidden based on the provided key in the columns.\n     *\n     * @function showColumn\n     * @param {string | number} key Accepts the hidden column key name to be shown from the hidden state in board.\n     * @returns {void}\n     */\n    Kanban.prototype.showColumn = function (key) {\n        this.actionModule.showColumn(key);\n    };\n    /**\n     * Hides the column from Kanban board based on the provided key in the columns.\n     *\n     * @function hideColumn\n     * @param {string | number} key Accepts the visible column key name to be hidden from the board.\n     * @returns {void}\n     */\n    Kanban.prototype.hideColumn = function (key) {\n        this.actionModule.hideColumn(key);\n    };\n    /**\n     * Method to refresh the Kanban UI based on modified records.\n     *\n     * @function refreshUI\n     * @param {ActionEventArgs} args Accepts the added, changed or deleted data.\n     * @param {number} index Accepts the index of the changed items.\n     * @returns {void}\n     */\n    Kanban.prototype.refreshUI = function (args, index) {\n        index = index ? index : 0;\n        this.dataModule.refreshUI(args, index);\n    };\n    /**\n     * Method to refresh the column header.\n     *\n     * @method refreshHeader\n     * @returns {void}\n     */\n    Kanban.prototype.refreshHeader = function () {\n        this.resetTemplates(['columnTemplate']);\n        if (this.enableVirtualization) {\n            this.virtualLayoutModule.refreshHeaders();\n        }\n        else {\n            this.layoutModule.refreshHeaders();\n        }\n        this.renderTemplates();\n    };\n    /**\n     * Removes the control from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    Kanban.prototype.destroy = function () {\n        this.destroyModules();\n        [].slice.call(this.element.childNodes).forEach(function (node) { detach(node); });\n        var removeClasses = [cls.ROOT_CLASS];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n        _super.prototype.destroy.call(this);\n    };\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property('auto')\n    ], Kanban.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Kanban.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Kanban.prototype, \"cardHeight\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property([])\n    ], Kanban.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"query\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"keyField\", void 0);\n    __decorate([\n        Property('Column')\n    ], Kanban.prototype, \"constraintType\", void 0);\n    __decorate([\n        Property([])\n    ], Kanban.prototype, \"externalDropId\", void 0);\n    __decorate([\n        Collection([], Columns)\n    ], Kanban.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Kanban.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(true)\n    ], Kanban.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        Collection([], StackedHeaders)\n    ], Kanban.prototype, \"stackedHeaders\", void 0);\n    __decorate([\n        Complex({}, SwimlaneSettings)\n    ], Kanban.prototype, \"swimlaneSettings\", void 0);\n    __decorate([\n        Complex({}, CardSettings)\n    ], Kanban.prototype, \"cardSettings\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Kanban.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Complex({}, DialogSettings)\n    ], Kanban.prototype, \"dialogSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Kanban.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property(false)\n    ], Kanban.prototype, \"enableTooltip\", void 0);\n    __decorate([\n        Property(false)\n    ], Kanban.prototype, \"showEmptyColumn\", void 0);\n    __decorate([\n        Property(false)\n    ], Kanban.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property()\n    ], Kanban.prototype, \"tooltipTemplate\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataBinding\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"cardClick\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"cardDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"cardRendered\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dragStart\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"drag\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dragStop\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dialogOpen\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dialogClose\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Kanban.prototype, \"dataSourceChanged\", void 0);\n    Kanban = __decorate([\n        NotifyPropertyChanges\n    ], Kanban);\n    return Kanban;\n}(Component));\nexport { Kanban };\n"],"names":["actionBegin","actionComplete","actionFailure","cardClick","cardDoubleClick","cardRendered","queryCellInfo","dataBinding","dataBound","dragStart","drag","dragStop","dialogOpen","dialogClose","contentReady","dataReady","dataSourceChanged","dataStateChange","Data","prototype","initDataManager","dataSource","query","this","dataManager","DataManager","Query","kanbanData","parent","isRemote","offline","undefined","url","columnKeyFields","columns","_i","_a","length","column","keyField","toString","split","_b","_c","innerColumns","push","trim","getQuery","parameter","clone","enableVirtualization","cardHeight","parseInt","formatUnit","take","height","Math","ceil","window","innerHeight","i","where","isNullOrUndefined","addParams","getData","def","eventPromise","requestType","isObservable","promise","executeQuery","setState","state","dataState","getStateEventArgument","adaptr","UrlAdaptor","dm","adaptor","processQuery","data","JSON","parse","extend","pvtData","args","index","editArgs_1","_this","dataArgs","Deferred","deff","isDataChanged","action","isPending","resolver","resolve","endEdit","cancelEdit","reject","trigger","events.dataSourceChanged","then","events.dataStateChange","addedRecords","forEach","changedRecords","changedRecord","cardObj","filter","cardSettings","headerField","deletedRecords","deletedRecord","findIndex","splice","catch","hideSpinner","getTable","fromTable","refreshDataManager","e","dataManagerSuccess","dataManagerFailure","type","offlineArgs","isDestroyed","updateKanbanData","virtualLayoutModule","refresh","events.dataBinding","notify","events.dataReady","processedData","events.dataBound","initload","layoutModule","renderTemplates","resultData","result","count","columnsKeyFields","Key","columnDataCount","Value","events.actionFailure","error","updateDataManager","updateType","params","isDropped","dataDropIndexKeyFieldValue","draggedKey","droppedKey","isMultipleDrag","actionArgs","showSpinner","cancel","events.actionComplete","insert","dataModule","remove","json","update","currentIndex","saveChanges","refreshUI","refreshColumnData","Array","isArray","modifyArrayData","onLineData","position","columnData","getColumnCards","renderCardBasedOnIndex","removeCard","isSelectedCard","actionModule","SingleCardSelection","sortSettings","field","sortBy","direction","swimlaneSettings","kanbanRows","getRows","swimlaneData","getSwimlaneCards","events.contentReady","extendStatics","d","b","Object","setPrototypeOf","__proto__","p","hasOwnProperty","_super","__extends","__","constructor","create","__decorate","decorators","target","key","desc","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","SwimlaneSettings","ChildProperty","Property","apply","CardSettings","DialogSettings","Columns","StackedHeaders","SortSettings","ROOT_CLASS","RTL_CLASS","DEVICE_CLASS","ICON_CLASS","TEMPLATE_CLASS","SWIMLANE_CLASS","TABLE_CLASS","HEADER_CLASS","HEADER_TABLE_CLASS","HEADER_CELLS_CLASS","HEADER_WRAP_CLASS","HEADER_TITLE_CLASS","HEADER_TEXT_CLASS","HEADER_ICON_CLASS","STACKED_HEADER_ROW_CLASS","STACKED_HEADER_CELL_CLASS","CONTENT_CELLS_CLASS","CONTENT_CLASS","CONTENT_TABLE_CLASS","HEADER_ROW_TOGGLE_CLASS","HEADER_ROW_CLASS","CONTENT_ROW_CLASS","SWIMLANE_ROW_CLASS","SWIMLANE_ROW_EXPAND_CLASS","SWIMLANE_ROW_COLLAPSE_CLASS","CARD_ITEM_COUNT_CLASS","CARD_WRAPPER_CLASS","CARD_VIRTUAL_WRAPPER_CLASS","CARD_CLASS","DROPPABLE_CLASS","DRAG_CLASS","DROP_CLASS","DISABLED_CLASS","CARD_HEADER_CLASS","CARD_CONTENT_CLASS","CARD_HEADER_TEXT_CLASS","CARD_HEADER_TITLE_CLASS","CARD_TAGS_CLASS","CARD_TAG_CLASS","CARD_COLOR_CLASS","CARD_LABEL_CLASS","CARD_FOOTER_CLASS","EMPTY_CARD_CLASS","CARD_FOOTER_CSS_CLASS","COLUMN_EXPAND_CLASS","COLUMN_COLLAPSE_CLASS","COLLAPSE_HEADER_TEXT_CLASS","COLLAPSED_CLASS","DIALOG_CLASS","FORM_CLASS","ERROR_VALIDATION_CLASS","FIELD_CLASS","DRAGGED_CLONE_CLASS","CLONED_CARD_CLASS","DRAGGED_CARD_CLASS","DROPPED_CLONE_CLASS","DROPPING_CLASS","BORDER_CLASS","TOGGLE_VISIBLE_CLASS","MULTI_CARD_WRAPPER_CLASS","TARGET_MULTI_CLONE_CLASS","MULTI_COLUMN_KEY_CLASS","CARD_SELECTION_CLASS","TOOLTIP_TEXT_CLASS","SWIMLANE_HEADER_CLASS","TOOLBAR_MENU_ICON_CLASS","TOOLBAR_SWIMLANE_NAME_CLASS","SWIMLANE_OVERLAY_CLASS","SWIMLANE_CONTENT_CLASS","SWIMLANE_RESOURCE_CLASS","LIMITS_CLASS","MAX_COUNT_CLASS","MIN_COUNT_CLASS","MAX_COLOR_CLASS","MIN_COLOR_CLASS","CLOSE_CLASS","POPUP_CONTENT_CLASS","SHOW_ADD_BUTTON","SHOW_ADD_ICON","SHOW_ADD_FOCUS","FROZEN_SWIMLANE_ROW_CLASS","FROZEN_ROW_CLASS","Action","clickHandler","targetIcon","closest","classList","contains","cls.CARD_CLASS","allowKeyboard","keyboardModule","cardTabIndexRemove","cls.HEADER_ICON_CLASS","columnExpandCollapse","cls.CONTENT_ROW_CLASS","cls.SWIMLANE_ROW_CLASS","rowExpandCollapse","cls.SHOW_ADD_BUTTON","addButtonClick","cls.FROZEN_SWIMLANE_ROW_CLASS","swimlaneRows","slice","call","element","querySelectorAll","frozenSwimlaneRow","querySelector","cls.ICON_CLASS","frozenOrder","cls.SWIMLANE_ROW_COLLAPSE_CLASS","cls.SWIMLANE_ROW_EXPAND_CLASS","newData","id","map","obj","max","cls.CONTENT_CELLS_CLASS","getAttribute","card","nextElementSibling","cls.BORDER_CLASS","lastElementChild","firstElementChild","getCardDetails","previousElementSibling","openDialog","doubleClickHandler","selectedCard","cardClickObj","activeCardData","events.cardClick","event","clickArgs","cls.CARD_SELECTION_CLASS","removeClass","disableAttributeSelection","isCtrlKey","ctrlKey","isAdaptive","touchModule","mobilePopup","tabHold","cardSelection","shiftKey","updatePopupContent","cell","setAttribute","addRemoveTabIndex","cardDoubleClickObj","events.cardDoubleClick","doubleClickArgs","dialogModule","isFrozenElem","headerTarget","HTMLElement","currentSwimlaneHeader","isNoU","events.actionBegin","tgtRow","isCollapsed","tabIndex_1","rowIndex","cls.COLLAPSED_CLASS","swimlaneToggleArray","indexOf","addClass","colIndex","cls.HEADER_CELLS_CLASS","cellIndex","columnToggle","collapsed","hideColumnKeys","nextCol","cls.STACKED_HEADER_CELL_CLASS","targetRow","colSelector","cls.TABLE_CLASS","cls.COLUMN_EXPAND_CLASS","cls.COLUMN_COLLAPSE_CLASS","colGroup","col","style","width","getWidth","targetRow_1","_loop_1","row","targetCol","cls.COLLAPSE_HEADER_TEXT_CLASS","parentElement","collapasedText","getBoundingClientRect","columnToggleArray","setProperties","isExpanded","this_1","targetRow_2","_loop_2","value","text","showItemCount","headerText","appendChild","createElement","className","innerHTML","isCtrl","isShift","cards","getSelectedCards","selectionType","contentRow","lastSelectionRow","el","selectionArray","selectedCardsElement","selectedCardsData","curCards_1","start","end","allCards","curId","lastId","lastCard","curIndex","lastIndex","select","lastCardSelection","parentEle","addColumn","columnOptions","createInstance","deleteColumn","listKey","item","cls.HEADER_ROW_TOGGLE_CLASS","detach","cls.HEADER_CLASS","cls.CONTENT_CLASS","showColumn","hideColumn","Crud","addCard","cardData","addArgs","modifiedData_1","getColumnData","priorityOrder","editParms","getIndexFromData","cardElement","updateCard","updateArgs","modifiedData","deleteCard","deleteArgs","cardIndex","columnAllDatas","cardsId","num","allModifiedKeys","modifiedKey","sort","finalData","originalIndex","columnKey","keyData","swimlaneDatas","getSwimlaneData","j","modifiedKey_1","DragAndDrop","wireDragEvents","dragContainment","externalDropId","dragObj","instance","Draggable","enableTapHold","enableTailMode","cursorAt","top","left","dragArea","bind","enableAutoScroll","helper","dragHelper","hide","sender","offsetWidth","cloneWrapper","outerHTML","cloneElement","children","cls.CLONED_CARD_CLASS","targetCloneMulti","cls.TARGET_MULTI_CLONE_CLASS","targetClone","cls.DROPPED_CLONE_CLASS","styles","offsetHeight","dragArgs","selectedCards","borderElm","closestEle","cardDetails","add","events.dragStart","dragEventArgs","removeElement","intDestroy","draggedClone","localeObj","getConstant","EventHandler","document","body","keydownHandler","cls.DRAGGED_CLONE_CLASS","insertAdjacentElement","cls.DRAGGED_CARD_CLASS","cellDimension","borderElem","cls.ROOT_CLASS","targetEle","nodeName","firstChild","contentCell","lastChild","dropElement","externalDrop","kanbanObj","isExternalKanbanDrop","externalDropObj","calculateArgs","cursor","targetKey","getColumnKey","keys","isDrag","multiCloneRemove","insertClone","pageY","offsetTop","isTargetElementVisible","cls.CARD_WRAPPER_CLASS","cls.CARD_VIRTUAL_WRAPPER_CLASS","cls.DROPPING_CLASS","multiCloneCreate","cellDropping","columnKeys","tColumn","hasAttribute","updateDimension","tagName","toggleVisible","cls.TOGGLE_VISIBLE_CLASS","multiKeyTarget","cls.MULTI_COLUMN_KEY_CLASS","cls.DISABLED_CLASS","isExternalDrop","updateScrollPosition","events.drag","getElementsByClassName","targetElem","wrapperElem","bottom","targetRootElement","ej2_instances","cells","limitEle","cls.LIMITS_CLASS","cls.MULTI_CARD_WRAPPER_CLASS","borderStyle","keys_1","dragCell","transition","transitionColumns","allowTransition","allowedTransition","colKey","attrs","data-key","lineHeight","currentCardKey","targetCardKey","allowedKey","rows","dragRow","cls.DROP_CLASS","addDropping","allowDragAndDrop","dimensions","hasAddButton","code","removeAttribute","dragStopClear","dragStopPostClear","dataDropIndexKeyfieldValue","dropIndex","cardStatus_1","updateDroppedData","changeOrder","events.dragStop","draggedColumnKey","droppedColumnKey","crudModule","ensureColumnNotEmpty","removeEmptyTrElement","showEmptyRow","swimlaneRowList","cardRowData","removeProperty","clearInterval","navigationInterval","styleCard","externalCell","isDragging","cardStatus","crudObj","crudData","prev","swimlaneIndex","modifieddata","draggedCard","keyIndex_1","prevele","reverse","cloneTarget","list","cloneMulti","node","eventArgs","getPageCoordinates","pageX","tooltipModule","tooltipObj","close","changedTouches","setInterval","autoScroll","autoScrollValidation","dragEdges","right","viewBoundaries","pageYOffset","pageXOffset","parent_2","xScrollable","yBounds","xBounds","parent_1","yIsScrollable","scrollHeight","xIsScrollable","scrollWidth","yInBounds","scrollTop","xInBounds","scrollLeft","yScrollable","enableFrozenRows","scrollY","scrollTo","scrollX","unWireDragEvents","dragInstance","destroy","KanbanDialog","renderDialog","dialogObj","show","closeDialog","dialogModel","buttons","getDialogButtons","content","getDialogContent","cssClass","cls.DIALOG_CLASS","enableRtl","header","isModal","showCloseIcon","visible","beforeOpen","onBeforeDialogOpen","beforeClose","onBeforeDialogClose","Dialog","dialogSettings","model","applyFormValidation","title","container","form","cls.FORM_CLASS","onsubmit","template","destroyComponents","childNodes","templateId","dialogTemplate","templateParser","append","dialogWrapper","table","dialogFields_1","getDialogFields","tr","td","renderComponents","fields","contentField","flatButtonClass","dialogButtons","buttonModel","isPrimary","click","dialogButtonClick","deleteButton","dropDownOptions","controlObj","wrapper","cls.FIELD_CLASS","name","fieldValue","currentKeys","isColumnVisible","concat","DropDownList","NumericTextBox","TextBox","enabled","divElement","aria-label","appendTo","eventProp","storeElement","activeElement","maxHeight","events.dialogOpen","openArgs","formInputs","getFormElements","isInteracted","preventUpdate","formInputs_1","input","columnName","getColumnName","getValueFromElement","getIDType","events.dialogClose","closeArgs","rules","validationRules","formObj","FormValidator","customPlacement","inputElement","createTooltip","validationComplete","elem","inputName","display","status","dlgContent","inputClient","client","div","cls.ERROR_VALIDATION_CLASS","arrow","destroyToolTip","reset","activeCard","cloneNode","keyCode","getElementById","validate","updateIndex","enableHtmlSanitizer","SanitizeHtmlHelper","sanitize","validElements","elements_1","fieldSelector","control","attrName","isDropDowns","attrEle","checked","formelement_1","isReact","focus","Keyboard","keyActionHandler","ele","preventDefault","processUpDownArrow","processLeftRightArrow","processCardSelection","processEnter","cls.SHOW_ADD_FOCUS","selected","selection","removeSelection","multiSelection","attribute","headerIcon","swimlaneIcon","keyConfigs","firstCardSelection","upArrow","downArrow","rightArrow","leftArrow","multiSelectionEnter","multiSelectionSpace","multiSelectionByUpArrow","multiSelectionByDownArrow","shiftTab","enter","tab","delete","escape","space","tabIndex","KeyboardEvents","keyAction","eventName","KanbanTooltip","renderTooltip","Tooltip","mouseTrail","offsetY","showTipPointer","cls.TOOLTIP_TEXT_CLASS","beforeRender","onBeforeRender","onBeforeClose","isStringTemplate","tooltipContent","tooltipTemplate","dragAndDropModule","initializeCSPTemplate","innerText","resetTemplates","KanbanTouch","wireTouchEvents","touchObj","Touch","tapHold","tapHoldHandler","originalEvent","renderMobilePopup","closeIcon","buttonObj","mobilePopupWrapper","cls.POPUP_WRAPPER_CLASS","cls.CLOSE_CLASS","cls.POPUP_CONTENT_CLASS","cls.DEVICE_CLASS","Popup","targetType","hideAnimation","showAnimation","collision","X","Y","viewPortElement","zIndex","popupClose","Button","iconCss","closeClick","getPopupContent","popupContent","textContent","popupDestroy","unWireTouchEvents","MobileLayout","renderSwimlaneHeader","toolbarWrapper","cls.SWIMLANE_HEADER_CLASS","cls.TOOLBAR_MENU_ICON_CLASS","cls.TOOLBAR_SWIMLANE_NAME_CLASS","menuClick","renderSwimlaneTree","treeHeight","popupOverlay","cls.SWIMLANE_OVERLAY_CLASS","cls.SWIMLANE_CONTENT_CLASS","treeWrapper","cls.SWIMLANE_RESOURCE_CLASS","swimlaneTree","popupObj","treeViewObj","TreeView","nodeTemplate","nodeClicked","treeSwimlaneClick","drawNode","actionOnScroll","duration","treePopup","treeNodes","hidePopup","innerWidth","treeViewTemplate","nodeData","LayoutRender","initRender","on","scrollUiUpdate","renderHeader","renderContent","renderCards","renderValidation","wireEvents","isInitialRender","headerWrap","cls.SWIMLANE_CLASS","headerTable","cls.HEADER_TABLE_CLASS","tableHead","renderColGroup","tableBody","role","stackedHeaders","createStackedRow","cls.HEADER_ROW_CLASS","th_1","headerWrapper","noOfCard","isExpand","icon","dataObj","data-role","scope","allowToggle","cls.HEADER_WRAP_CLASS","headerTitle","cls.HEADER_TITLE_CLASS","templateArgs","minCount","maxCount","cls.TEMPLATE_CLASS","templateHeader","header_1","cls.HEADER_TEXT_CLASS","itemCount","cls.CARD_ITEM_COUNT_CLASS","tabindex","textField","events.queryCellInfo","columnArgs","contentWrap","contentTable","cls.CONTENT_TABLE_CLASS","tHead","thElem","tBody","isCollaspsed","swimlaneRow","initializeSwimlaneTree","renderSwimlaneRow","renderSingleContent","button","dragClass","allowDrag","cls.DRAG_CLASS","allowDrop","cls.DROPPABLE_CLASS","aria-describedby","showAddButton","cls.SHOW_ADD_ICON","swimlaneHeaderName","swimlaneTemplate","cardCount","aria-expanded","colspan","swimlaneHeader","iconDiv","cardRows","removeTrs","columnTransition","dataCount","columnWrapper","cardWrapper_1","_loop_3","cardText","renderCard","events.cardRendered","cardArgs","renderEmptyCard","showEmptyColumn","data-id","aria-selected","aria-roledescription","cardTemplate","cardHeader","tooltipClass","enableTooltip","cardContent","showHeader","cls.CARD_HEADER_CLASS","cardCaption","cls.CARD_HEADER_TEXT_CLASS","cls.CARD_HEADER_TITLE_CLASS","cls.CARD_CONTENT_CLASS","tagsField","cardTags","cls.CARD_TAGS_CLASS","tags_1","tag","cls.CARD_TAG_CLASS","cls.CARD_LABEL_CLASS","grabberField","cls.CARD_COLOR_CLASS","borderLeftColor","footerCssField","cardFields","cls.CARD_FOOTER_CLASS","cls.CARD_FOOTER_CSS_CLASS","cls.EMPTY_CARD_CLASS","isToggle","showUnassignedRow","arr","swimlaneSorting","sortComparer","a","localeCompare","numeric","sortDirection","cls.STACKED_HEADER_ROW_CLASS","rows_1","keyFields","h","colSpan","th","swimlaneToolbar","cardWrapper","onAdaptiveScroll","paddingValue","clientWidth","clientHeight","paddingLeft","paddingRight","onContentScroll","scrollPosition","frozenRows","addFrozenSwimlaneDataKey","currentElem","frozenKey","nextSwim","curSwimHeight","prevSwimHeight","nextSwimHeight","firstSwimlane","frozenRow","cls.FROZEN_ROW_CLASS","insertBefore","setStyleAttribute","curSwim","prevSwim","frozenSwimHeight","frozenRowsElement","removeFrozenRows","onColumnScroll","offsetParent","isVisible","renderLimits","limits","cls.MIN_COUNT_CLASS","cls.MAX_COUNT_CLASS","childElementCount","headerCell","rowCells","colorClass","keySelector","constraintType","rowCards","getValidationClass","cls.MAX_COLOR_CLASS","cls.MIN_COLOR_CLASS","refreshValidation","minClass","maxClass","columnValue","columnKeys_1","_loop_4","sortCategory","sortOrder","first","second","isNumeric","firstData","secondData","toLowerCase","documentClick","Element","refreshHeaders","child","refreshCards","wireDragEvent","isColumnTemplateRefreshed","countSelector","cardLength","keys_2","swimlane","swimlaneKey","Browser","isIE","scrollData","rowSelector","field_1","cardWrapper_2","emptyCard","cardElement_1","cardRow","index_1","rowData","swim","swimRow","colData","replace","cardKey","cardContainer","touchStartEvent","unWireEvents","unWireDragEvent","off","swimlaneToolBarEle","swimlaneContent","VirtualLayoutRender","isSwimlane","cardHeightCalculate","headerHeight","windowResize","cloumnsTDElem","crudKeyField","isCRUD","cards_1","currentColumnDataCount","overallHeight","blocks","singleIndexCardCount","offsets","tempOffsets","maxBlock","viewInfo","getInfoFromView","scrollStatus","transformY","getTranslateY","cardVirtualElement","setPadding","currentStatus","columnOverAllHeight","columnHeight","previousScrollTop","currentScrollTop","scrollDirection","currentBlockIndex","oldBlockIndex","totalColumnData","cards_2","parseFloat","currentColumnBlock","floor","cardVirtualWrapper_1","getOffset","block","min","newBlockIndex","translate","endTranslate","paddingTop","scrollElem","isScrolledToLast","paddingBottom","skip","predicate","Predicate","updateData","onColScrollShowSkeleton","parentElemHeight","showSkeleton","skeletonCount","cardVirtualSkeletonWrapper","skeletonWrapper","skeleton","hideSkeleton","setTimeout","viewInfo_1","addIndex","cardVirtualElement_1","removeEndIndex","resultData_1","visibleStartIndex","visibleLength","currentScrolledHeight","removeIndex","checkScrollDirection","findScrollSpeed","isLastBlockRendered","isDuplicateScroll","timeStamp","previousTimeStamps","val","removeStartIndex","removeCardsOnScroll","scrollCardInsert","isDown","removableElem","nextSibling","previousSibling","startNumber","conditonsScrollDownCase","conditonsScrollUpCase","this_2","_loop_5","draggedColumnData","wrapperELement","cardsList","lastCardDataId","firstCardDataId","lastCardIndex","firstCardIndex","nextCard","isLast","nextCardIndex","nextCardData","triggerCardRendering","ensureBlocks","info","maxPage","indexes","indexRemoveZero","newBlock","isBlockAdded","infoType","page","getPageFromTop","getBlockIndexes","total","offsetKeys","some","offset","iOffset","Number","border","getPage","_loop_6","columnDataLength","cardElement_2","addCardCondition","addEventListener","winResize","debounce","removeEventListener","Kanban","Component","preRender","isDevice","enablePersistence","L10n","getModuleName","items","cardsSelected","addTitle","editTitle","deleteTitle","deleteContent","save","yes","no","noCard","unassigned","locale","requiredModules","getPersistData","addOnPersist","render","addClasses","removeClasses","cls.RTL_CLASS","createSpinner","initializeModules","onPropertyChanged","newProp","oldProp","onSwimlaneSettingsPropertyChanged","onCardSettingsPropertyChanged","_oldProp","isTouch","renderReactTemplates","templates","clearTemplate","destroyModules","compile","targetId","refreshHeader","Collection","Complex","Event","NotifyPropertyChanges","options","needsID"],"mappings":"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"}